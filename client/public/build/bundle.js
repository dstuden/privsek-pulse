var app=function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function r(){return Object.create(null)}function i(t){t.forEach(n)}function o(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function c(t){t.parentNode.removeChild(t)}function h(t){return document.createElement(t)}function l(t){return document.createTextNode(t)}function f(){return l(" ")}function p(){return l("")}function d(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function v(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function m(t){return""===t?null:+t}function y(t,e){t.value=null==e?"":e}let g;function b(t){g=t}function w(){if(!g)throw new Error("Function called outside component initialization");return g}function I(){const t=w();return(e,n)=>{const r=t.$$.callbacks[e];if(r){const i=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);r.slice().forEach((e=>{e.call(t,i)}))}}}function E(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t(e)))}const T=[],_=[],S=[],A=[],N=Promise.resolve();let k=!1;function D(){k||(k=!0,N.then(P))}function O(t){S.push(t)}let C=!1;const R=new Set;function P(){if(!C){C=!0;do{for(let t=0;t<T.length;t+=1){const e=T[t];b(e),x(e.$$)}for(b(null),T.length=0;_.length;)_.pop()();for(let t=0;t<S.length;t+=1){const e=S[t];R.has(e)||(R.add(e),e())}S.length=0}while(T.length);for(;A.length;)A.pop()();k=!1,C=!1,R.clear()}}function x(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(O)}}const L=new Set;let M;function F(){M={r:0,c:[],p:M}}function V(){M.r||i(M.c),M=M.p}function U(t,e){t&&t.i&&(L.delete(t),t.i(e))}function j(t,e,n,r){if(t&&t.o){if(L.has(t))return;L.add(t),M.c.push((()=>{L.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}function q(t,e){const n={},r={},i={$$scope:1};let o=t.length;for(;o--;){const s=t[o],a=e[o];if(a){for(const t in s)t in a||(r[t]=1);for(const t in a)i[t]||(n[t]=a[t],i[t]=1);t[o]=a}else for(const t in s)i[t]=1}for(const t in r)t in n||(n[t]=void 0);return n}function B(t){return"object"==typeof t&&null!==t?t:{}}function K(t){t&&t.c()}function G(t,e,r,s){const{fragment:a,on_mount:u,on_destroy:c,after_update:h}=t.$$;a&&a.m(e,r),s||O((()=>{const e=u.map(n).filter(o);c?c.push(...e):i(e),t.$$.on_mount=[]})),h.forEach(O)}function H(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function z(e,n,o,s,a,u,h=[-1]){const l=g;b(e);const f=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:a,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:n.context||[]),callbacks:r(),dirty:h,skip_bound:!1};let p=!1;if(f.ctx=o?o(e,n.props||{},((t,n,...r)=>{const i=r.length?r[0]:n;return f.ctx&&a(f.ctx[t],f.ctx[t]=i)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](i),p&&function(t,e){-1===t.$$.dirty[0]&&(T.push(t),D(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n})):[],f.update(),p=!0,i(f.before_update),f.fragment=!!s&&s(f.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);f.fragment&&f.fragment.l(t),t.forEach(c)}else f.fragment&&f.fragment.c();n.intro&&U(e.$$.fragment),G(e,n.target,n.anchor,n.customElement),P()}b(l)}class W{$destroy(){H(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const $=[];function X(t,e){return{subscribe:Q(t,e).subscribe}}function Q(e,n=t){let r;const i=[];function o(t){if(s(e,t)&&(e=t,r)){const t=!$.length;for(let t=0;t<i.length;t+=1){const n=i[t];n[1](),$.push(n,e)}if(t){for(let t=0;t<$.length;t+=2)$[t][0]($[t+1]);$.length=0}}}return{set:o,update:function(t){o(t(e))},subscribe:function(s,a=t){const u=[s,a];return i.push(u),1===i.length&&(r=n(o)||t),s(e),()=>{const t=i.indexOf(u);-1!==t&&i.splice(t,1),0===i.length&&(r(),r=null)}}}}function Y(e,n,r){const s=!Array.isArray(e),a=s?[e]:e,u=n.length<2;return X(r,(e=>{let r=!1;const c=[];let h=0,l=t;const f=()=>{if(h)return;l();const r=n(s?c[0]:c,e);u?e(r):l=o(r)?r:t},p=a.map(((e,n)=>function(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}(e,(t=>{c[n]=t,h&=~(1<<n),r&&f()}),(()=>{h|=1<<n}))));return r=!0,f(),function(){i(p),l()}}))}function J(t){let n,r,i;const o=[t[2]];var s=t[0];function a(t){let n={};for(let t=0;t<o.length;t+=1)n=e(n,o[t]);return{props:n}}return s&&(n=new s(a()),n.$on("routeEvent",t[7])),{c(){n&&K(n.$$.fragment),r=p()},m(t,e){n&&G(n,t,e),u(t,r,e),i=!0},p(t,e){const i=4&e?q(o,[B(t[2])]):{};if(s!==(s=t[0])){if(n){F();const t=n;j(t.$$.fragment,1,0,(()=>{H(t,1)})),V()}s?(n=new s(a()),n.$on("routeEvent",t[7]),K(n.$$.fragment),U(n.$$.fragment,1),G(n,r.parentNode,r)):n=null}else s&&n.$set(i)},i(t){i||(n&&U(n.$$.fragment,t),i=!0)},o(t){n&&j(n.$$.fragment,t),i=!1},d(t){t&&c(r),n&&H(n,t)}}}function Z(t){let n,r,i;const o=[{params:t[1]},t[2]];var s=t[0];function a(t){let n={};for(let t=0;t<o.length;t+=1)n=e(n,o[t]);return{props:n}}return s&&(n=new s(a()),n.$on("routeEvent",t[6])),{c(){n&&K(n.$$.fragment),r=p()},m(t,e){n&&G(n,t,e),u(t,r,e),i=!0},p(t,e){const i=6&e?q(o,[2&e&&{params:t[1]},4&e&&B(t[2])]):{};if(s!==(s=t[0])){if(n){F();const t=n;j(t.$$.fragment,1,0,(()=>{H(t,1)})),V()}s?(n=new s(a()),n.$on("routeEvent",t[6]),K(n.$$.fragment),U(n.$$.fragment,1),G(n,r.parentNode,r)):n=null}else s&&n.$set(i)},i(t){i||(n&&U(n.$$.fragment,t),i=!0)},o(t){n&&j(n.$$.fragment,t),i=!1},d(t){t&&c(r),n&&H(n,t)}}}function tt(t){let e,n,r,i;const o=[Z,J],s=[];function a(t,e){return t[1]?0:1}return e=a(t),n=s[e]=o[e](t),{c(){n.c(),r=p()},m(t,n){s[e].m(t,n),u(t,r,n),i=!0},p(t,[i]){let u=e;e=a(t),e===u?s[e].p(t,i):(F(),j(s[u],1,1,(()=>{s[u]=null})),V(),n=s[e],n?n.p(t,i):(n=s[e]=o[e](t),n.c()),U(n,1),n.m(r.parentNode,r))},i(t){i||(U(n),i=!0)},o(t){j(n),i=!1},d(t){s[e].d(t),t&&c(r)}}}function et(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const n=e.indexOf("?");let r="";return n>-1&&(r=e.substr(n+1),e=e.substr(0,n)),{location:e,querystring:r}}const nt=X(null,(function(t){t(et());const e=()=>{t(et())};return window.addEventListener("hashchange",e,!1),function(){window.removeEventListener("hashchange",e,!1)}}));function rt(t,e,n){let{routes:r={}}=e,{prefix:i=""}=e,{restoreScrollState:o=!1}=e;class s{constructor(t,e){if(!e||"function"!=typeof e&&("object"!=typeof e||!0!==e._sveltesparouter))throw Error("Invalid component object");if(!t||"string"==typeof t&&(t.length<1||"/"!=t.charAt(0)&&"*"!=t.charAt(0))||"object"==typeof t&&!(t instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:n,keys:r}=function(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,i,o,s=[],a="",u=t.split("/");for(u[0]||u.shift();i=u.shift();)"*"===(n=i[0])?(s.push("wild"),a+="/(.*)"):":"===n?(r=i.indexOf("?",1),o=i.indexOf(".",1),s.push(i.substring(1,~r?r:~o?o:i.length)),a+=~r&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(a+=(~r?"?":"")+"\\"+i.substring(o))):a+="/"+i;return{keys:s,pattern:new RegExp("^"+a+(e?"(?=$|/)":"/?$"),"i")}}(t);this.path=t,"object"==typeof e&&!0===e._sveltesparouter?(this.component=e.component,this.conditions=e.conditions||[],this.userData=e.userData,this.props=e.props||{}):(this.component=()=>Promise.resolve(e),this.conditions=[],this.props={}),this._pattern=n,this._keys=r}match(t){if(i)if("string"==typeof i){if(!t.startsWith(i))return null;t=t.substr(i.length)||"/"}else if(i instanceof RegExp){const e=t.match(i);if(!e||!e[0])return null;t=t.substr(e[0].length)||"/"}const e=this._pattern.exec(t);if(null===e)return null;if(!1===this._keys)return e;const n={};let r=0;for(;r<this._keys.length;){try{n[this._keys[r]]=decodeURIComponent(e[r+1]||"")||null}catch(t){n[this._keys[r]]=null}r++}return n}async checkConditions(t){for(let e=0;e<this.conditions.length;e++)if(!await this.conditions[e](t))return!1;return!0}}const a=[];r instanceof Map?r.forEach(((t,e)=>{a.push(new s(e,t))})):Object.keys(r).forEach((t=>{a.push(new s(t,r[t]))}));let u=null,c=null,h={};const l=I();async function f(t,e){await(D(),N),l(t,e)}let p=null;o&&(window.addEventListener("popstate",(t=>{p=t.state&&t.state.scrollY?t.state:null})),function(t){w().$$.after_update.push(t)}((()=>{p?window.scrollTo(p.scrollX,p.scrollY):window.scrollTo(0,0)})));let d=null,v=null;return nt.subscribe((async t=>{d=t;let e=0;for(;e<a.length;){const r=a[e].match(t.location);if(!r){e++;continue}const i={route:a[e].path,location:t.location,querystring:t.querystring,userData:a[e].userData};if(!await a[e].checkConditions(i))return n(0,u=null),v=null,void f("conditionsFailed",i);f("routeLoading",Object.assign({},i));const o=a[e].component;if(v!=o){o.loading?(n(0,u=o.loading),v=o,n(1,c=o.loadingParams),n(2,h={}),f("routeLoaded",Object.assign({},i,{component:u,name:u.name}))):(n(0,u=null),v=null);const e=await o();if(t!=d)return;n(0,u=e&&e.default||e),v=o}return r&&"object"==typeof r&&Object.keys(r).length?n(1,c=r):n(1,c=null),n(2,h=a[e].props),void f("routeLoaded",Object.assign({},i,{component:u,name:u.name}))}n(0,u=null),v=null})),t.$$set=t=>{"routes"in t&&n(3,r=t.routes),"prefix"in t&&n(4,i=t.prefix),"restoreScrollState"in t&&n(5,o=t.restoreScrollState)},t.$$.update=()=>{32&t.$$.dirty&&(history.scrollRestoration=o?"manual":"auto")},[u,c,h,r,i,o,function(e){E(t,e)},function(e){E(t,e)}]}Y(nt,(t=>t.location)),Y(nt,(t=>t.querystring));class it extends W{constructor(t){super(),z(this,t,rt,tt,s,{routes:3,prefix:4,restoreScrollState:5})}}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var ot=function(t,e){return(ot=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function st(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}ot(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var at=function(){return(at=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function ut(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function ct(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function ht(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function lt(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function ft(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function pt(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=pt(t[n],e[n]));return t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var dt=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function vt(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function mt(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var yt=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,gt.prototype.create),o}return st(e,t),e}(Error),gt=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?bt(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new yt(i,a,r);return u},t}();function bt(t,e){return t.replace(wt,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var wt=/\{\$([^}]+)}/g;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function It(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Et(t,e){var n=new Tt(t,e);return n.subscribe.bind(n)}var Tt=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=_t),void 0===r.error&&(r.error=_t),void 0===r.complete&&(r.complete=_t);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function _t(){}
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function St(t){return t&&t._delegate?t._delegate:t}var At=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),Nt="[DEFAULT]",kt=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=Nt);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new dt;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=at({identifier:Nt,optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t))try{this.getOrInitializeService({instanceIdentifier:Nt})}catch(t){}try{for(var r=ht(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=lt(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService({instanceIdentifier:u});a.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=Nt),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return ut(this,void 0,void 0,(function(){var t;return ct(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(ft(ft([],lt(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),lt(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=Nt),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var r=t.instanceIdentifier,i=void 0===r?Nt:r,o=t.options,s=void 0===o?{}:o,a=this.normalizeInstanceIdentifier(i);if(this.isInitialized(a))throw Error(this.name+"("+a+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var u=this.getOrInitializeService({instanceIdentifier:a,options:s});try{for(var c=ht(this.instancesDeferred.entries()),h=c.next();!h.done;h=c.next()){var l=lt(h.value,2),f=l[0],p=l[1];a===this.normalizeInstanceIdentifier(f)&&p.resolve(u)}}catch(t){e={error:t}}finally{try{h&&!h.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}return u},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===Nt?void 0:e),options:i}),this.instances.set(n,o),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(t){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:Nt:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Dt,Ot=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new kt(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function Ct(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Rt,Pt=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(Rt||(Rt={}));var xt,Lt={debug:Rt.DEBUG,verbose:Rt.VERBOSE,info:Rt.INFO,warn:Rt.WARN,error:Rt.ERROR,silent:Rt.SILENT},Mt=Rt.INFO,Ft=((Dt={})[Rt.DEBUG]="log",Dt[Rt.VERBOSE]="log",Dt[Rt.INFO]="info",Dt[Rt.WARN]="warn",Dt[Rt.ERROR]="error",Dt),Vt=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=Ft[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,Ct(["["+i+"]  "+t.name+":"],n))}},Ut=function(){function t(t){this.name=t,this._logLevel=Mt,this._logHandler=Vt,this._userLogHandler=null,Pt.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in Rt))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?Lt[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Ct([this,Rt.DEBUG],t)),this._logHandler.apply(this,Ct([this,Rt.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Ct([this,Rt.VERBOSE],t)),this._logHandler.apply(this,Ct([this,Rt.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Ct([this,Rt.INFO],t)),this._logHandler.apply(this,Ct([this,Rt.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Ct([this,Rt.WARN],t)),this._logHandler.apply(this,Ct([this,Rt.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Ct([this,Rt.ERROR],t)),this._logHandler.apply(this,Ct([this,Rt.ERROR],t))},t}();function jt(t){Pt.forEach((function(e){e.setLogLevel(t)}))}var qt,Bt=((xt={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",xt["bad-app-name"]="Illegal App name: '{$appName}",xt["duplicate-app"]="Firebase App named '{$appName}' already exists",xt["app-deleted"]="Firebase App named '{$appName}' already deleted",xt["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",xt["invalid-log-argument"]="First argument to `onLog` must be null or a function.",xt),Kt=new gt("app","Firebase",Bt),Gt="@firebase/app",Ht="[DEFAULT]",zt=((qt={})[Gt]="fire-core",qt["@firebase/analytics"]="fire-analytics",qt["@firebase/auth"]="fire-auth",qt["@firebase/database"]="fire-rtdb",qt["@firebase/functions"]="fire-fn",qt["@firebase/installations"]="fire-iid",qt["@firebase/messaging"]="fire-fcm",qt["@firebase/performance"]="fire-perf",qt["@firebase/remote-config"]="fire-rc",qt["@firebase/storage"]="fire-gcs",qt["@firebase/firestore"]="fire-fst",qt["fire-js"]="fire-js",qt["firebase-wrapper"]="fire-js-all",qt),Wt=new Ut("@firebase/app"),$t=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=pt(void 0,t),this.container=new Ot(e.name),this._addComponent(new At("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=Ht),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=Ht),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){Wt.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw Kt.create("app-deleted",{appName:this.name_})},t}();$t.prototype.name&&$t.prototype.options||$t.prototype.delete||console.log("dc");
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function Xt(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name=Ht);var s=o.name;if("string"!=typeof s||!s)throw Kt.create("bad-app-name",{appName:String(s)});if(It(e,s))throw Kt.create("duplicate-app",{appName:s});var a=new t(n,o,r);return e[s]=a,a},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=zt[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&a&&u.push("and"),a&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void Wt.warn(u.join(" "))}o(new At(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:jt,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw Kt.create("invalid-log-argument");!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=Lt[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:Rt[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=Pt;r<i.length;r++)n(i[r])}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t,e)},apps:null,SDK_VERSION:"8.4.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(!It(e,t=t||Ht))throw Kt.create("no-app",{appName:t});return e[t]}function o(o){var s=o.name;if(n.has(s))return Wt.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var a=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[s])throw Kt.create("invalid-app-argument",{appName:s});return t[s]()};void 0!==o.serviceProps&&pt(a,o.serviceProps),r[s]=a,t.prototype[s]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,s);return n.apply(this,o.multipleInstances?t:[])}}for(var u=0,c=Object.keys(e);u<c.length;u++){var h=c[u];e[h]._addComponent(o)}return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Qt=function t(){var e=Xt($t);return e.INTERNAL=at(at({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){pt(e,t)},createSubscribe:Et,ErrorFactory:gt,deepExtend:pt}),e}(),Yt=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){Wt.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Jt=self.firebase.SDK_VERSION;Jt&&Jt.indexOf("LITE")>=0&&Wt.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Zt=Qt.initializeApp;Qt.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return mt()&&Wt.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),Zt.apply(void 0,t)};var te=Qt;!function(t,e){t.INTERNAL.registerComponent(new At("platform-logger",(function(t){return new Yt(t)}),"PRIVATE")),t.registerVersion(Gt,"0.6.20",e),t.registerVersion("fire-js","")}(te);
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
te.registerVersion("firebase","8.4.2","app"),function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var n=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function r(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function i(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:r(t)}}!function(t,r){if(r){var i=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in i||(i[s]={}),i=i[s]}(r=r(o=i[t=t[t.length-1]]))!=o&&null!=r&&e(i,t,{configurable:!0,writable:!0,value:r})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function r(){this.a=null}function o(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;r.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var s=n.setTimeout;r.prototype.c=function(t){s(t,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},r.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new r;return e.prototype.s=function(t){var e=this.f();t.Qa(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,s=new e((function(t,e){i=t,o=e}));return this.Qa(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Qa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=o,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=i(t),s=r.next();!s.done;s=r.next())o(s.value).Qa(e,n)}))},e.all=function(t){var n=i(t),r=n.next();return r.done?o([]):new e((function(t,e){function i(e){return function(n){s[e]=n,0==--a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,o(r.value).Qa(i(s.length-1),e),r=n.next()}while(!r.done)}))},e}));var o=o||{},s=this||self,a=/^[\w+/_-]+[=]{0,2}$/,u=null;function c(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&a.test(t)?t:""}function h(){}function l(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function f(t){var e=l(t);return"array"==e||"object"==e&&"number"==typeof t.length}function p(t){return"function"==l(t)}function d(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var v="closure_uid_"+(1e9*Math.random()>>>0),m=0;function y(t,e,n){return t.call.apply(t.bind,arguments)}function g(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function b(t,e,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:g).apply(null,arguments)}function w(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function I(t,e){function n(){}n.prototype=e.prototype,t.ab=e.prototype,t.prototype=new n,t.prototype.constructor=t}function E(t){return t}function T(t,e,n){this.code=A+t,this.message=e||N[t]||"",this.a=n||null}function _(t){var e=t&&t.code;return e?new T(e.substring(A.length),t.message,t.serverResponse):null}I(T,Error),T.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},T.prototype.toJSON=function(){return this.w()};var S,A="auth/",N={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},k={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function D(t){for(var e in k)if(k[e].id===t)return{firebaseEndpoint:(t=k[e]).Ta,secureTokenEndpoint:t.Za,identityPlatformEndpoint:t.Wa};return null}function O(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function C(t){if(Error.captureStackTrace)Error.captureStackTrace(this,C);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function R(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");C.call(this,n+t[r])}function P(t,e){throw new R("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function x(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function L(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function M(){this.b=this.a=null}S=D("__EID__")?"__EID__":void 0,I(C,Error),C.prototype.name="CustomError",I(R,C),R.prototype.name="AssertionError",x.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var F=new x((function(){return new U}),(function(t){t.reset()}));function V(){var t=ge,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function U(){this.next=this.b=this.a=null}M.prototype.add=function(t,e){var n=F.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},U.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},U.prototype.reset=function(){this.next=this.b=this.a=null};var j=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},q=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var B=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},K=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},G=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function H(t,e){return 0<=j(t,e)}function z(t,e){var n;return(n=0<=(e=j(t,e)))&&Array.prototype.splice.call(t,e,1),n}function W(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&1==Array.prototype.splice.call(t,r,1).length&&0}))}function $(t){return Array.prototype.concat.apply([],arguments)}function X(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var Q,Y=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},J=/&/g,Z=/</g,tt=/>/g,et=/"/g,nt=/'/g,rt=/\x00/g,it=/[\x00&<>"']/;function ot(t,e){return-1!=t.indexOf(e)}function st(t,e){return t<e?-1:t>e?1:0}t:{var at=s.navigator;if(at){var ut=at.userAgent;if(ut){Q=ut;break t}}Q=""}function ct(t){return ot(Q,t)}function ht(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function lt(t){for(var e in t)return!1;return!0}function ft(t){var e,n={};for(e in t)n[e]=t[e];return n}var pt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function dt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<pt.length;o++)n=pt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function vt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||s).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(d(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;P("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function mt(t,e){this.a=t===wt&&e||"",this.b=bt}function yt(t){return t instanceof mt&&t.constructor===mt&&t.b===bt?t.a:(P("expected object of type Const, got '"+t+"'"),"type_error:Const")}mt.prototype.sa=!0,mt.prototype.ra=function(){return this.a},mt.prototype.toString=function(){return"Const{"+this.a+"}"};var gt,bt={},wt={};function It(){if(void 0===gt){var t=null,e=s.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:E,createScript:E,createScriptURL:E})}catch(t){s.console&&s.console.error(t.message)}gt=t}else gt=t}return gt}function Et(t,e){this.a=e===Nt?t:""}function Tt(t){return t instanceof Et&&t.constructor===Et?t.a:(P("expected object of type TrustedResourceUrl, got '"+t+"' of type "+l(t)),"type_error:TrustedResourceUrl")}function _t(t,e){var n=yt(t);if(!At.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=It();return new Et(t=e?e.createScriptURL(t):t,Nt)}(t=n.replace(St,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof mt?yt(t):encodeURIComponent(String(t))})))}Et.prototype.sa=!0,Et.prototype.ra=function(){return this.a.toString()},Et.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var St=/%{(\w+)}/g,At=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Nt={};function kt(t,e){this.a=e===Lt?t:""}function Dt(t){return t instanceof kt&&t.constructor===kt?t.a:(P("expected object of type SafeUrl, got '"+t+"' of type "+l(t)),"type_error:SafeUrl")}kt.prototype.sa=!0,kt.prototype.ra=function(){return this.a.toString()},kt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Ot=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Ct=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Rt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Pt(t){if(t instanceof kt)return t;if(t="object"==typeof t&&t.sa?t.ra():String(t),Rt.test(t))t=new kt(t,Lt);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Ct);t=e&&Ot.test(e[1])?new kt(t,Lt):null}return t}function xt(t){return t instanceof kt?t:(t="object"==typeof t&&t.sa?t.ra():String(t),Rt.test(t)||(t="about:invalid#zClosurez"),new kt(t,Lt))}var Lt={},Mt=new kt("about:invalid#zClosurez",Lt);function Ft(t,e,n){this.a=n===Vt?t:""}Ft.prototype.sa=!0,Ft.prototype.ra=function(){return this.a.toString()},Ft.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Vt={};function Ut(t,e,n,r){return t=t instanceof kt?t:xt(t),e=e||s,n=n instanceof mt?yt(n):n||"",e.open(Dt(t),n,r,void 0)}function jt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function qt(t){return it.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(J,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(Z,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(tt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(et,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(nt,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(rt,"&#0;"))),t}function Bt(t){return Bt[" "](t),t}Bt[" "]=h;var Kt,Gt,Ht=ct("Opera"),zt=ct("Trident")||ct("MSIE"),Wt=ct("Edge"),$t=Wt||zt,Xt=ct("Gecko")&&!(ot(Q.toLowerCase(),"webkit")&&!ct("Edge"))&&!(ct("Trident")||ct("MSIE"))&&!ct("Edge"),Qt=ot(Q.toLowerCase(),"webkit")&&!ct("Edge");function Yt(){var t=s.document;return t?t.documentMode:void 0}t:{var Jt="",Zt=(Gt=Q,Xt?/rv:([^\);]+)(\)|;)/.exec(Gt):Wt?/Edge\/([\d\.]+)/.exec(Gt):zt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Gt):Qt?/WebKit\/(\S+)/.exec(Gt):Ht?/(?:Version)[ \/]?(\S+)/.exec(Gt):void 0);if(Zt&&(Jt=Zt?Zt[1]:""),zt){var ee=Yt();if(null!=ee&&ee>parseFloat(Jt)){Kt=String(ee);break t}}Kt=Jt}var ne,re={};function ie(t){return function(t,e){var n=re;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=Y(String(Kt)).split("."),r=Y(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=st(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||st(0==s[2].length,0==a[2].length)||st(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}if(s.document&&zt){var oe=Yt();ne=oe||(parseInt(Kt,10)||void 0)}else ne=void 0;var se=ne;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Gt){}var ae=!zt||9<=Number(se);function ue(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ce(t,e){ht(e,(function(e,n){e&&"object"==typeof e&&e.sa&&(e=e.ra()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:fe.hasOwnProperty(n)?t.setAttribute(fe[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var he,le,fe={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function pe(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!f(o)||d(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(d(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(p(o)){s="function"==typeof o.item;break t}}s=!1}q(s?X(o):o,r)}}}function de(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ve(t){s.setTimeout((function(){throw t}),0)}function me(t,e){le||function(){if(s.Promise&&s.Promise.resolve){var t=s.Promise.resolve(void 0);le=function(){t.then(be)}}else le=function(){var t=be;!p(s.setImmediate)||s.Window&&s.Window.prototype&&!ct("Edge")&&s.Window.prototype.setImmediate==s.setImmediate?(he||(he=function(){var t=s.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ct("Presto")&&(t=function(){var t=de(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=b((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!ct("Trident")&&!ct("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Gb;n.Gb=null,t()}},function(t){r.next={Gb:t},r=r.next,e.port2.postMessage(0)}}return function(t){s.setTimeout(t,0)}}()),he(t)):s.setImmediate(t)}}(),ye||(le(),ye=!0),ge.add(t,e)}var ye=!1,ge=new M;function be(){for(var t;t=V();){try{t.a.call(t.b)}catch(t){ve(t)}L(F,t)}ye=!1}function we(t,e){if(this.a=Ie,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=h)try{var n=this;t.call(e,(function(t){xe(n,Ee,t)}),(function(t){if(!(t instanceof qe))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}xe(n,Te,t)}))}catch(t){xe(this,Te,t)}}var Ie=0,Ee=2,Te=3;function _e(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}_e.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Se=new x((function(){return new _e}),(function(t){t.reset()}));function Ae(t,e,n){var r=Se.get();return r.g=t,r.b=e,r.f=n,r}function Ne(t){if(t instanceof we)return t;var e=new we(h);return xe(e,Ee,t),e}function ke(t){return new we((function(e,n){n(t)}))}function De(t,e,n){Le(t,e,n,null)||me(w(e,t))}function Oe(t){return new we((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Pb:!0,value:o}:{Pb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)De(t[o],w(i,o,!0),w(i,o,!1));else e(r)}))}function Ce(t,e){if(t.a==Ie)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,s=n.b;s&&(s.c||(r++,s.a==t&&(i=s),!(i&&1<r)));s=s.next)i||(o=s);i&&(n.a==Ie&&1==r?Ce(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Fe(n),Ve(n,i,Te,e)))}t.c=null}else xe(t,Te,e)}function Re(t,e){t.b||t.a!=Ee&&t.a!=Te||Me(t),t.f?t.f.next=e:t.b=e,t.f=e}function Pe(t,e,n,r){var i=Ae(null,null,null);return i.a=new we((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof qe?o(e):t(i)}catch(t){o(t)}}:o})),i.a.c=t,Re(t,i),i.a}function xe(t,e,n){t.a==Ie&&(t===n&&(e=Te,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Le(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Me(t),e!=Te||n instanceof qe||function(t,e){t.g=!0,me((function(){t.g&&je.call(null,e)}))}(t,n)))}function Le(t,e,n,r){if(t instanceof we)return Re(t,Ae(e||h,n||null,r)),!0;if(O(t))return t.then(e,n,r),!0;if(d(t))try{var i=t.then;if(p(i))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}function s(t){a||(a=!0,n.call(i,t))}var a=!1;try{e.call(t,s,o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function Me(t){t.h||(t.h=!0,me(t.gc,t))}function Fe(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Ve(t,e,n,r){if(n==Te&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Ue(e,n,r);else try{e.c?e.g.call(e.f):Ue(e,n,r)}catch(t){je.call(null,t)}L(Se,e)}function Ue(t,e,n){e==Ee?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}we.prototype.then=function(t,e,n){return Pe(this,p(t)?t:null,p(e)?e:null,n)},we.prototype.$goog_Thenable=!0,(t=we.prototype).oa=function(t,e){return(t=Ae(t,t,e)).c=!0,Re(this,t),this},t.o=function(t,e){return Pe(this,null,t,e)},t.cancel=function(t){if(this.a==Ie){var e=new qe(t);me((function(){Ce(this,e)}),this)}},t.$c=function(t){this.a=Ie,xe(this,Ee,t)},t.ad=function(t){this.a=Ie,xe(this,Te,t)},t.gc=function(){for(var t;t=Fe(this);)Ve(this,t,this.a,this.i);this.h=!1};var je=ve;function qe(t){C.call(this,t)}function Be(){this.xa=this.xa,this.pa=this.pa}I(qe,C),qe.prototype.name="cancel";function Ke(t){!t.xa&&(t.xa=!0,t.Da(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,v)&&t[v]||(t[v]=++m)}(t)}Be.prototype.xa=!1,Be.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Ge=Object.freeze||function(t){return t},He=!zt||9<=Number(se),ze=zt&&!ie("9"),We=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{s.addEventListener("test",h,e),s.removeEventListener("test",h,e)}catch(t){}return t}();function $e(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Xe(t,e){if($e.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Xt){t:{try{Bt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Qe[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}$e.prototype.preventDefault=function(){this.defaultPrevented=!0},I(Xe,$e);var Qe=Ge({2:"touch",3:"pen",4:"mouse"});Xe.prototype.preventDefault=function(){Xe.ab.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,ze)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},Xe.prototype.g=function(){return this.a};var Ye="closure_listenable_"+(1e6*Math.random()|0),Je=0;function Ze(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Va=i,this.key=++Je,this.va=this.Pa=!1}function tn(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Va=null}function en(t){this.src=t,this.a={},this.b=0}function nn(t,e){var n=e.type;n in t.a&&z(t.a[n],e)&&(tn(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function rn(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Va==r)return i}return-1}en.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=rn(t,e,r,i);return-1<s?(e=t[s],n||(e.Pa=!1)):((e=new Ze(e,this.src,o,!!r,i)).Pa=n,t.push(e)),e};var on="closure_lm_"+(1e6*Math.random()|0),sn={};function an(t,e,n,r,i){if(r&&r.once)cn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)an(t,e[o],n,r,i);else n=gn(n),t&&t[Ye]?wn(t,e,n,d(r)?!!r.capture:!!r,i):un(t,e,n,!1,r,i)}function un(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=d(i)?!!i.capture:!!i,a=mn(t);if(a||(t[on]=a=new en(t)),!(n=a.add(e,n,r,s,o)).proxy)if(r=function(){var t=vn,e=He?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)We||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(fn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function cn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)cn(t,e[o],n,r,i);else n=gn(n),t&&t[Ye]?In(t,e,n,d(r)?!!r.capture:!!r,i):un(t,e,n,!0,r,i)}function hn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)hn(t,e[o],n,r,i);else r=d(r)?!!r.capture:!!r,n=gn(n),t&&t[Ye]?(t=t.v,(e=String(e).toString())in t.a&&(-1<(n=rn(o=t.a[e],n,r,i))&&(tn(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=mn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=rn(e,n,r,i)),(n=-1<t?e[t]:null)&&ln(n))}function ln(t){if("number"!=typeof t&&t&&!t.va){var e=t.src;if(e&&e[Ye])nn(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(fn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=mn(e))?(nn(n,t),0==n.b&&(n.src=null,e[on]=null)):tn(t)}}}function fn(t){return t in sn?sn[t]:sn[t]="on"+t}function pn(t,e,n,r){var i=!0;if((t=mn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=dn(o,r),i=i&&!1!==o)}return i}function dn(t,e){var n=t.listener,r=t.Va||t.src;return t.Pa&&ln(t),n.call(r,e)}function vn(t,e){if(t.va)return!0;if(!He){if(!e)t:{e=["window","event"];for(var n=s,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Xe(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=pn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=pn(r[i],t,!1,e),n=n&&o}return n}return dn(t,new Xe(e,this))}function mn(t){return(t=t[on])instanceof en?t:null}var yn="__closure_events_fn_"+(1e9*Math.random()>>>0);function gn(t){return p(t)?t:(t[yn]||(t[yn]=function(e){return t.handleEvent(e)}),t[yn])}function bn(){Be.call(this),this.v=new en(this),this.ac=this,this.gb=null}function wn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function In(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function En(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.va&&s.capture==n){var a=s.listener,u=s.Va||s.src;s.Pa&&nn(t.v,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function Tn(t,e,n){if(p(t))n&&(t=b(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=b(t.handleEvent,t)}return 2147483647<Number(e)?-1:s.setTimeout(t,e||0)}function _n(t){var e=null;return new we((function(n,r){-1==(e=Tn((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw s.clearTimeout(e),t}))}function Sn(t){if(t.W&&"function"==typeof t.W)return t.W();if("string"==typeof t)return t.split("");if(f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function An(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.W||"function"!=typeof t.W){if(f(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function Nn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Nn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function kn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Dn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Dn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Dn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}I(bn,Be),bn.prototype[Ye]=!0,bn.prototype.addEventListener=function(t,e,n,r){an(this,t,e,n,r)},bn.prototype.removeEventListener=function(t,e,n,r){hn(this,t,e,n,r)},bn.prototype.dispatchEvent=function(t){var e,n=this.gb;if(n)for(e=[];n;n=n.gb)e.push(n);n=this.ac;var r=t.type||t;if("string"==typeof t)t=new $e(t,n);else if(t instanceof $e)t.target=t.target||n;else{var i=t;dt(t=new $e(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=En(s,r,!0,t)&&i}if(i=En(s=t.b=n,r,!0,t)&&i,i=En(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=En(s=t.b=e[o],r,!1,t)&&i;return i},bn.prototype.Da=function(){if(bn.ab.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)tn(n[r]);delete e.a[t],e.b--}}this.gb=null},(t=Nn.prototype).W=function(){kn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return kn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Dn(this.b,t)?this.b[t]:e},t.set=function(t,e){Dn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var On=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Cn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Cn?(this.i=void 0!==e?e:t.i,Rn(this,t.c),this.l=t.l,this.a=t.a,Pn(this,t.g),this.f=t.f,xn(this,Zn(t.b)),this.h=t.h):t&&(n=String(t).match(On))?(this.i=!!e,Rn(this,n[1]||"",!0),this.l=Un(n[2]||""),this.a=Un(n[3]||"",!0),Pn(this,n[4]),this.f=Un(n[5]||"",!0),xn(this,n[6]||"",!0),this.h=Un(n[7]||"")):(this.i=!!e,this.b=new Wn(null,this.i))}function Rn(t,e,n){t.c=n?Un(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Pn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function xn(t,e,n){e instanceof Wn?(t.b=e,function(t,e){e&&!t.f&&($n(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Qn(this,e),Jn(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=jn(e,Hn)),t.b=new Wn(e,t.i))}function Ln(t,e,n){t.b.set(e,n)}function Mn(t,e){return t.b.get(e)}function Fn(t){return t instanceof Cn?new Cn(t):new Cn(t,void 0)}function Vn(t,e,n,r){var i=new Cn(null,void 0);return t&&Rn(i,t),e&&(i.a=e),n&&Pn(i,n),r&&(i.f=r),i}function Un(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function jn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,qn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function qn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Cn.prototype.toString=function(){var t=[],e=this.c;e&&t.push(jn(e,Bn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(jn(e,Bn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(jn(n,"/"==n.charAt(0)?Gn:Kn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",jn(n,zn)),t.join("")},Cn.prototype.resolve=function(t){var e=new Cn(this),n=!!t.c;n?Rn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)Pn(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ot(i,"./")||ot(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?xn(e,Zn(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Bn=/[#\/\?@]/g,Kn=/[#\?:]/g,Gn=/[#\?]/g,Hn=/[#\?@]/g,zn=/#/g;function Wn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function $n(t){t.a||(t.a=new Nn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Xn(t){var e=An(t);if(void 0===e)throw Error("Keys are undefined");var n=new Wn(null,void 0);t=Sn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Jn(n,i,o):n.add(i,o)}return n}function Qn(t,e){$n(t),e=tr(t,e),Dn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Dn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&kn(t)))}function Yn(t,e){return $n(t),e=tr(t,e),Dn(t.a.b,e)}function Jn(t,e,n){Qn(t,e),0<n.length&&(t.c=null,t.a.set(tr(t,e),X(n)),t.b+=n.length)}function Zn(t){var e=new Wn;return e.c=t.c,t.a&&(e.a=new Nn(t.a),e.b=t.b),e}function tr(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function er(t){var e=[];return rr(new nr,t,e),e.join("")}function nr(){}function rr(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),rr(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&("function"!=typeof(o=e[r])&&(n.push(i),sr(r,n),n.push(":"),rr(t,o,n),i=","));return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":sr(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=Wn.prototype).add=function(t,e){$n(this),this.c=null,t=tr(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){$n(this),this.a.forEach((function(n,r){q(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){$n(this);for(var t=this.a.W(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.W=function(t){$n(this);var e=[];if("string"==typeof t)Yn(this,t)&&(e=$(e,this.a.get(tr(this,t))));else{t=this.a.W();for(var n=0;n<t.length;n++)e=$(e,t[n])}return e},t.set=function(t,e){return $n(this),this.c=null,Yn(this,t=tr(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.W(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.W(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var ir={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},or=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function sr(t,e){e.push('"',t.replace(or,(function(t){var e=ir[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),ir[t]=e),e})),'"')}function ar(){var t=Nr();return zt&&!!se&&11==se||/Edge\/\d+/.test(t)}function ur(){return s.window&&s.window.location.href||self&&self.location&&self.location.href||""}function cr(t,e){e=e||s.window;var n="about:blank";t&&(n=Dt(Pt(t)||Mt)),e.location.href=n}function hr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<hr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function lr(t){return!!((t=(t||Nr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function fr(t){t=t||s.window;try{t.close()}catch(t){}}function pr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Nr().toLowerCase(),r&&(e.target=r,ot(n,"crios/")&&(e.target="_blank")),_r(Nr())==Er&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof kt?n:Pt(void 0!==n.href?n.href:String(n))||Mt,n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((ct("iPhone")&&!ct("iPod")&&!ct("iPad")||ct("iPad")||ct("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(vt(s=de(document,"A"),"HTMLAnchorElement"),e=e instanceof kt?e:xt(e),s.href=Dt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=Ut("",r,n,s),t=Dt(e),s&&($t&&ot(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+qt(t)+'">',t=new Ft(t=(r=It())?r.createHTML(t):t,null,Vt),r=s.document)&&(r.write(function(t){return t instanceof Ft&&t.constructor===Ft?t.a:(P("expected object of type SafeHtml, got '"+t+"' of type "+l(t)),"type_error:SafeHtml")}(t)),r.close())):(s=Ut(e,r,n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(t){}return s}var dr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vr=/^[^@]+@[^@]+$/;function mr(){var t=null;return new we((function(e){"complete"==s.document.readyState?e():(t=function(){e()},cn(window,"load",t))})).o((function(e){throw hn(window,"load",t),e}))}function yr(t){return t=t||Nr(),!("file:"!==Rr()&&"ionic:"!==Rr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function gr(){var t=s.window;try{return!(!t||t==t.top)}catch(t){return!1}}function br(){return void 0!==s.WorkerGlobalScope&&"function"==typeof s.importScripts}function wr(){return te.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":te.INTERNAL.hasOwnProperty("node")?"Node":br()?"Worker":"Browser"}function Ir(){var t=wr();return"ReactNative"===t||"Node"===t}var Er="Firefox",Tr="Chrome";function _r(t){var e=t.toLowerCase();return ot(e,"opera/")||ot(e,"opr/")||ot(e,"opios/")?"Opera":ot(e,"iemobile")?"IEMobile":ot(e,"msie")||ot(e,"trident/")?"IE":ot(e,"edge/")?"Edge":ot(e,"firefox/")?Er:ot(e,"silk/")?"Silk":ot(e,"blackberry")?"Blackberry":ot(e,"webos")?"Webos":!ot(e,"safari/")||ot(e,"chrome/")||ot(e,"crios/")||ot(e,"android")?!ot(e,"chrome/")&&!ot(e,"crios/")||ot(e,"edge/")?ot(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Tr:"Safari"}var Sr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Ar(t,e){e=e||[];var n,r=[],i={};for(n in Sr)i[Sr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=wr())?r=_r(i=Nr()):"Worker"===r&&(r=_r(i=Nr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Nr(){return s.navigator&&s.navigator.userAgent||""}function kr(t,e){t=t.split("."),e=e||s;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Dr(){try{var t=s.localStorage,e=Fr();if(t)return t.setItem(e,"1"),t.removeItem(e),!ar()||!!s.indexedDB}catch(t){return br()&&!!s.indexedDB}return!1}function Or(){return(Cr()||"chrome-extension:"===Rr()||yr())&&!Ir()&&Dr()&&!br()}function Cr(){return"http:"===Rr()||"https:"===Rr()}function Rr(){return s.location&&s.location.protocol||null}function Pr(t){return!lr(t=t||Nr())&&_r(t)!=Er}function xr(t){return void 0===t?null:er(t)}function Lr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Mr(t){if(null!==t)return JSON.parse(t)}function Fr(t){return t||Math.floor(1e9*Math.random()).toString()}function Vr(t){return"Safari"!=_r(t=t||Nr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Ur(){var t=s.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function jr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Nr(),e=wr(),this.b=lr(t)||"ReactNative"===e}function qr(){var t=s.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Br(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Kr(){return!(!kr("fireauth.oauthhelper",s)&&!kr("fireauth.iframe",s))}jr.prototype.get=function(){var t=s.navigator;return!t||"boolean"!=typeof t.onLine||!Cr()&&"chrome-extension:"!==Rr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Gr,Hr={};function zr(t){Hr[t]||(Hr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Wr={};Object.defineProperty(Wr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Wr,"abcd",{configurable:!0,enumerable:!0,value:2}),Gr=2==Wr.abcd}catch(Gt){Gr=!1}function $r(t,e,n){Gr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Xr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&$r(t,n,e[n])}function Qr(t){var e={};return Xr(e,t),e}function Yr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)$r(e,n,Yr(t[n]));return e}function Jr(t){var e=t&&(t[ri]?"phone":null);if(!(e&&t&&t[ni]))throw new T("internal-error","Internal assert: invalid MultiFactorInfo object");$r(this,"uid",t[ni]),$r(this,"displayName",t[ti]||null);var n=null;t[ei]&&(n=new Date(t[ei]).toUTCString()),$r(this,"enrollmentTime",n),$r(this,"factorId",e)}function Zr(t){try{var e=new ii(t)}catch(t){e=null}return e}Jr.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ti="displayName",ei="enrolledAt",ni="mfaEnrollmentId",ri="phoneInfo";function ii(t){Jr.call(this,t),$r(this,"phoneNumber",t[ri])}function oi(t){var e={},n=t[ci],r=t[li],i=t[fi];if(t=Zr(t[hi]),!i||i!=ai&&i!=ui&&!n||i==ui&&!r||i==si&&!t)throw Error("Invalid checkActionCode response!");i==ui?(e[di]=n||null,e[mi]=n||null,e[pi]=r):(e[di]=r||null,e[mi]=r||null,e[pi]=n||null),e[vi]=t||null,$r(this,gi,i),$r(this,yi,Yr(e))}I(ii,Jr),ii.prototype.w=function(){var t=ii.ab.w.call(this);return t.phoneNumber=this.phoneNumber,t};var si="REVERT_SECOND_FACTOR_ADDITION",ai="EMAIL_SIGNIN",ui="VERIFY_AND_CHANGE_EMAIL",ci="email",hi="mfaInfo",li="newEmail",fi="requestType",pi="email",di="fromEmail",vi="multiFactorInfo",mi="previousEmail",yi="data",gi="operation";function bi(t){var e=Mn(t=Fn(t),wi)||null,n=Mn(t,Ii)||null,r=Mn(t,_i)||null;if(r=r&&Ai[r]||null,!e||!n||!r)throw new T("argument-error",wi+", "+Ii+"and "+_i+" are required in a valid action code URL.");Xr(this,{apiKey:e,operation:r,code:n,continueUrl:Mn(t,Ei)||null,languageCode:Mn(t,Ti)||null,tenantId:Mn(t,Si)||null})}var wi="apiKey",Ii="oobCode",Ei="continueUrl",Ti="languageCode",_i="mode",Si="tenantId",Ai={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:si,signIn:ai,verifyAndChangeEmail:ui,verifyEmail:"VERIFY_EMAIL"};function Ni(t){try{return new bi(t)}catch(t){return null}}function ki(t){var e=t[Pi];if(void 0===e)throw new T("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new T("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Di];if(n&&"object"==typeof n){e=n[Mi];var r=n[xi];if(n=n[Li],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new T("argument-error",xi+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new T("argument-error",Li+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new T("argument-error",Mi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new T("missing-android-pkg-name")}}else if(void 0!==n)throw new T("argument-error",Di+" property must be a non null object when specified.");if(this.f=null,(e=t[Ri])&&"object"==typeof e){if("string"==typeof(e=e[Fi])&&e.length)this.f=e;else if(void 0!==e)throw new T("argument-error",Fi+" property must be a non empty string when specified.")}else if(void 0!==e)throw new T("argument-error",Ri+" property must be a non null object when specified.");if(void 0!==(e=t[Ci])&&"boolean"!=typeof e)throw new T("argument-error",Ci+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Oi])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new T("argument-error",Oi+" property must be a non empty string when specified.");this.i=t||null}var Di="android",Oi="dynamicLinkDomain",Ci="handleCodeInApp",Ri="iOS",Pi="url",xi="installApp",Li="minimumVersion",Mi="packageName",Fi="bundleId";function Vi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Ui=null;function ji(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Ui[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Ui){Ui={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Ui[o]&&(Ui[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,(function(t){e.push(t)})),e}function qi(t){var e=Ki(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Bi(t){try{return new qi(t)}catch(t){return null}}function Ki(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=ji(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var s=r[e++],a=((7&i)<<18|(63&o)<<12|(63&s)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(a>>10)),t[n++]=String.fromCharCode(56320+(1023&a))}else o=r[e++],s=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}return JSON.parse(t.join(""))}catch(t){}return null}qi.prototype.T=function(){return this.f},qi.prototype.l=function(){return this.c},qi.prototype.toString=function(){return this.h};var Gi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Hi=["client_id","response_type","scope","redirect_uri","state"],zi={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:Hi},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:Hi},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:Hi},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:Gi},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function Wi(t){for(var e in zi)if(zi[e].fa==t)return zi[e];return null}function $i(t){var e={};e["facebook.com"]=Zi,e["google.com"]=eo,e["github.com"]=to,e["twitter.com"]=no;var n=t&&t[Qi];try{if(n)return e[n]?new e[n](t):new Ji(t);if(void 0!==t[Xi])return new Yi(t)}catch(t){}return null}var Xi="idToken",Qi="providerId";function Yi(t){var e=t[Qi];if(!e&&t[Xi]){var n=Bi(t[Xi]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),$r(this,"providerId",e),$r(this,"isNewUser",n)}function Ji(t){Yi.call(this,t),$r(this,"profile",Yr((t=Mr(t.rawUserInfo||"{}"))||{}))}function Zi(t){if(Ji.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function to(t){if(Ji.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");$r(this,"username",this.profile&&this.profile.login||null)}function eo(t){if(Ji.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function no(t){if(Ji.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");$r(this,"username",t.screenName||null)}function ro(t){var e=Fn(t),n=Mn(e,"link"),r=Mn(Fn(n),"link");return e=Mn(e,"deep_link_id"),Mn(Fn(e),"link")||e||r||n||t}function io(t,e){if(!t&&!e)throw new T("internal-error","Internal assert: no raw session string available");if(t&&e)throw new T("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?oo:so}I(Ji,Yi),I(Zi,Ji),I(to,Ji),I(eo,Ji),I(no,Ji);var oo="enroll",so="signin";function ao(){}function uo(t,e){return t.then((function(t){if(t[Ys]){var n=Bi(t[Ys]);if(!n||e!=n.i)throw new T("user-mismatch");return t}throw new T("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==A+"user-not-found"?new T("user-mismatch"):t}))}function co(t,e){if(!e)throw new T("internal-error","failed to construct a credential");this.a=e,$r(this,"providerId",t),$r(this,"signInMethod",t)}function ho(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function lo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new co(t.providerId,t.pendingToken)}catch(t){}return null}function fo(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&$r(this,"idToken",e.idToken),e.accessToken&&$r(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&$r(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new T("internal-error","failed to construct a credential");$r(this,"accessToken",e.oauthToken),$r(this,"secret",e.oauthTokenSecret)}$r(this,"providerId",t),$r(this,"signInMethod",n)}function po(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Xn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function vo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new fo(t.providerId,e,t.signInMethod)}catch(t){}}return null}function mo(t,e){this.Qc=e||[],Xr(this,{providerId:t,isOAuthProvider:!0}),this.Ib={},this.pb=(Wi(t)||{}).Ja||null,this.ob=null}function yo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new T("argument-error",'SAML provider IDs must be prefixed with "saml."');mo.call(this,t,[])}function go(t){mo.call(this,t,Hi),this.a=[]}function bo(){go.call(this,"facebook.com")}function wo(t){if(!t)throw new T("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return d(t)&&(e=t.accessToken),(new bo).credential({accessToken:e})}function Io(){go.call(this,"github.com")}function Eo(t){if(!t)throw new T("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return d(t)&&(e=t.accessToken),(new Io).credential({accessToken:e})}function To(){go.call(this,"google.com"),this.Ca("profile")}function _o(t,e){var n=t;return d(t)&&(n=t.idToken,e=t.accessToken),(new To).credential({idToken:n,accessToken:e})}function So(){mo.call(this,"twitter.com",Gi)}function Ao(t,e){var n=t;if(d(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new T("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new fo("twitter.com",n,"twitter.com")}function No(t,e,n){this.a=t,this.f=e,$r(this,"providerId","password"),$r(this,"signInMethod",n===Do.EMAIL_LINK_SIGN_IN_METHOD?Do.EMAIL_LINK_SIGN_IN_METHOD:Do.EMAIL_PASSWORD_SIGN_IN_METHOD)}function ko(t){return t&&t.email&&t.password?new No(t.email,t.password,t.signInMethod):null}function Do(){Xr(this,{providerId:"password",isOAuthProvider:!1})}function Oo(t,e){if(!(e=Co(e)))throw new T("argument-error","Invalid email link!");return new No(t,e.code,Do.EMAIL_LINK_SIGN_IN_METHOD)}function Co(t){return(t=Ni(t=ro(t)))&&t.operation===ai?t:null}function Ro(t){if(!(t.eb&&t.cb||t.La&&t.ea))throw new T("internal-error");this.a=t,$r(this,"providerId","phone"),this.fa="phone",$r(this,"signInMethod","phone")}function Po(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return q(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Ro(e)}return null}function xo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.eb,code:t.a.cb}}function Lo(t){try{this.a=t||te.auth()}catch(t){throw new T("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Xr(this,{providerId:"phone",isOAuthProvider:!1})}function Mo(t,e){if(!t)throw new T("missing-verification-id");if(!e)throw new T("missing-verification-code");return new Ro({eb:t,cb:e})}function Fo(t){if(t.temporaryProof&&t.phoneNumber)return new Ro({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return _o(o,n);case"facebook.com":return wo(n);case"github.com":return Eo(n);case"twitter.com":return Ao(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new co(e,s):new fo(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new go(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function Vo(t){if(!t.isOAuthProvider)throw new T("invalid-oauth-provider")}function Uo(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new T("invalid-auth-event");if(this.g&&this.a)throw new T("invalid-auth-event");if(this.g&&!this.f)throw new T("invalid-auth-event")}function jo(t){return(t=t||{}).type?new Uo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&_(t.error),t.postBody,t.tenantId):null}function qo(){this.b=null,this.a=[]}io.prototype.Ha=function(){return this.a?Ne(this.a):Ne(this.b)},io.prototype.w=function(){return this.type==oo?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},ao.prototype.ka=function(){},ao.prototype.b=function(){},ao.prototype.c=function(){},ao.prototype.w=function(){},co.prototype.ka=function(t){return ba(t,ho(this))},co.prototype.b=function(t,e){var n=ho(this);return n.idToken=e,wa(t,n)},co.prototype.c=function(t,e){return uo(Ia(t,ho(this)),e)},co.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},fo.prototype.ka=function(t){return ba(t,po(this))},fo.prototype.b=function(t,e){var n=po(this);return n.idToken=e,wa(t,n)},fo.prototype.c=function(t,e){return uo(Ia(t,po(this)),e)},fo.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},mo.prototype.Ka=function(t){return this.Ib=ft(t),this},I(yo,mo),I(go,mo),go.prototype.Ca=function(t){return H(this.a,t)||this.a.push(t),this},go.prototype.Qb=function(){return X(this.a)},go.prototype.credential=function(t,e){var n;if(!(n=d(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new T("argument-error","credential failed: must provide the ID token and/or the access token.");return new fo(this.providerId,n,this.providerId)},I(bo,go),$r(bo,"PROVIDER_ID","facebook.com"),$r(bo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),I(Io,go),$r(Io,"PROVIDER_ID","github.com"),$r(Io,"GITHUB_SIGN_IN_METHOD","github.com"),I(To,go),$r(To,"PROVIDER_ID","google.com"),$r(To,"GOOGLE_SIGN_IN_METHOD","google.com"),I(So,mo),$r(So,"PROVIDER_ID","twitter.com"),$r(So,"TWITTER_SIGN_IN_METHOD","twitter.com"),No.prototype.ka=function(t){return this.signInMethod==Do.EMAIL_LINK_SIGN_IN_METHOD?nu(t,Da,{email:this.a,oobCode:this.f}):nu(t,Ya,{email:this.a,password:this.f})},No.prototype.b=function(t,e){return this.signInMethod==Do.EMAIL_LINK_SIGN_IN_METHOD?nu(t,Oa,{idToken:e,email:this.a,oobCode:this.f}):nu(t,Ka,{idToken:e,email:this.a,password:this.f})},No.prototype.c=function(t,e){return uo(this.ka(t),e)},No.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Xr(Do,{PROVIDER_ID:"password"}),Xr(Do,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Xr(Do,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Ro.prototype.ka=function(t){return t.fb(xo(this))},Ro.prototype.b=function(t,e){var n=xo(this);return n.idToken=e,nu(t,Za,n)},Ro.prototype.c=function(t,e){var n=xo(this);return n.operation="REAUTH",uo(t=nu(t,tu,n),e)},Ro.prototype.w=function(){var t={providerId:"phone"};return this.a.eb&&(t.verificationId=this.a.eb),this.a.cb&&(t.verificationCode=this.a.cb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Lo.prototype.fb=function(t,e){var n=this.a.a;return Ne(e.verify()).then((function(r){if("string"!=typeof r)throw new T("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=d(t)?t.session:null,o=d(t)?t.phoneNumber:t;return(i&&i.type==oo?i.Ha().then((function(t){return function(t,e){return nu(t,Ha,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==so?i.Ha().then((function(e){return function(t,e){return nu(t,za,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return nu(t,qa,e)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new T("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Xr(Lo,{PROVIDER_ID:"phone"}),Xr(Lo,{PHONE_SIGN_IN_METHOD:"phone"}),Uo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Uo.prototype.T=function(){return this.h},Uo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Bo,Ko=null;function Go(t){var e="unauthorized-domain",n=void 0,r=Fn(t);t=r.a,"chrome-extension"==(r=r.c)?n=jt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=jt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",T.call(this,e,n)}function Ho(t,e,n){T.call(this,t,n),(t=e||{}).Jb&&$r(this,"email",t.Jb),t.ea&&$r(this,"phoneNumber",t.ea),t.credential&&$r(this,"credential",t.credential),t.Zb&&$r(this,"tenantId",t.Zb)}function zo(t){if(t.code){var e=t.code||"";0==e.indexOf(A)&&(e=e.substring(A.length));var n={credential:Fo(t),Zb:t.tenantId};if(t.email)n.Jb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new T(e,t.message||void 0);return new Ho(e,n,t.message)}return null}function Wo(){}function $o(t){return t.c||(t.c=t.b())}function Xo(){}function Qo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Yo(){}function Jo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=b(this.qc,this),this.a.onerror=b(this.Sb,this),this.a.onprogress=b(this.rc,this),this.a.ontimeout=b(this.vc,this)}function Zo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function ts(t,e,n){this.reset(t,e,n,void 0,void 0)}function es(t){this.f=t,this.b=this.c=this.a=null}function ns(t,e){this.name=t,this.value=e}I(Go,T),I(Ho,T),Ho.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&dt(t,e),t},Ho.prototype.toJSON=function(){return this.w()},Wo.prototype.c=null,I(Xo,Wo),Xo.prototype.a=function(){var t=Qo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Xo.prototype.b=function(){var t={};return Qo(this)&&(t[0]=!0,t[1]=!0),t},Bo=new Xo,I(Yo,Wo),Yo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Jo;throw Error("Unsupported browser")},Yo.prototype.b=function(){return{}},(t=Jo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Zo(this,4)},t.Sb=function(){this.status=500,this.response=this.responseText="",Zo(this,4)},t.vc=function(){this.Sb()},t.rc=function(){this.status=200,Zo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},ts.prototype.a=null,ts.prototype.reset=function(t,e,n,r,i){delete this.a},ns.prototype.toString=function(){return this.name};var rs=new ns("SEVERE",1e3),is=new ns("WARNING",900),os=new ns("CONFIG",700),ss=new ns("FINE",500);function as(t){return t.c?t.c:t.a?as(t.a):(P("Root logger has no level set."),null)}es.prototype.log=function(t,e,n){if(t.value>=as(this).value)for(p(e)&&(e=e()),t=new ts(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var us={},cs=null;function hs(t){var e;if(cs||(cs=new es(""),us[""]=cs,cs.c=os),!(e=us[t])){e=new es(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=hs(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,us[t]=e}return e}function ls(t,e){t&&t.log(ss,e,void 0)}function fs(t){this.f=t}function ps(t){bn.call(this),this.u=t,this.h=void 0,this.readyState=ds,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=hs("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}I(fs,Wo),fs.prototype.a=function(){return new ps(this.f)},fs.prototype.b=function(t){return function(){return t}}({}),I(ps,bn);var ds=0;function vs(t){t.c.read().then(t.pc.bind(t)).catch(t.Ua.bind(t))}function ms(t){t.readyState=4,t.g=null,t.c=null,t.m=null,ys(t)}function ys(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function gs(t){bn.call(this),this.headers=new Nn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=bs,this.u=this.S=!1}(t=ps.prototype).open=function(t,e){if(this.readyState!=ds)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,ys(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Ua.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ms(this)),this.readyState=ds},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,ys(this)),this.a&&(this.readyState=3,ys(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):void 0!==s.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,vs(this)):t.text().then(this.tc.bind(this),this.Ua.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?ms(this):ys(this),3==this.readyState&&vs(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,ms(this))},t.sc=function(t){this.a&&(this.response=t,ms(this))},t.Ua=function(t){var e=this.i;e&&e.log(is,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&ms(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(is,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(is,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(ps.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),I(gs,bn);var bs="";gs.prototype.b=hs("goog.net.XhrIo");var ws=/^https?$/i,Is=["POST","PUT"];function Es(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.R=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():Bo.a(),t.C=t.D?$o(t.D):$o(Bo),t.a.onreadystatechange=b(t.Vb,t);try{ls(t.b,Cs(t,"Opening Xhr")),t.O=!0,t.a.open(n,String(e),!0),t.O=!1}catch(e){return ls(t.b,Cs(t,"Error opening Xhr: "+e.message)),void _s(t,e)}e=r||"";var o=new Nn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(f(t)||"string"==typeof t)q(t,e,void 0);else for(var n=An(t),r=Sn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=Ts,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=s.FormData&&e instanceof s.FormData,!H(Is,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{ks(t),0<t.g&&(t.u=function(t){return zt&&ie(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),ls(t.b,Cs(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=b(t.Ma,t)):t.s=Tn(t.Ma,t.g,t)),ls(t.b,Cs(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){ls(t.b,Cs(t,"Send error: "+e.message)),_s(t,e)}}function Ts(t){return"content-type"==t.toLowerCase()}function _s(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Ss(t),Ns(t)}function Ss(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function As(t){if(t.c&&void 0!==o)if(t.C[1]&&4==Ds(t)&&2==Os(t))ls(t.b,Cs(t,"Local request error detected and ignored"));else if(t.i&&4==Ds(t))Tn(t.Vb,0,t);else if(t.dispatchEvent("readystatechange"),4==Ds(t)){ls(t.b,Cs(t,"Request complete")),t.c=!1;try{var e,n=Os(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var a=String(t.l).match(On)[1]||null;if(!a&&s.self&&s.self.location){var u=s.self.location.protocol;a=u.substr(0,u.length-1)}i=!ws.test(a?a.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Ds(t)?t.a.statusText:""}catch(e){ls(t.b,"Can not get status: "+e.message),c=""}t.h=c+" ["+Os(t)+"]",Ss(t)}}finally{Ns(t)}}}function Ns(t,e){if(t.a){ks(t);var n=t.a,r=t.C[0]?h:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(rs,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function ks(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(s.clearTimeout(t.s),t.s=null)}function Ds(t){return t.a?t.a.readyState:0}function Os(t){try{return 2<Ds(t)?t.a.status:-1}catch(t){return-1}}function Cs(t,e){return e+" ["+t.R+" "+t.l+" "+Os(t)+"]"}function Rs(t){var e=Ks;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Ps(t,e,n){t.a=!0,t.c=n,t.f=!e,Fs(t)}function xs(t){if(t.a){if(!t.v)throw new Vs(t);t.v=!1}}function Ls(t,e,n,r){t.g.push([e,n,r]),t.a&&Fs(t)}function Ms(t){return G(t.g,(function(t){return p(t[1])}))}function Fs(t){if(t.h&&t.a&&Ms(t)){var e=t.h,n=qs[e];n&&(s.clearTimeout(n.a),delete qs[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var u=o.call(i||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(O(e)||"function"==typeof s.Promise&&e instanceof s.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,Ms(t)||(n=!0)}}t.c=e,r&&(u=b(t.m,t,!0),r=b(t.m,t,!1),e instanceof Rs?(Ls(e,u,r),e.C=!0):e.then(u,r)),n&&(e=new js(e),qs[e.a]=e,t.h=e.a)}function Vs(){C.call(this)}function Us(){C.call(this)}function js(t){this.a=s.setTimeout(b(this.c,this),0),this.b=t}(t=gs.prototype).Ma=function(){void 0!==o&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ls(this.b,Cs(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(ls(this.b,Cs(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ns(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Ns(this,!0)),gs.ab.Da.call(this)},t.Vb=function(){this.xa||(this.O||this.i||this.f?As(this):this.Jc())},t.Jc=function(){As(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case bs:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(rs,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return ls(this.b,"Can not get response: "+t.message),null}},Rs.prototype.cancel=function(t){if(this.a)this.c instanceof Rs&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new Us(this),xs(this),Ps(this,!1,t))}},Rs.prototype.m=function(t,e){this.i=!1,Ps(this,t,e)},Rs.prototype.then=function(t,e,n){var r,i,o=new we((function(t,e){r=t,i=e}));return Ls(this,r,(function(t){t instanceof Us?o.cancel():i(t)})),o.then(t,e,n)},Rs.prototype.$goog_Thenable=!0,I(Vs,C),Vs.prototype.message="Deferred has already fired",Vs.prototype.name="AlreadyCalledError",I(Us,C),Us.prototype.message="Deferred was canceled",Us.prototype.name="CanceledError",js.prototype.c=function(){throw delete qs[this.a],this.b};var qs={};function Bs(t){var e,n=document,r=Tt(t).toString(),i=de(document,"SCRIPT"),o={Wb:i,Ma:void 0},a=new Rs(o);return e=window.setTimeout((function(){Gs(i,!0);var t=new Ws(zs,"Timeout reached for loading script "+r);xs(a),Ps(a,!1,t)}),5e3),o.Ma=e,i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Gs(i,!1,e),xs(a),Ps(a,!0,null))},i.onerror=function(){Gs(i,!0,e);var t=new Ws(Hs,"Error while loading script "+r);xs(a),Ps(a,!1,t)},dt(o={},{type:"text/javascript",charset:"UTF-8"}),ce(i,o),function(t,e){vt(t,"HTMLScriptElement"),t.src=Tt(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=s?e=c(e.document):(null===u&&(u=c(s.document)),e=u),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function Ks(){if(this&&this.Wb){var t=this.Wb;t&&"SCRIPT"==t.tagName&&Gs(t,!0,this.Ma)}}function Gs(t,e,n){null!=n&&s.clearTimeout(n),t.onload=h,t.onerror=h,t.onreadystatechange=h,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Hs=0,zs=1;function Ws(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),C.call(this,n),this.code=t}function $s(t){this.f=t}function Xs(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Js,this.g=ft(t.secureTokenHeaders||Zs),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||ta,this.a=ft(t.firebaseHeaders||ea),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==wr(),!(n=s.XMLHttpRequest||n&&te.INTERNAL.node&&te.INTERNAL.node.XMLHttpRequest)&&!br())throw new T("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,br()?this.f=new fs(self):Ir()?this.f=new $s(n):this.f=new Yo,this.b=null}I(Ws,C),I($s,Wo),$s.prototype.a=function(){return new this.f},$s.prototype.b=function(){return{}};var Qs,Ys="idToken",Js=new jr(3e4,6e4),Zs={"Content-Type":"application/x-www-form-urlencoded"},ta=new jr(3e4,6e4),ea={"Content-Type":"application/json"};function na(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function ra(t,e){e&&(t.l=ia("https://securetoken.googleapis.com/v1/token",e),t.h=ia("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=ia("https://identitytoolkit.googleapis.com/v2/",e))}function ia(t,e){return t=Fn(t),e=Fn(e.url),t.f=t.a+t.f,Rn(t,e.c),t.a=e.a,Pn(t,e.g),t.toString()}function oa(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function sa(t,e,n,r,i,o,a){(function(){var t=Nr();return!((t=_r(t)!=Tr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||zt&&se&&!(9<se))})()||br()?t=b(t.u,t):(Qs||(Qs=new we((function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{s[ua]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Ls(t,null,e,void 0)}(Bs(_t(aa,{onload:ua})),(function(){e(Error("CORS_UNSUPPORTED"))}))}}(t,e)}))),t=b(t.s,t)),t(e,n,r,i,o,a)}Xs.prototype.T=function(){return this.b},Xs.prototype.u=function(t,e,n,r,i,o){if(br()&&(void 0===s.fetch||void 0===s.Headers||void 0===s.Request))throw new T("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new gs(this.f);if(o){a.g=Math.max(0,o);var u=setTimeout((function(){a.dispatchEvent("timeout")}),o)}wn(a,"complete",(function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return ls(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)})),In(a,"ready",(function(){u&&clearTimeout(u),Ke(this)})),In(a,"timeout",(function(){u&&clearTimeout(u),Ke(this),e&&e(null)})),Es(a,t,n,r,i)};var aa=new mt(wt,"https://apis.google.com/js/client.js?onload=%{onload}"),ua="__fcb"+Math.floor(1e6*Math.random()).toString();function ca(t,e,n,r,i,o,s){var a=Fn(e+n);Ln(a,"key",t.c),s&&Ln(a,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Ln(a,c,i[c]);return new we((function(e,n){sa(t,a.toString(),(function(t){t?t.error?n(iu(t,o||{})):e(t):n(new T("network-request-failed"))}),r,u?void 0:er(Lr(i)),t.a,t.v.get())}))}function ha(t){if("string"!=typeof(t=t.email)||!vr.test(t))throw new T("invalid-email")}function la(t){"email"in t&&ha(t)}function fa(t){if(!t[Ys]){if(t.mfaPendingCredential)throw new T("multi-factor-auth-required",null,ft(t));throw new T("internal-error")}}function pa(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new T("internal-error")}else{if(!t.sessionInfo)throw new T("missing-verification-id");if(!t.code)throw new T("missing-verification-code")}}Xs.prototype.s=function(t,e,n,r,i){var o=this;Qs.then((function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Xs.prototype.zb=function(){return nu(this,Ga,{})},Xs.prototype.Bb=function(t,e){return nu(this,Ba,{idToken:t,email:e})},Xs.prototype.Cb=function(t,e){return nu(this,Ka,{idToken:t,password:e})};var da={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function va(t){if(!t.phoneVerificationInfo)throw new T("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new T("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new T("missing-verification-code")}function ma(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new T("internal-error")}function ya(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(Yn(t=new Wn(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function ga(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=zo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=zo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=zo(t)):t.errorMessage&&(e=ru(t.errorMessage)),e)throw e;fa(t)}function ba(t,e){return e.returnIdpCredential=!0,nu(t,Wa,e)}function wa(t,e){return e.returnIdpCredential=!0,nu(t,Xa,e)}function Ia(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,nu(t,$a,e)}function Ea(t){if(!t.oobCode)throw new T("invalid-action-code")}(t=Xs.prototype).Db=function(t,e){var n={idToken:t},r=[];return ht(da,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),nu(this,Ba,n)},t.vb=function(t,e){return dt(t={requestType:"PASSWORD_RESET",email:t},e),nu(this,Fa,t)},t.wb=function(t,e){return dt(t={requestType:"EMAIL_SIGNIN",email:t},e),nu(this,xa,t)},t.ub=function(t,e){return dt(t={requestType:"VERIFY_EMAIL",idToken:t},e),nu(this,La,t)},t.Eb=function(t,e,n){return dt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),nu(this,Ma,t)},t.fb=function(t){return nu(this,Ja,t)},t.nb=function(t,e){return nu(this,ja,{oobCode:t,newPassword:e})},t.Ra=function(t){return nu(this,_a,{oobCode:t})},t.jb=function(t){return nu(this,Ta,{oobCode:t})};var Ta={endpoint:"setAccountInfo",A:Ea,Z:"email",B:!0},_a={endpoint:"resetPassword",A:Ea,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new T("internal-error")},B:!0},Sa={endpoint:"signupNewUser",A:function(t){if(ha(t),!t.password)throw new T("weak-password")},G:fa,V:!0,B:!0},Aa={endpoint:"createAuthUri",B:!0},Na={endpoint:"deleteAccount",N:["idToken"]},ka={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new T("internal-error")}},Da={endpoint:"emailLinkSignin",N:["email","oobCode"],A:ha,G:fa,V:!0,B:!0},Oa={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:ha,G:fa,V:!0},Ca={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:va,G:fa,B:!0,Na:!0},Ra={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:va,G:fa,B:!0,Na:!0},Pa={endpoint:"getAccountInfo"},xa={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new T("internal-error");ha(t)},Z:"email",B:!0},La={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new T("internal-error")},Z:"email",B:!0},Ma={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new T("internal-error")},Z:"email",B:!0},Fa={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new T("internal-error");ha(t)},Z:"email",B:!0},Va={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},Ua={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new T("internal-error")}},ja={endpoint:"resetPassword",A:Ea,Z:"email",B:!0},qa={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Ba={endpoint:"setAccountInfo",N:["idToken"],A:la,V:!0},Ka={endpoint:"setAccountInfo",N:["idToken"],A:function(t){if(la(t),!t.password)throw new T("weak-password")},G:fa,V:!0},Ga={endpoint:"signupNewUser",G:fa,V:!0,B:!0},Ha={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new T("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new T("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new T("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new T("internal-error")},B:!0,Na:!0},za={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new T("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new T("internal-error")},B:!0,Na:!0},Wa={endpoint:"verifyAssertion",A:ma,Ya:ya,G:ga,V:!0,B:!0},$a={endpoint:"verifyAssertion",A:ma,Ya:ya,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new T("user-not-found");if(t.errorMessage)throw ru(t.errorMessage);fa(t)},V:!0,B:!0},Xa={endpoint:"verifyAssertion",A:function(t){if(ma(t),!t.idToken)throw new T("internal-error")},Ya:ya,G:ga,V:!0},Qa={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new T("invalid-custom-token")},G:fa,V:!0,B:!0},Ya={endpoint:"verifyPassword",A:function(t){if(ha(t),!t.password)throw new T("wrong-password")},G:fa,V:!0,B:!0},Ja={endpoint:"verifyPhoneNumber",A:pa,G:fa,B:!0},Za={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new T("internal-error");pa(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",zo(t);fa(t)}},tu={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:pa,G:fa,B:!0},eu={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Ys]^!!t.refreshToken)throw new T("internal-error")},B:!0,Na:!0};function nu(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.N))return ke(new T("internal-error"));var r,i=!!e.Na,o=e.Ub||"POST";return Ne(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),ca(t,i?t.i:t.h,e.endpoint,o,n,e.Hb,e.lb||!1)})).then((function(t){return r=t,e.Ya?e.Ya(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new T("internal-error");return r[e.Z]}))}function ru(t){return iu({error:{errors:[{message:t}],code:400,message:t}})}function iu(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new T(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",dt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new T(r[i],e);return!e&&t&&(e=xr(t)),new T("internal-error",e)}function ou(t){this.b=t,this.a=null,this.rb=function(t){return(cu||(cu=new we((function(t,e){function n(){Ur(),kr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Ur(),e(Error("Network Error"))},timeout:au.get()})}if(kr("gapi.iframes.Iframe"))t();else if(kr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();s[r]=function(){kr("gapi.load")?n():e(Error("Network Error"))},Ne(Bs(r=_t(su,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw cu=null,t})))).then((function(){return new we((function(e,n){kr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:kr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),uu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var su=new mt(wt,"https://apis.google.com/js/api.js?onload=%{onload}"),au=new jr(3e4,6e4),uu=new jr(5e3,15e3),cu=null;function hu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,this.g?t=Vn((t=Fn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):t=Vn("https",this.l,null,"/__/auth/iframe"),this.a=t,Ln(this.a,"apiKey",this.h),Ln(this.a,"appName",this.i),this.b=null,this.c=[]}function lu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function fu(t){try{return te.app(t).auth().Ga()}catch(t){return[]}}function pu(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function du(t){var e=ur();return function(t){return nu(t,Va,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=Fn(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=Fn(o).a==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:dr.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new Go(ur())}))}function vu(t){return t.m||(t.m=mr().then((function(){if(!t.u){var e=t.c,n=t.i,r=fu(t.b),i=new hu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=X(r||[]),t.u=i.toString()}t.v=new ou(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.rb.then((function(){t.a.register("authEvent",e,kr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=jo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Ne(n)}return n.status="ERROR",Ne(n)}))}(t)}))),t.m}function mu(t){return t.l||(t.C=t.c?Ar(t.c,fu(t.b)):null,t.l=new Xs(t.g,D(t.i),t.C),t.f&&ra(t.l,t.f)),t.l}function yu(t,e,n,r,i,o,s,a,u,c,h,l){return(t=new lu(t,e,n,r,i,l)).l=o,t.g=s,t.i=a,t.b=ft(u||null),t.f=c,t.yb(h).toString()}function gu(t){if(this.a=t||te.INTERNAL.reactNative&&te.INTERNAL.reactNative.AsyncStorage,!this.a)throw new T("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function bu(t){this.b=t,this.a={},this.f=b(this.c,this)}hu.prototype.toString=function(){return this.f?Ln(this.a,"v",this.f):Qn(this.a.b,"v"),this.b?Ln(this.a,"eid",this.b):Qn(this.a.b,"eid"),this.c.length?Ln(this.a,"fw",this.c.join(",")):Qn(this.a.b,"fw"),this.a.toString()},lu.prototype.yb=function(t){return this.h=t,this},lu.prototype.toString=function(){if(this.v){var t=Fn(this.v.url);t=Vn(t.c,t.a,t.g,"/emulator/auth/handler")}else t=Vn("https",this.u,null,"/__/auth/handler");if(Ln(t,"apiKey",this.s),Ln(t,"appName",this.c),Ln(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=te.app(this.c).auth().la()}catch(t){n=null}for(var r in e.ob=n,Ln(t,"providerId",this.a.providerId),e=Lr((n=this.a).Ib))e[r]=e[r].toString();r=n.Qc,e=ft(e);for(var i=0;i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.pb&&n.ob&&!e[n.pb]&&(e[n.pb]=n.ob),lt(e)||Ln(t,"customParameters",xr(e))}if("function"==typeof this.a.Qb&&((n=this.a.Qb()).length&&Ln(t,"scopes",n.join(","))),this.l?Ln(t,"redirectUrl",this.l):Qn(t.b,"redirectUrl"),this.g?Ln(t,"eventId",this.g):Qn(t.b,"eventId"),this.i?Ln(t,"v",this.i):Qn(t.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Mn(t,s)&&Ln(t,s,this.b[s]);return this.h?Ln(t,"tid",this.h):Qn(t.b,"tid"),this.f?Ln(t,"eid",this.f):Qn(t.b,"eid"),(s=fu(this.c)).length&&Ln(t,"fw",s.join(",")),t.toString()},(t=pu.prototype).Ob=function(t,e,n){var r=new T("popup-closed-by-user"),i=new T("web-storage-unsupported"),o=this,s=!1;return this.ma().then((function(){(function(t){var e={type:"webStorageSupport"};return vu(t).then((function(){return function(t,e){return t.rb.then((function(){return new we((function(n){t.a.send(e.type,e,n,kr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.v,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&fr(t),e(i),s=!0)}))})).o((function(){})).then((function(){if(!s)return function(t){return new we((function(e){return function n(){_n(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!s)return _n(n).then((function(){e(r)}))}))},t.Xb=function(){var t=Nr();return!Pr(t)&&!Vr(t)},t.Tb=function(){return!1},t.Mb=function(t,e,n,r,i,o,s,a){if(!t)return ke(new T("popup-blocked"));if(s&&!Pr())return this.ma().o((function(e){fr(t),i(e)})),r(),Ne();this.a||(this.a=du(mu(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw fr(t),i(e),e}));return r(),e})).then((function(){(Vo(n),s)||cr(yu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,a,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Nb=function(t,e,n,r){this.a||(this.a=du(mu(this)));var i=this;return this.a.then((function(){Vo(e),cr(yu(i.s,i.g,i.b,t,e,ur(),n,i.c,void 0,i.i,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ma=function(){var t=this;return vu(this).then((function(){return t.v.rb})).o((function(){throw t.a=null,new T("network-request-failed")}))},t.$b=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Sa=function(t){W(this.h,(function(e){return e==t}))},(t=gu.prototype).get=function(t){return Ne(this.a.getItem(t)).then((function(t){return t&&Mr(t)}))},t.set=function(t,e){return Ne(this.a.setItem(t,xr(e)))},t.U=function(t){return Ne(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var wu,Iu=[];function Eu(t,e,n){lt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Tu(t){this.a=t}function _u(t){this.c=t,this.b=!1,this.a=[]}function Su(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return ke(Error("connection_unavailable"));var h=r?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new we((function(n,r){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),s=setTimeout((function(){r(Error("unsupported_event"))}),h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}},t.a.push(c),l.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[l.port2])):r(Error("connection_unavailable"))})).then((function(e){return Au(t,c),e})).o((function(e){throw Au(t,c),e}))}function Au(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),W(t.a,(function(t){return t==e}))}}function Nu(){if(!Cu())throw new T("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=s.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;br()&&self?(this.v=function(){var t=br()?self:null;if(q(Iu,(function(n){n.b==t&&(e=n)})),!e){var e=new bu(t);Iu.push(e)}return e}(),Eu(this.v,"keyChanged",(function(e,n){return Mu(t).then((function(e){return 0<e.length&&q(t.a,(function(t){t(e)})),{keyProcessed:H(e,n.key)}}))})),Eu(this.v,"ping",(function(){return Ne(["keyChanged"])}))):function(){var t=s.navigator;return t&&t.serviceWorker?Ne().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):Ne(null)}().then((function(e){(t.h=e)&&(t.g=new _u(new Tu(e)),Su(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&H(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function ku(t){return new we((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new we((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return ku(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Du(t){return t.i||(t.i=ku(t)),t.i}function Ou(t,e){var n=0;return new we((function r(i,o){Du(t).then(e).then(i).o((function(e){if(!(3<++n))return Du(t).then((function(e){return e.close(),t.i=void 0,r(i,o)})).o((function(t){o(t)}));o(e)}))}))}function Cu(){try{return!!s.indexedDB}catch(t){return!1}}function Ru(t){return t.objectStore("firebaseLocalStorage")}function Pu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function xu(t){return new we((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Lu(t,e){return t.g&&t.h&&function(){var t=s.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Su(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):Ne()}function Mu(t){return Du(t).then((function(t){var e=Ru(Pu(t,!1));return e.getAll?xu(e.getAll()):new we((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=hr(t.c,n),t.c=n}return r}))}function Fu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Vu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Ne().then((function(){if(Cu()){var t=Fr(),r="__sak"+t;return wu||(wu=new Nu),(n=wu).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){q(e.a,(function(e){e(t)}))})),t}))}function Uu(){this.a={},this.type="inMemory"}function ju(){if(!function(){var t="Node"==wr();if(!(t=qu()||t&&te.INTERNAL.node&&te.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==wr())throw new T("internal-error","The LocalStorage compatibility library was not found.");throw new T("web-storage-unsupported")}this.a=qu()||te.INTERNAL.node.localStorage,this.type="localStorage"}function qu(){try{var t=s.localStorage,e=Fr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Bu(){this.type="nullStorage"}function Ku(){if(!function(){var t="Node"==wr();if(!(t=Gu()||t&&te.INTERNAL.node&&te.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==wr())throw new T("internal-error","The SessionStorage compatibility library was not found.");throw new T("web-storage-unsupported")}this.a=Gu()||te.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Gu(){try{var t=s.sessionStorage,e=Fr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Hu(){var t={};t.Browser=$u,t.Node=Xu,t.ReactNative=Qu,t.Worker=Yu,this.a=t[wr()]}bu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];q(r,(function(e){i.push(Ne().then((function(){return e(t.origin,t.data.data)})))})),Oe(i).then((function(r){var i=[];q(r,(function(t){i.push({fulfilled:t.Pb,value:t.value,reason:t.reason?t.reason.message:void 0})})),q(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},Tu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},_u.prototype.close=function(){for(;0<this.a.length;)Au(this,this.a[0]);this.b=!0},(t=Nu.prototype).set=function(t,e){var n=this,r=!1;return Ou(this,(function(e){return xu((e=Ru(Pu(e,!0))).get(t))})).then((function(i){return Ou(n,(function(o){if(o=Ru(Pu(o,!0)),i)return i.value=e,xu(o.put(i));n.b++,r=!0;var s={};return s.fbase_key=t,s.value=e,xu(o.add(s))}))})).then((function(){return n.c[t]=e,Lu(n,t)})).oa((function(){r&&n.b--}))},t.get=function(t){return Ou(this,(function(e){return xu(Ru(Pu(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.U=function(t){var e=this,n=!1;return Ou(this,(function(r){return n=!0,e.b++,xu(Ru(Pu(r,!0)).delete(t))})).then((function(){return delete e.c[t],Lu(e,t)})).oa((function(){n&&e.b--}))},t.ca=function(t){0==this.a.length&&function(t){function e(){t.f=setTimeout((function(){t.l=Mu(t).then((function(e){0<e.length&&q(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}Fu(t),e()}(this),this.a.push(t)},t.ia=function(t){W(this.a,(function(e){return e==t})),0==this.a.length&&Fu(this)},(t=Vu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.U=function(t){return this.b.then((function(e){return e.U(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){W(this.a,(function(e){return e==t}))},(t=Uu.prototype).get=function(t){return Ne(this.a[t])},t.set=function(t,e){return this.a[t]=e,Ne()},t.U=function(t){return delete this.a[t],Ne()},t.ca=function(){},t.ia=function(){},(t=ju.prototype).get=function(t){var e=this;return Ne().then((function(){return Mr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ne().then((function(){var r=xr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Ne().then((function(){e.a.removeItem(t)}))},t.ca=function(t){s.window&&an(s.window,"storage",t)},t.ia=function(t){s.window&&hn(s.window,"storage",t)},(t=Bu.prototype).get=function(){return Ne(null)},t.set=function(){return Ne()},t.U=function(){return Ne()},t.ca=function(){},t.ia=function(){},(t=Ku.prototype).get=function(t){var e=this;return Ne().then((function(){return Mr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ne().then((function(){var r=xr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Ne().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var zu,Wu,$u={F:ju,bb:Ku},Xu={F:ju,bb:Ku},Qu={F:gu,bb:Bu},Yu={F:ju,bb:Bu},Ju={rd:"local",NONE:"none",td:"session"};function Zu(){var t=!(Vr(Nr())||!gr()),e=Pr(),n=Dr();this.m=t,this.h=e,this.l=n,this.a={},zu||(zu=new Hu),t=zu;try{this.g=!ar()&&Kr()||!s.indexedDB?new t.a.F:new Vu(br()?new Uu:new t.a.F)}catch(t){this.g=new Uu,this.h=!0}try{this.i=new t.a.bb}catch(t){this.i=new Uu}this.v=new Uu,this.f=b(this.Yb,this),this.b={}}function tc(){return Wu||(Wu=new Zu),Wu}function ec(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function nc(t,e){return"firebase:"+t.name+(e?":"+e:"")}function rc(t,e,n){return n=nc(e,n),"local"==e.F&&(t.b[n]=null),ec(t,e.F).U(n)}function ic(t){t.c&&(clearInterval(t.c),t.c=null)}function oc(t){this.a=t,this.b=tc()}(t=Zu.prototype).get=function(t,e){return ec(this,t.F).get(nc(t,e))},t.set=function(t,e,n){var r=nc(t,n),i=this,o=ec(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=nc(t,e),this.l&&(this.b[t]=s.localStorage.getItem(t)),lt(this.a)&&(ec(this,"local").ca(this.f),this.h||(ar()||!Kr())&&s.indexedDB||!this.l||function(t){ic(t),t.c=setInterval((function(){for(var e in t.a){var n=s.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Xe({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Yb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=nc(t,e),this.a[t]&&(W(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),lt(this.a)&&(ec(this,"local").ia(this.f),ic(this))},t.Yb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=s.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.mb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?ec(this,"local").ia(this.f):ic(this),this.m)if(n=s.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?s.localStorage.setItem(e,r):s.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===s.localStorage.getItem(e)||(o.b[e]=s.localStorage.getItem(e),o.mb(e))},zt&&se&&10==se&&s.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else q(t,b(this.mb,this))},t.mb=function(t){this.a[t]&&q(this.a[t],(function(t){t()}))};var sc,ac={name:"authEvent",F:"local"};function uc(){this.a=tc()}function cc(t,e){this.b=hc,this.f=s.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=s.Int32Array?new Int32Array(64):Array(64),void 0===sc&&(sc=s.Int32Array?new Int32Array(yc):yc),this.reset()}I(cc,(function(){this.b=-1}));for(var hc=64,lc=hc-1,fc=[],pc=0;pc<lc;pc++)fc[pc]=0;var dc=$(128,fc);function vc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&h^~c&l)+(0|sc[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function mc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(vc(t),i=0);else{if(!f(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(vc(t),i=0)}}t.c=i,t.g+=n}cc.prototype.reset=function(){this.g=this.c=0,this.a=s.Int32Array?new Int32Array(this.h):X(this.h)};var yc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function gc(){cc.call(this,8,bc)}I(gc,cc);var bc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function wc(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new uc,this.g=new oc(this.h),this.f=null,this.b=[],this.a=this.c=null}function Ic(t){return new T("invalid-cordova-configuration",t)}function Ec(t){var e=new gc;mc(e,t),t=[];var n=8*e.g;56>e.c?mc(e,dc,56-e.c):mc(e,dc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(vc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return K(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}function Tc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function _c(t){return t.f||(t.f=t.ma().then((function(){return new we((function(e){t.Ea((function n(r){return e(r),t.Sa(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),Sc(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=ro(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Mr(Mn(o=Fn(i),"firebaseError")||null))?_(o):null)?new Uo(r.c,r.b,null,null,o,null,r.T()):new Uo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}Tc(t,i)}))}var n=new Uo("unknown",null,null,null,new T("no-auth-event")),r=!1,i=_n(500).then((function(){return Sc(t).then((function(){r||Tc(t,n)}))})),o=s.handleOpenURL;s.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(kr("BuildInfo.packageName",s).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(t){console.error(t)}},Ko||(Ko=new qo),function(t){var e=Ko;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=kr("universalLinks.subscribe",s))&&t(null,e.b))}(e)}(t)}))}))),t.f}function Sc(t){var e=null;return function(t){return t.b.get(ac,t.a).then((function(t){return jo(t)}))}(t.g).then((function(n){return e=n,rc((n=t.g).b,ac,n.a)})).then((function(){return e}))}function Ac(t){this.a=t,this.b=tc()}(t=wc.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(yr(void 0)?mr().then((function(){return new we((function(t,e){var n=s.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):ke(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof kr("universalLinks.subscribe",s))throw Ic("cordova-universal-links-plugin-fix is not installed");if(void 0===kr("BuildInfo.packageName",s))throw Ic("cordova-plugin-buildinfo is not installed");if("function"!=typeof kr("cordova.plugins.browsertab.openUrl",s))throw Ic("cordova-plugin-browsertab is not installed");if("function"!=typeof kr("cordova.InAppBrowser.open",s))throw Ic("cordova-plugin-inappbrowser is not installed")}),(function(){throw new T("cordova-not-ready")}))},t.Ob=function(t,e){return e(new T("operation-not-supported-in-this-environment")),Ne()},t.Mb=function(){return ke(new T("operation-not-supported-in-this-environment"))},t.$b=function(){return!1},t.Xb=function(){return!0},t.Tb=function(){return!0},t.Nb=function(t,e,n,r){if(this.c)return ke(new T("redirect-operation-pending"));var i=this,o=s.document,a=null,u=null,c=null,h=null;return this.c=Ne().then((function(){return Vo(e),_c(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new Uo(e,r,null,o,new T("no-auth-event"),null,i),u=kr("BuildInfo.packageName",s);if("string"!=typeof u)throw new T("invalid-cordova-configuration");var c=kr("BuildInfo.displayName",s),h={};if(Nr().toLowerCase().match(/iphone|ipad|ipod/))h.ibi=u;else{if(!Nr().toLowerCase().match(/android/))return ke(new T("operation-not-supported-in-this-environment"));h.apn=u}c&&(h.appDisplayName=c),o=Ec(o),h.sessionId=o;var l=yu(t.v,t.i,t.l,e,n,null,r,t.m,h,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(ac,a.w(),e)})).then((function(){var e=kr("cordova.plugins.browsertab.isAvailable",s);if("function"!=typeof e)throw new T("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=kr("cordova.plugins.browsertab.openUrl",s)))throw new T("invalid-cordova-configuration");n(l)}else{if("function"!=typeof(n=kr("cordova.InAppBrowser.open",s)))throw new T("invalid-cordova-configuration");e=Nr(),t.a=n(l,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new we((function(t,e){u=function(){var e=kr("cordova.plugins.browsertab.close",s);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),c=function(){a||(a=_n(2e3).then((function(){e(new T("redirect-cancelled-by-user"))})))},h=function(){qr()&&c()},o.addEventListener("resume",c,!1),Nr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",h,!1)})).o((function(t){return Sc(i).then((function(){throw t}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),h&&o.removeEventListener("visibilitychange",h,!1),a&&a.cancel(),u&&i.Sa(u),i.c=null}))},t.Ea=function(t){this.b.push(t),_c(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Uo("unknown",null,null,null,new T("no-auth-event")),t(e))}))},t.Sa=function(t){W(this.b,(function(e){return e==t}))};var Nc={name:"pendingRedirect",F:"session"};function kc(t){return rc(t.b,Nc,t.a)}function Dc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=b(this.s,this),this.b=new Gc,this.C=new Xc,this.g=new Ac(Bc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Oc(this.D,this.v,this.m,S,this.J)}function Oc(t,e,n,r,i){var o=te.SDK_VERSION||null;return yr()?new wc(t,e,n,o,r,i):new pu(t,e,n,o,r,i)}function Cc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function Rc(t){t.a.Xb()&&Cc(t).o((function(e){var n=new Uo("unknown",null,null,null,new T("operation-not-supported-in-this-environment"));Vc(e)&&t.s(n)})),t.a.Tb()||Hc(t.b)}function Pc(t,e){H(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Nc,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?kc(t.g).then((function(){Cc(t).o((function(e){var n=new Uo("unknown",null,null,null,new T("operation-not-supported-in-this-environment"));Vc(e)&&t.s(n)}))})):Rc(t)})).o((function(){Rc(t)}))}function xc(t,e){W(t.h,(function(t){return t==e}))}Dc.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=Oc(this.D,this.v,this.m,null,this.J),this.i={}},Dc.prototype.s=function(t){if(!t)throw new T("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Fb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return Hc(this.b),e};var Lc=new jr(2e3,1e4),Mc=new jr(3e4,6e4);function Fc(t,e,n,r,i,o,s){return t.a.Mb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,s)}function Vc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Uc(t,e,n,r,i){var o;return function(t){return t.b.set(Nc,"pending",t.a)}(t.g).then((function(){return t.a.Nb(e,n,r,i).o((function(e){if(Vc(e))throw new T("operation-not-supported-in-this-environment");return o=e,kc(t.g).then((function(){throw o}))})).then((function(){return t.a.$b()?new we((function(){})):kc(t.g).then((function(){return t.qa()})).then((function(){})).o((function(){}))}))}))}function jc(t,e,n,r,i){return t.a.Ob(r,(function(t){e.na(n,null,t,i)}),Lc.get())}Dc.prototype.qa=function(){return this.b.qa()};var qc={};function Bc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Kc(t,e,n,r){var i=Bc(e,n,r);return qc[i]||(qc[i]=new Dc(t,e,n,r)),qc[i]}function Gc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Hc(t){t.g||(t.g=!0,$c(t,!1,null,null))}function zc(t){t.g&&!t.i&&$c(t,!1,null,null)}function Wc(t,e){if(t.b=function(){return Ne(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function $c(t,e,n,r){e?r?function(t,e){if(t.b=function(){return ke(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Wc(t,n):Wc(t,{user:null}),t.f=[],t.c=[]}function Xc(){}function Qc(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(t){this.ib=t},enumerable:!1})}function Yc(t,e){this.a=e,$r(this,"verificationId",t)}function Jc(t,e,n,r){return new Lo(t).fb(e,n).then((function(t){return new Yc(t,r)}))}function Zc(t){var e=Ki(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new T("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Xr(this,{token:t,expirationTime:Br(1e3*e.exp),authTime:Br(1e3*e.auth_time),issuedAtTime:Br(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function th(t,e,n){var r=e&&e[nh];if(!r)throw new T("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=ft(e),this.g=n,this.c=new io(null,r),this.b=[];var i=this;q(e[eh]||[],(function(t){(t=Zr(t))&&i.b.push(t)})),$r(this,"auth",this.a),$r(this,"session",this.c),$r(this,"hints",this.b)}Gc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Gc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?($c(this,!0,null,t.a),Ne()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,s=e.T(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then((function(e){$c(t,a,e,null)})).o((function(e){$c(t,a,null,e)}))}(this,t,e):ke(new T("invalid-auth-event")):($c(this,!1,null,null),Ne())}else ke(new T("invalid-auth-event"))},Gc.prototype.qa=function(){var t=this;return new we((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new T("timeout");t.a&&t.a.cancel(),t.a=_n(Mc.get()).then((function(){t.b||(t.g=!0,$c(t,!0,null,e))}))}(t))}))},Xc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),Ne()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then((function(t){e.na(r,t,null,n)})).o((function(t){e.na(r,null,t,n)}))}(t,e):ke(new T("invalid-auth-event"))}else ke(new T("invalid-auth-event"))},Yc.prototype.confirm=function(t){return t=Mo(this.verificationId,t),this.a(t)};var eh="mfaInfo",nh="mfaPendingCredential";function rh(t,e,n,r){T.call(this,"multi-factor-auth-required",r,e),this.b=new th(t,e,n),$r(this,"resolver",this.b)}function ih(t,e,n){if(t&&d(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new rh(e,t.serverResponse,n,t.message)}catch(t){}return null}function oh(){}function sh(t){$r(this,"factorId",t.fa),this.a=t}function ah(t){if(sh.call(this,t),this.a.fa!=Lo.PROVIDER_ID)throw new T("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function uh(t,e){for(var n in $e.call(this,t),e)this[n]=e[n]}function ch(t,e){this.a=t,this.b=[],this.c=b(this.yc,this),an(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&q(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[ni]=t.uid),t.displayName&&(r[ti]=t.displayName),t.enrollmentTime&&(r[ei]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[ri]=t.phoneNumber);try{e=new ii(r)}catch(t){}t=e}else t=null;t&&n.push(t)})),hh(this,n)}function hh(t,e){t.b=e,$r(t,"enrolledFactors",e)}function lh(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function fh(t,e){t.stop(),t.b=_n(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then((function(){return function(){var t=s.document,e=null;return qr()||!t?Ne():new we((function(n){e=function(){qr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return t.h()})).then((function(){fh(t,!0)})).o((function(e){t.i(e)&&fh(t,!1)}))}function ph(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function dh(t,e){void 0===e&&(t.b?e=(e=t.b).a-e.g:e=0),t.c=Date.now()+1e3*e}function vh(t,e){t.b=Bi(e[Ys]||""),t.a=e.refreshToken,dh(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function mh(t,e){return function(t,e){return new we((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?sa(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(iu(t)):t.access_token&&t.refresh_token?n(t):r(new T("internal-error")):r(new T("network-request-failed"))}),"POST",Xn(e).toString(),t.g,t.m.get()):r(new T("internal-error"))}))}(t.f,e).then((function(e){return t.b=Bi(e.access_token),t.a=e.refresh_token,dh(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}function yh(t,e){this.a=t||null,this.b=e||null,Xr(this,{lastSignInTime:Br(e||null),creationTime:Br(t||null)})}function gh(t,e,n,r,i,o){Xr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function bh(t,e,n){this.J=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r=te.SDK_VERSION?Ar(te.SDK_VERSION):null;this.a=new Xs(this.l,D(S),r),t.emulatorConfig&&ra(this.a,t.emulatorConfig),this.b=new ph(this.a),Nh(this,e[Ys]),vh(this.b,e),$r(this,"refreshToken",this.b.a),Oh(this,n||{}),bn.call(this),this.R=!1,this.s&&Or()&&(this.i=Kc(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=function(t){return new lh((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.b.c-Date.now()-3e5;return 0<e?e:0}))}(this),this.aa=b(this.hb,this);var i=this;this.ya=null,this.Oa=function(t){i.wa(t.h)},this.ja=null,this.Aa=function(t){ra(i.a,t.c)},this.X=null,this.$=[],this.Ba=function(t){Eh(i,t.f)},this.ba=null,this.O=new ch(this,n),$r(this,"multiFactor",this.O)}function wh(t,e){t.ja&&hn(t.ja,"languageCodeChanged",t.Oa),(t.ja=e)&&an(e,"languageCodeChanged",t.Oa)}function Ih(t,e){t.X&&hn(t.X,"emulatorConfigChanged",t.Aa),(t.X=e)&&an(e,"emulatorConfigChanged",t.Aa)}function Eh(t,e){t.$=e,oa(t.a,te.SDK_VERSION?Ar(te.SDK_VERSION,t.$):null)}function Th(t,e){t.ba&&hn(t.ba,"frameworkChanged",t.Ba),(t.ba=e)&&an(e,"frameworkChanged",t.Ba)}function _h(t){try{return te.app(t.m).auth()}catch(e){throw new T("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function Sh(t){t.D||t.u.b||(t.u.start(),hn(t,"tokenChanged",t.aa),an(t,"tokenChanged",t.aa))}function Ah(t){hn(t,"tokenChanged",t.aa),t.u.stop()}function Nh(t,e){t.za=e,$r(t,"_lat",e)}function kh(t){for(var e=[],n=0;n<t.S.length;n++)e.push(t.S[n](t));return Oe(e).then((function(){return t}))}function Dh(t){t.i&&!t.R&&(t.R=!0,Pc(t.i,t))}function Oh(t,e){Xr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new yh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Ch(){}function Rh(t){return Ne().then((function(){if(t.D)throw new T("app-deleted")}))}function Ph(t){return K(t.providerData,(function(t){return t.providerId}))}function xh(t,e){e&&(Lh(t,e.providerId),t.providerData.push(e))}function Lh(t,e){W(t.providerData,(function(t){return t.providerId==e}))}function Mh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&$r(t,e,n)}function Fh(t,e){t!=e&&(Xr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?$r(t,"metadata",function(t){return new yh(t.a,t.b)}(e.metadata)):$r(t,"metadata",new yh),q(e.providerData,(function(e){xh(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.b,e.b),$r(t,"refreshToken",t.b.a),hh(t.O,e.O.b))}function Vh(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return nu(t.a,Pa,{idToken:e}).then(b(t.Kc,t))}(t,e).then((function(){return n||Mh(t,"isAnonymous",!1),e}))}))}function Uh(t,e){e[Ys]&&t.za!=e[Ys]&&(vh(t.b,e),t.dispatchEvent(new uh("tokenChanged")),Nh(t,e[Ys]),Mh(t,"refreshToken",t.b.a))}function jh(t,e){return Vh(t).then((function(){if(H(Ph(t),e))return kh(t).then((function(){throw new T("provider-already-linked")}))}))}function qh(t,e,n){return Qr({user:t,credential:Fo(e),additionalUserInfo:e=$i(e),operationType:n})}function Bh(t,e){return Uh(t,e),t.reload().then((function(){return t}))}function Kh(t,e,n,r,i){if(!Or())return ke(new T("operation-not-supported-in-this-environment"));if(t.h&&!i)return ke(t.h);var o=Wi(n.providerId),s=Fr(t.uid+":::"),a=null;(!Pr()||gr())&&t.s&&n.isOAuthProvider&&(a=yu(t.s,t.l,t.m,e,n,null,s,te.SDK_VERSION||null,null,null,t.tenantId));var u=pr(a,o&&o.ua,o&&o.ta);return r=r().then((function(){if(Hh(t),!i)return t.I().then((function(){}))})).then((function(){return Fc(t.i,u,e,n,s,!!a,t.tenantId)})).then((function(){return new we((function(n,r){t.na(e,null,new T("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=s,t.c=jc(t.i,t,e,u,s)}))})).then((function(t){return u&&fr(u),t?Qr(t):null})).o((function(t){throw u&&fr(u),t})),zh(t,r,i)}function Gh(t,e,n,r,i){if(!Or())return ke(new T("operation-not-supported-in-this-environment"));if(t.h&&!i)return ke(t.h);var o=null,s=Fr(t.uid+":::");return r=r().then((function(){if(Hh(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=s,kh(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(Xh,t.w(),e.a)),e})).then((function(){return Uc(t.i,e,n,s,t.tenantId)})).o((function(e){if(o=e,t.ha)return Qh(t.ha);throw o})).then((function(){if(o)throw o})),zh(t,r,i)}function Hh(t){if(!t.i||!t.R){if(t.i&&!t.R)throw new T("internal-error");throw new T("auth-domain-config-required")}}function zh(t,e,n){var r=function(t,e,n){return t.h&&!n?(e.cancel(),ke(t.h)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.h||t.dispatchEvent(new uh("userInvalidated")),t.h=e),e}))}(t,e,n);return t.J.push(r),r.oa((function(){z(t.J,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=ih(e.w(),_h(t),b(t.jc,t))),n||e}))}function Wh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Ys]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new bh(e,n,t);return t.providerData&&q(t.providerData,(function(t){t&&xh(i,Qr(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function $h(t){this.a=t,this.b=tc()}th.prototype.Rc=function(t){var e=this;return t.sb(this.a.a,this.c).then((function(t){var n=ft(e.f);return delete n[eh],delete n[nh],dt(n,t),e.g(n)}))},I(rh,T),oh.prototype.sb=function(t,e,n){return e.type==oo?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),dt(n,{phoneVerificationInfo:xo(t.a)}),nu(e,Ca,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return dt(n={mfaPendingCredential:n},{phoneVerificationInfo:xo(t.a)}),nu(e,Ra,n)}))}(this,t,e)},I(sh,oh),I(ah,sh),I(uh,$e),(t=ch.prototype).yc=function(t){hh(this,function(t){var e=[];return q(t.mfaInfo||[],(function(t){(t=Zr(t))&&e.push(t)})),e}(t.hd))},t.Rb=function(){return this.a.I().then((function(t){return new io(t,null)}))},t.fc=function(t,e){var n=this,r=this.a.a;return this.Rb().then((function(n){return t.sb(r,n,e)})).then((function(t){return Uh(n.a,t),n.a.reload()}))},t.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return nu(r,eu,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=B(e.b,(function(t){return t.uid!=n}));return hh(e,r),Uh(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:K(this.b,(function(t){return t.w()}))}}},lh.prototype.start=function(){this.a=this.c,fh(this,!0)},lh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},ph.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},ph.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?ke(new T("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?mh(this,{grant_type:"refresh_token",refresh_token:this.a}):Ne(null):Ne({accessToken:this.b.toString(),refreshToken:this.a})},yh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},I(bh,bn),bh.prototype.wa=function(t){this.ya=t,na(this.a,t)},bh.prototype.la=function(){return this.ya},bh.prototype.Ga=function(){return X(this.$)},bh.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())},$r(bh.prototype,"providerId","firebase"),(t=bh.prototype).reload=function(){var t=this;return zh(this,Rh(this).then((function(){return Vh(t).then((function(){return kh(t)})).then(Ch)})))},t.oc=function(t){return this.I(t).then((function(t){return new Zc(t)}))},t.I=function(t){var e=this;return zh(this,Rh(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new T("internal-error");return t.accessToken!=e.za&&(Nh(e,t.accessToken),e.dispatchEvent(new uh("tokenChanged"))),Mh(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new T("internal-error");Oh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?K(t,(function(t){return new gh(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)xh(this,e[n]);Mh(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new uh("userReloaded",{hd:t}))},t.Lc=function(t){return zr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(t)},t.tb=function(t){var e=this,n=null;return zh(this,t.c(this.a,this.uid).then((function(t){return Uh(e,t),n=qh(e,t,"reauthenticate"),e.h=null,e.reload()})).then((function(){return n})),!0)},t.Cc=function(t){return zr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(t)},t.qb=function(t){var e=this,n=null;return zh(this,jh(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=qh(e,t,"link"),Bh(e,t)})).then((function(){return n})))},t.Dc=function(t,e){var n=this;return zh(this,jh(this,"phone").then((function(){return Jc(_h(n),t,e,b(n.qb,n))})))},t.Mc=function(t,e){var n=this;return zh(this,Ne().then((function(){return Jc(_h(n),t,e,b(n.tb,n))})),!0)},t.Bb=function(t){var e=this;return zh(this,this.I().then((function(n){return e.a.Bb(n,t)})).then((function(t){return Uh(e,t),e.reload()})))},t.ed=function(t){var e=this;return zh(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return Uh(e,t),e.reload()})))},t.Cb=function(t){var e=this;return zh(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return Uh(e,t),e.reload()})))},t.Db=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Rh(this);var e=this;return zh(this,this.I().then((function(n){return e.a.Db(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Uh(e,t),Mh(e,"displayName",t.displayName||null),Mh(e,"photoURL",t.photoUrl||null),q(e.providerData,(function(t){"password"===t.providerId&&($r(t,"displayName",e.displayName),$r(t,"photoURL",e.photoURL))})),kh(e)})).then(Ch))},t.cd=function(t){var e=this;return zh(this,Vh(this).then((function(n){return H(Ph(e),t)?function(t,e,n){return nu(t,ka,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return q(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),q(Ph(e),(function(t){n[t]||Lh(e,t)})),n[Lo.PROVIDER_ID]||$r(e,"phoneNumber",null),kh(e)})):kh(e).then((function(){throw new T("no-such-provider")}))})))},t.delete=function(){var t=this;return zh(this,this.I().then((function(e){return nu(t.a,Na,{idToken:e})})).then((function(){t.dispatchEvent(new uh("userDeleted"))}))).then((function(){for(var e=0;e<t.J.length;e++)t.J[e].cancel("app-deleted");wh(t,null),Ih(t,null),Th(t,null),t.J=[],t.D=!0,Ah(t),$r(t,"refreshToken",null),t.i&&xc(t.i,t)}))},t.Fb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?b(this.Kb,this):"reauthViaPopup"==t&&e==(this.g||null)?b(this.Lb,this):"linkViaRedirect"==t&&(this.ga||null)==e?b(this.Kb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?b(this.Lb,this):null},t.Ec=function(t){var e=this;return Kh(this,"linkViaPopup",t,(function(){return jh(e,t.providerId).then((function(){return kh(e)}))}),!1)},t.Nc=function(t){return Kh(this,"reauthViaPopup",t,(function(){return Ne()}),!0)},t.Fc=function(t){var e=this;return Gh(this,"linkViaRedirect",t,(function(){return jh(e,t.providerId)}),!1)},t.Oc=function(t){return Gh(this,"reauthViaRedirect",t,(function(){return Ne()}),!0)},t.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return zh(this,this.I().then((function(n){return wa(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=qh(i,t,"link"),Bh(i,t)})).then((function(){return o})))},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return zh(this,Ne().then((function(){return uo(Ia(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=qh(i,t,"reauthenticate"),Uh(i,t),i.h=null,i.reload()})).then((function(){return o})),!0)},t.ub=function(t){var e=this,n=null;return zh(this,this.I().then((function(e){return n=e,void 0===t||lt(t)?{}:Vi(new ki(t))})).then((function(t){return e.a.ub(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Eb=function(t,e){var n=this,r=null;return zh(this,this.I().then((function(t){return r=t,void 0===e||lt(e)?{}:Vi(new ki(e))})).then((function(e){return n.a.Eb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.jc=function(t){var e=null,n=this;return zh(this,t=uo(Ne(t),n.uid).then((function(t){return e=qh(n,t,"reauthenticate"),Uh(n,t),n.h=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&dt(t,this.metadata.w()),q(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),dt(t,this.O.w()),t};var Xh={name:"redirectUser",F:"session"};function Qh(t){return rc(t.b,Xh,t.a)}function Yh(t){this.a=t,this.b=tc(),this.c=null,this.f=function(t){var e=tl("local"),n=tl("session"),r=tl("none");return function(t,e,n){var r=nc(e,n),i=ec(t,e.F);return t.get(e,n).then((function(o){var a=null;try{a=Mr(s.localStorage.getItem(r))}catch(t){}if(a&&!o)return s.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&s.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(Zh,t.a).then((function(t){return t?tl(t):e}))}))}))})).then((function(e){return t.c=e,Jh(t,e.F)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(tl("local"),this.a,b(this.g,this))}function Jh(t,e){var n,r=[];for(n in Ju)Ju[n]!==e&&r.push(rc(t.b,tl(Ju[n]),t.a));return r.push(rc(t.b,Zh,t.a)),function(t){return new we((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},a=0;a<t.length;a++)De(t[a],w(o,a),s);else e(i)}))}(r)}Yh.prototype.g=function(){var t=this,e=tl("local");il(this,(function(){return Ne().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return Jh(t,"local").then((function(){t.c=e}))}))}))};var Zh={name:"persistence",F:"session"};function tl(t){return{name:"authUser",F:t}}function el(t,e){return il(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function nl(t){return il(t,(function(){return rc(t.b,t.c,t.a)}))}function rl(t,e,n){return il(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Wh(t||{})}))}))}function il(t,e){return t.f=t.f.then(e,e),t.f}function ol(t){if(this.l=!1,$r(this,"settings",new Qc),$r(this,"app",t),!dl(this).options||!dl(this).options.apiKey)throw new T("invalid-api-key");t=te.SDK_VERSION?Ar(te.SDK_VERSION):null,this.a=new Xs(dl(this).options&&dl(this).options.apiKey,D(S),t),this.R=[],this.s=[],this.O=[],this.hb=te.INTERNAL.createSubscribe(b(this.zc,this)),this.X=void 0,this.bc=te.INTERNAL.createSubscribe(b(this.Ac,this)),fl(this,null),this.i=new Yh(dl(this).options.apiKey+":"+dl(this).name),this.D=new $h(dl(this).options.apiKey+":"+dl(this).name),this.$=gl(this,function(t){var e=dl(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Xh,t.a).then((function(t){return t&&e&&(t.authDomain=e),Wh(t||{})}))}(t.D,dl(t).options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),Qh(t.D)}));return gl(t,e)}(t).then((function(){return rl(t.i,e,t.P)})).then((function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then((function(){return el(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:nl(t.i)}))):null})).then((function(e){fl(t,e||null)}));return gl(t,n)}(this)),this.h=gl(this,function(t){return t.$.then((function(){return hl(t)})).o((function(){})).then((function(){if(!t.l)return t.ja()})).o((function(){})).then((function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(tl("local"),e.a,t.ja)}}))}(this)),this.ba=!1,this.ja=b(this.Zc,this),this.Ba=b(this.da,this),this.ya=b(this.mc,this),this.za=b(this.wc,this),this.Aa=b(this.xc,this),this.b=null,function(t){var e=dl(t).options.authDomain,n=dl(t).options.apiKey;e&&Or()&&(t.Oa=t.$.then((function(){if(!t.l){if(t.b=Kc(e,n,dl(t).name,t.P),Pc(t.b,t),vl(t)&&Dh(vl(t)),t.m){Dh(t.m);var r=t.m;r.wa(t.la()),wh(r,t),Eh(r=t.m,t.J),Th(r,t),ra((r=t.m).a,t.P),Ih(r,t),t.m=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=b(this.delete,this),this.INTERNAL.logFramework=b(this.Gc,this),this.u=0,bn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.yb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.P){var t=Fn(this.P.url);t=Qr({protocol:t.c,host:t.a,port:t.g,options:Qr({disableWarnings:this.P.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.P=null}function sl(t){$e.call(this,"languageCodeChanged"),this.h=t}function al(t){$e.call(this,"emulatorConfigChanged"),this.c=t}function ul(t){$e.call(this,"frameworkChanged"),this.f=t}function cl(t){return t.Oa||ke(new T("auth-domain-config-required"))}function hl(t){if(!Or())return ke(new T("operation-not-supported-in-this-environment"));var e=cl(t).then((function(){return t.b.qa()})).then((function(t){return t?Qr(t):null}));return gl(t,e)}function ll(t,e){var n={};return n.apiKey=dl(t).options.apiKey,n.authDomain=dl(t).options.authDomain,n.appName=dl(t).name,t.P&&(n.emulatorConfig=t.P),t.$.then((function(){return function(t,e,n,r){var i=new bh(t,e);return n&&(i.ha=n),r&&Eh(i,r),i.reload().then((function(){return i}))}(n,e,t.D,t.Ga())})).then((function(e){return vl(t)&&e.uid==vl(t).uid?(Fh(vl(t),e),t.da(e)):(fl(t,e),Dh(e),t.da(e))})).then((function(){yl(t)}))}function fl(t,e){vl(t)&&(function(t,e){W(t.S,(function(t){return t==e}))}(vl(t),t.Ba),hn(vl(t),"tokenChanged",t.ya),hn(vl(t),"userDeleted",t.za),hn(vl(t),"userInvalidated",t.Aa),Ah(vl(t))),e&&(e.S.push(t.Ba),an(e,"tokenChanged",t.ya),an(e,"userDeleted",t.za),an(e,"userInvalidated",t.Aa),0<t.u&&Sh(e)),$r(t,"currentUser",e),e&&(e.wa(t.la()),wh(e,t),Eh(e,t.J),Th(e,t),ra(e.a,t.P),Ih(e,t))}function pl(t,e){var n=null,r=null;return gl(t,e.then((function(e){return n=Fo(e),r=$i(e),ll(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=ih(e.w(),t,b(t.kc,t))),n||e})).then((function(){return Qr({user:vl(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function dl(t){return t.app}function vl(t){return t.currentUser}function ml(t){return vl(t)&&vl(t)._lat||null}function yl(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](ml(t));if(t.X!==t.getUid()&&t.O.length)for(t.X=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](ml(t))}}function gl(t,e){return t.R.push(e),e.oa((function(){z(t.R,e)})),e}function bl(){}function wl(){this.a={},this.b=1e12}Yh.prototype.xb=function(t){var e=null,n=this;return function(t){var e=new T("invalid-persistence-type"),n=new T("unsupported-persistence-type");t:{for(r in Ju)if(Ju[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(wr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Cu()&&"none"!==t)throw n;break;default:if(!Dr()&&"none"!==t)throw n}}(t),il(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,Jh(n,t)})).then((function(){if(n.c=tl(t),e)return n.b.set(n.c,e,n.a)})):Ne()}))},I(ol,bn),I(sl,$e),I(al,$e),I(ul,$e),(t=ol.prototype).xb=function(t){return gl(this,t=this.i.xb(t))},t.wa=function(t){this.aa===t||this.l||(this.aa=t,na(this.a,this.aa),this.dispatchEvent(new sl(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=s.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.P){if(!/^https?:\/\//.test(t))throw new T("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),s.document&&!t&&mr().then((function(){var t=s.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),s.document.body.appendChild(t)}))})(e=!!e&&!!e.disableWarnings),this.P={url:t,ec:e},this.settings.ib=!0,ra(this.a,this.P),this.dispatchEvent(new al(this.P))}},t.Gc=function(t){this.J.push(t),oa(this.a,te.SDK_VERSION?Ar(te.SDK_VERSION,this.J):null),this.dispatchEvent(new ul(this.J))},t.Ga=function(){return X(this.J)},t.yb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:dl(this).options.apiKey,authDomain:dl(this).options.authDomain,appName:dl(this).name,currentUser:vl(this)&&vl(this).w()}},t.Fb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?b(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return pl(i,ba(i.a,o))}))},t.Xc=function(t){if(!Or())return ke(new T("operation-not-supported-in-this-environment"));var e=this,n=Wi(t.providerId),r=Fr(),i=null;(!Pr()||gr())&&dl(this).options.authDomain&&t.isOAuthProvider&&(i=yu(dl(this).options.authDomain,dl(this).options.apiKey,dl(this).name,"signInViaPopup",t,null,r,te.SDK_VERSION||null,null,null,this.T(),this.P));var o=pr(i,n&&n.ua,n&&n.ta);return gl(this,n=cl(this).then((function(n){return Fc(n,o,"signInViaPopup",t,r,!!i,e.T())})).then((function(){return new we((function(t,n){e.na("signInViaPopup",null,new T("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=r,e.c=jc(e.b,e,"signInViaPopup",o,r)}))})).then((function(t){return o&&fr(o),t?Qr(t):null})).o((function(t){throw o&&fr(o),t})))},t.Yc=function(t){if(!Or())return ke(new T("operation-not-supported-in-this-environment"));var e=this;return gl(this,cl(this).then((function(){return function(t){return il(t,(function(){return t.b.set(Zh,t.c.F,t.a)}))}(e.i)})).then((function(){return Uc(e.b,"signInViaRedirect",t,void 0,e.T())})))},t.qa=function(){var t=this;return hl(this).then((function(e){return t.b&&zc(t.b.b),e})).o((function(e){throw t.b&&zc(t.b.b),e}))},t.dd=function(t){if(!t)return ke(new T("null-user"));if(this.S!=t.tenantId)return ke(new T("tenant-id-mismatch"));var e=this,n={};n.apiKey=dl(this).options.apiKey,n.authDomain=dl(this).options.authDomain,n.appName=dl(this).name;var r=function(t,e,n,r){var i=t.b,o={};return o[Ys]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new bh(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&Eh(e,r),Fh(e,t),e}(t,n,e.D,e.Ga());return gl(this,this.h.then((function(){if(dl(e).options.apiKey!=t.l)return r.reload()})).then((function(){return vl(e)&&t.uid==vl(e).uid?(Fh(vl(e),t),e.da(t)):(fl(e,r),Dh(r),e.da(r))})).then((function(){yl(e)})))},t.Ab=function(){var t=this;return gl(this,this.h.then((function(){return t.b&&zc(t.b.b),vl(t)?(fl(t,null),nl(t.i).then((function(){yl(t)}))):Ne()})))},t.Zc=function(){var t=this;return rl(this.i,dl(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=vl(t)&&e){n=vl(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Fh(vl(t),e),vl(t).I();(vl(t)||e)&&(fl(t,e),e&&(Dh(e),e.ha=t.D),t.b&&Pc(t.b,t),yl(t))}}))},t.da=function(t){return el(this.i,t)},t.mc=function(){yl(this),this.da(vl(this))},t.wc=function(){this.Ab()},t.xc=function(){this.Ab()},t.kc=function(t){var e=this;return this.h.then((function(){return pl(e,Ne(t))}))},t.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(vl(e))}))},t.Ac=function(t){var e=this;!function(t,e){t.O.push(e),gl(t,t.h.then((function(){!t.l&&H(t.O,e)&&t.X!==t.getUid()&&(t.X=t.getUid(),e(ml(t)))})))}(this,(function(){t.next(vl(e))}))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof t?t(vl(r)):"function"==typeof t.next&&t.next(vl(r))})),this.hb(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.X=r.getUid(),"function"==typeof t?t(vl(r)):"function"==typeof t.next&&t.next(vl(r))})),this.bc(t,e,n)},t.nc=function(t){var e=this;return gl(this,this.h.then((function(){return vl(e)?vl(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Tc=function(t){var e=this;return this.h.then((function(){return pl(e,nu(e.a,Qa,{token:t}))})).then((function(t){var n=t.user;return Mh(n,"isAnonymous",!1),e.da(n),t}))},t.Uc=function(t,e){var n=this;return this.h.then((function(){return pl(n,nu(n.a,Ya,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.h.then((function(){return pl(n,nu(n.a,Sa,{email:t,password:e}))}))},t.$a=function(t){var e=this;return this.h.then((function(){return pl(e,t.ka(e.a))}))},t.Sc=function(t){return zr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(t)},t.zb=function(){var t=this;return this.h.then((function(){var e=vl(t);if(e&&e.isAnonymous){var n=Qr({providerId:null,isNewUser:!1});return Qr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return pl(t,t.a.zb()).then((function(e){var n=e.user;return Mh(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return vl(this)&&vl(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&vl(this)&&Sh(vl(this))},t.Pc=function(t){var e=this;q(this.s,(function(n){n==t&&e.u--})),0>this.u&&(this.u=0),0==this.u&&vl(this)&&Ah(vl(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),gl(this,this.h.then((function(){e.l||H(e.s,t)&&t(ml(e))})))},t.removeAuthTokenListener=function(t){W(this.s,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.i&&(t=this.i).b.removeListener(tl("local"),t.a,this.ja),this.b&&(xc(this.b,this),zc(this.b.b)),Promise.resolve()},t.hc=function(t){return gl(this,function(t,e){return nu(t,Aa,{identifier:e,continueUri:Cr()?ur():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},t.Bc=function(t){return!!Co(t)},t.wb=function(t,e){var n=this;return gl(this,Ne().then((function(){var t=new ki(e);if(!t.c)throw new T("argument-error",Ci+" must be true when sending sign in link to email");return Vi(t)})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},t.jd=function(t){return this.Ra(t).then((function(t){return t.data.email}))},t.nb=function(t,e){return gl(this,this.a.nb(t,e).then((function(){})))},t.Ra=function(t){return gl(this,this.a.Ra(t).then((function(t){return new oi(t)})))},t.jb=function(t){return gl(this,this.a.jb(t).then((function(){})))},t.vb=function(t,e){var n=this;return gl(this,Ne().then((function(){return void 0===e||lt(e)?{}:Vi(new ki(e))})).then((function(e){return n.a.vb(t,e)})).then((function(){})))},t.Wc=function(t,e){return gl(this,Jc(this,t,e,b(this.$a,this)))},t.Vc=function(t,e){var n=this;return gl(this,Ne().then((function(){var r=e||ur(),i=Oo(t,r);if(!(r=Co(r)))throw new T("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new T("tenant-id-mismatch");return n.$a(i)})))},bl.prototype.render=function(){},bl.prototype.reset=function(){},bl.prototype.getResponse=function(){},bl.prototype.execute=function(){};var Il=null;function El(t,e){return(e=Tl(e))&&t.a[e]||null}function Tl(t){return(t=void 0===t?1e12:t)?t.toString():null}function _l(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ue(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():an(this.f,"click",this.i)}function Sl(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Al(){}function Nl(){}wl.prototype.render=function(t,e){return this.a[this.b.toString()]=new _l(t,e),this.b++},wl.prototype.reset=function(t){var e=El(this,t);t=Tl(t),e&&t&&(e.delete(),delete this.a[t])},wl.prototype.getResponse=function(t){return(t=El(this,t))?t.getResponse():null},wl.prototype.execute=function(t){(t=El(this,t))&&t.execute()},_l.prototype.getResponse=function(){return Sl(this),this.b},_l.prototype.execute=function(){Sl(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(t){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.h&&t.execute()}),6e4)}),500))},_l.prototype.delete=function(){Sl(this),this.g=!0,clearTimeout(this.a),this.a=null,hn(this.f,"click",this.i)},$r(Al,"FACTOR_ID","phone"),Nl.prototype.g=function(){return Il||(Il=new wl),Ne(Il)},Nl.prototype.c=function(){};var kl=null;function Dl(){this.b=s.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Ol=new mt(wt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Cl=new jr(3e4,6e4);Dl.prototype.g=function(t){var e=this;return new we((function(n,r){var i=setTimeout((function(){r(new T("network-request-failed"))}),Cl.get());!s.grecaptcha||t!==e.f&&!e.b?(s[e.a]=function(){if(s.grecaptcha){e.f=t;var o=s.grecaptcha.render;s.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(s.grecaptcha)}else clearTimeout(i),r(new T("internal-error"));delete s[e.a]},Ne(Bs(_t(Ol,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new T("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(s.grecaptcha))}))},Dl.prototype.c=function(){this.b--};var Rl=null;function Pl(t,e,n,r,i,o,a){if($r(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=e,this.g=null,a?(kl||(kl=new Nl),a=kl):(Rl||(Rl=new Dl),a=Rl),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Ml])throw new T("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Fl],!s.document)throw new T("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ue(e)||!this.i&&ue(e).hasChildNodes())throw new T("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Xs(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[xl];this.a[xl]=function(t){if(Vl(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=kr(c,s);"function"==typeof e&&e(t)}};var h=this.a[Ll];this.a[Ll]=function(){if(Vl(u,null),"function"==typeof h)h();else if("string"==typeof h){var t=kr(h,s);"function"==typeof t&&t()}}}var xl="callback",Ll="expired-callback",Ml="sitekey",Fl="size";function Vl(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function Ul(t,e){return t.h.push(e),e.oa((function(){z(t.h,e)})),e}function jl(t){if(t.D)throw new T("internal-error","RecaptchaVerifier instance has been destroyed.")}function ql(t,e,n){var r=!1;try{this.b=n||te.app()}catch(t){throw new T("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new T("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=te.SDK_VERSION?Ar(te.SDK_VERSION,o):null,Pl.call(this,n,t,e,(function(){try{var t=i.b.auth().la()}catch(e){t=null}return t}),o,D(S),r)}function Bl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new T("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Kl.length)throw new T("internal-error","Argument validator received an unsupported number of arguments.");n=Kl[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new T("argument-error",t+" failed: "+r)}(t=Pl.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Ul(this,Ne().then((function(){if(Cr()&&!br())return mr();throw new T("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,nu(t.s,Ua,{})})).then((function(e){t.a[Ml]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},t.render=function(){jl(this);var t=this;return Ul(this,this.Ia().then((function(){if(null===t.c){var e=t.v;if(!t.i){var n=ue(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!ae&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',qt(s.name),'"'),s.type){o.push(' type="',qt(s.type),'"');var a={};dt(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=de(i,o),s&&("string"==typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):ce(o,s)),2<r.length&&pe(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){jl(this);var t=this;return Ul(this,this.render().then((function(e){return new we((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){W(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){jl(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){jl(this),this.D=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=ue(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},I(ql,Pl);var Kl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Gl(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function Hl(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function zl(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:d}}function Wl(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function $l(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function Xl(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function Ql(t,e){return d(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Yl(t){return d(t)&&"string"==typeof t.uid}function Jl(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function Zl(t,e){for(var n in e){var r=e[n].name;t[r]=nf(r,t[n],e[n].j)}}function tf(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:w((function(t){return this[t]}),n),set:w((function(t,e,n,r){Bl(t,[n],[r],!0),this[e]=r}),r,n,e[n].kb),enumerable:!0})}}function ef(t,e,n,r){t[e]=nf(e,n,r)}function nf(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Bl(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Zl(ol.prototype,{jb:{name:"applyActionCode",j:[Gl("code")]},Ra:{name:"checkActionCode",j:[Gl("code")]},nb:{name:"confirmPasswordReset",j:[Gl("code"),Gl("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Gl("email"),Gl("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Gl("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Gl("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Jl(zl(),Wl(),"nextOrObserver"),Wl("opt_error",!0),Wl("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Jl(zl(),Wl(),"nextOrObserver"),Wl("opt_error",!0),Wl("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[Gl("email"),Jl(zl("opt_actionCodeSettings",!0),$l(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[Gl("email"),zl("actionCodeSettings")]},xb:{name:"setPersistence",j:[Gl("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Xl()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[Xl()]},Tc:{name:"signInWithCustomToken",j:[Gl("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Gl("email"),Gl("password")]},Vc:{name:"signInWithEmailLink",j:[Gl("email"),Gl("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Gl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[Jl({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof bh)}},$l(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Gl(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Gl("url"),zl("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Gl("code")]}}),tf(ol.prototype,{lc:{name:"languageCode",kb:Jl(Gl(),$l(),"languageCode")},ti:{name:"tenantId",kb:Jl(Gl(),$l(),"tenantId")}}),ol.Persistence=Ju,ol.Persistence.LOCAL="local",ol.Persistence.SESSION="session",ol.Persistence.NONE="none",Zl(bh.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Hl("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Hl("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Xl()]},qb:{name:"linkWithCredential",j:[Xl()]},Dc:{name:"linkWithPhoneNumber",j:[Gl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Xl()]},tb:{name:"reauthenticateWithCredential",j:[Xl()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Gl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[Jl(zl("opt_actionCodeSettings",!0),$l(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Gl(null,!0)]},cd:{name:"unlink",j:[Gl("provider")]},Bb:{name:"updateEmail",j:[Gl("email")]},Cb:{name:"updatePassword",j:[Gl("password")]},ed:{name:"updatePhoneNumber",j:[Xl("phone")]},Db:{name:"updateProfile",j:[zl("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[Gl("email"),Jl(zl("opt_actionCodeSettings",!0),$l(null,!0),"opt_actionCodeSettings",!0)]}}),Zl(wl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Zl(bl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Zl(we.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),tf(Qc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:Hl("appVerificationDisabledForTesting")}}),Zl(Yc.prototype,{confirm:{name:"confirm",j:[Gl("verificationCode")]}}),ef(ao,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[vo,ko,Po,lo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[Jl(Gl(),zl(),"json")]),ef(Do,"credential",(function(t,e){return new No(t,e)}),[Gl("email"),Gl("password")]),Zl(No.prototype,{w:{name:"toJSON",j:[Gl(null,!0)]}}),Zl(bo.prototype,{Ca:{name:"addScope",j:[Gl("scope")]},Ka:{name:"setCustomParameters",j:[zl("customOAuthParameters")]}}),ef(bo,"credential",wo,[Jl(Gl(),zl(),"token")]),ef(Do,"credentialWithLink",Oo,[Gl("email"),Gl("emailLink")]),Zl(Io.prototype,{Ca:{name:"addScope",j:[Gl("scope")]},Ka:{name:"setCustomParameters",j:[zl("customOAuthParameters")]}}),ef(Io,"credential",Eo,[Jl(Gl(),zl(),"token")]),Zl(To.prototype,{Ca:{name:"addScope",j:[Gl("scope")]},Ka:{name:"setCustomParameters",j:[zl("customOAuthParameters")]}}),ef(To,"credential",_o,[Jl(Gl(),Jl(zl(),$l()),"idToken"),Jl(Gl(),$l(),"accessToken",!0)]),Zl(So.prototype,{Ka:{name:"setCustomParameters",j:[zl("customOAuthParameters")]}}),ef(So,"credential",Ao,[Jl(Gl(),zl(),"token"),Gl("secret",!0)]),Zl(go.prototype,{Ca:{name:"addScope",j:[Gl("scope")]},credential:{name:"credential",j:[Jl(Gl(),Jl(zl(),$l()),"optionsOrIdToken"),Jl(Gl(),$l(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[zl("customOAuthParameters")]}}),Zl(fo.prototype,{w:{name:"toJSON",j:[Gl(null,!0)]}}),Zl(co.prototype,{w:{name:"toJSON",j:[Gl(null,!0)]}}),ef(Lo,"credential",Mo,[Gl("verificationId"),Gl("verificationCode")]),Zl(Lo.prototype,{fb:{name:"verifyPhoneNumber",j:[Jl(Gl(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?Ql(t.session,oo)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Ql(t.session,so)&&Yl(t.multiFactorHint):t.session&&t.multiFactorUid?Ql(t.session,so)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),Zl(Ro.prototype,{w:{name:"toJSON",j:[Gl(null,!0)]}}),Zl(T.prototype,{toJSON:{name:"toJSON",j:[Gl(null,!0)]}}),Zl(Ho.prototype,{toJSON:{name:"toJSON",j:[Gl(null,!0)]}}),Zl(Go.prototype,{toJSON:{name:"toJSON",j:[Gl(null,!0)]}}),Zl(rh.prototype,{toJSON:{name:"toJSON",j:[Gl(null,!0)]}}),Zl(th.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}}]}}),Zl(ch.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}},Gl("displayName",!0)]},bd:{name:"unenroll",j:[Jl({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Yl},Gl(),"multiFactorInfoIdentifier")]}}),Zl(ql.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),ef(bi,"parseLink",Ni,[Gl("link")]),ef(Al,"assertion",(function(t){return new ah(t)}),[Xl("phone")]),function(){if(void 0===te||!te.INTERNAL||!te.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ai,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:si,VERIFY_AND_CHANGE_EMAIL:ui,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:ol,AuthCredential:ao,Error:T};ef(t,"EmailAuthProvider",Do,[]),ef(t,"FacebookAuthProvider",bo,[]),ef(t,"GithubAuthProvider",Io,[]),ef(t,"GoogleAuthProvider",To,[]),ef(t,"TwitterAuthProvider",So,[]),ef(t,"OAuthProvider",go,[Gl("providerId")]),ef(t,"SAMLAuthProvider",yo,[Gl("providerId")]),ef(t,"PhoneAuthProvider",Lo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof ol)}}]),ef(t,"RecaptchaVerifier",ql,[Jl(Gl(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),zl("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof te.app.App)}}]),ef(t,"ActionCodeURL",bi,[]),ef(t,"PhoneMultiFactorGenerator",Al,[]),te.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new ol(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),te.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:b((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:b(t.nc,t),addAuthTokenListener:b(t.cc,t),removeAuthTokenListener:b(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),te.registerVersion("@firebase/auth","0.16.5"),te.INTERNAL.extendNamespace({User:bh})}()}.apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var ee=function(t,e){return(ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function ne(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var re,ie="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},oe=oe||{},se=ie||self;function ae(){}function ue(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function ce(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var he="closure_uid_"+(1e9*Math.random()>>>0),le=0;function fe(t,e,n){return t.call.apply(t.bind,arguments)}function pe(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function de(t,e,n){return(de=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?fe:pe).apply(null,arguments)}function ve(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function me(){return Date.now()}function ye(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function ge(){this.j=this.j,this.i=this.i}ge.prototype.j=!1,ge.prototype.ja=function(){var t;!this.j&&(this.j=!0,this.G(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,he)&&t[he]||(t[he]=++le))},ge.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var be=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},we=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Ie(t){return Array.prototype.concat.apply([],arguments)}function Ee(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Te(t){return/^[\s\xa0]*$/.test(t)}var _e,Se=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Ae(t,e){return-1!=t.indexOf(e)}function Ne(t,e){return t<e?-1:t>e?1:0}t:{var ke=se.navigator;if(ke){var De=ke.userAgent;if(De){_e=De;break t}}_e=""}function Oe(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Ce(t){var e={};for(var n in t)e[n]=t[n];return e}var Re="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Pe(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Re.length;o++)n=Re[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function xe(t){return xe[" "](t),t}xe[" "]=ae;var Le,Me,Fe=Ae(_e,"Opera"),Ve=Ae(_e,"Trident")||Ae(_e,"MSIE"),Ue=Ae(_e,"Edge"),je=Ue||Ve,qe=Ae(_e,"Gecko")&&!(Ae(_e.toLowerCase(),"webkit")&&!Ae(_e,"Edge"))&&!(Ae(_e,"Trident")||Ae(_e,"MSIE"))&&!Ae(_e,"Edge"),Be=Ae(_e.toLowerCase(),"webkit")&&!Ae(_e,"Edge");function Ke(){var t=se.document;return t?t.documentMode:void 0}t:{var Ge="",He=(Me=_e,qe?/rv:([^\);]+)(\)|;)/.exec(Me):Ue?/Edge\/([\d\.]+)/.exec(Me):Ve?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Me):Be?/WebKit\/(\S+)/.exec(Me):Fe?/(?:Version)[ \/]?(\S+)/.exec(Me):void 0);if(He&&(Ge=He?He[1]:""),Ve){var ze=Ke();if(null!=ze&&ze>parseFloat(Ge)){Le=String(ze);break t}}Le=Ge}var We,$e={};function Xe(t){return function(t,e){var n=$e;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=Se(String(Le)).split("."),r=Se(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=Ne(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||Ne(0==s[2].length,0==a[2].length)||Ne(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}if(se.document&&Ve){var Qe=Ke();We=Qe||(parseInt(Le,10)||void 0)}else We=void 0;var Ye=We,Je=!Ve||9<=Number(Ye),Ze=Ve&&!Xe("9"),tn=function(){if(!se.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{se.addEventListener("test",ae,e),se.removeEventListener("test",ae,e)}catch(t){}return t}();function en(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function nn(t,e){if(en.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(qe){t:{try{xe(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:rn[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}en.prototype.b=function(){this.defaultPrevented=!0},ye(nn,en);var rn={2:"touch",3:"pen",4:"mouse"};nn.prototype.b=function(){nn.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ze)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var on="closure_listenable_"+(1e6*Math.random()|0),sn=0;function an(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++sn,this.Y=this.Z=!1}function un(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function cn(t){this.src=t,this.a={},this.b=0}function hn(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=be(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(un(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function ln(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}cn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=ln(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new an(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var fn="closure_lm_"+(1e6*Math.random()|0),pn={};function dn(t,e,n,r,i){if(r&&r.once)return mn(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)dn(t,e[o],n,r,i);return null}return n=_n(n),t&&t[on]?t.va(e,n,ce(r)?!!r.capture:!!r,i):vn(t,e,n,!1,r,i)}function vn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=ce(i)?!!i.capture:!!i;if(s&&!Je)return null;var a=En(t);if(a||(t[fn]=a=new cn(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=In,e=Je?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)tn||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(bn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function mn(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)mn(t,e[o],n,r,i);return null}return n=_n(n),t&&t[on]?t.wa(e,n,ce(r)?!!r.capture:!!r,i):vn(t,e,n,!0,r,i)}function yn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)yn(t,e[o],n,r,i);else r=ce(r)?!!r.capture:!!r,n=_n(n),t&&t[on]?(t=t.c,(e=String(e).toString())in t.a&&(-1<(n=ln(o=t.a[e],n,r,i))&&(un(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=En(t))&&(e=t.a[e.toString()],t=-1,e&&(t=ln(e,n,r,i)),(n=-1<t?e[t]:null)&&gn(n))}function gn(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[on])hn(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(bn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=En(e))?(hn(n,t),0==n.b&&(n.src=null,e[fn]=null)):un(t)}}}function bn(t){return t in pn?pn[t]:pn[t]="on"+t}function wn(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&gn(t),n.call(r,e)}function In(t,e){if(t.Y)return!0;if(!Je){if(!e)t:{e=["window","event"];for(var n=se,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return wn(t,e=new nn(e,this))}return wn(t,new nn(e,this))}function En(t){return(t=t[fn])instanceof cn?t:null}var Tn="__closure_events_fn_"+(1e9*Math.random()>>>0);function _n(t){return"function"==typeof t?t:(t[Tn]||(t[Tn]=function(e){return t.handleEvent(e)}),t[Tn])}function Sn(){ge.call(this),this.c=new cn(this),this.J=this,this.C=null}function An(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new en(e,t);else if(e instanceof en)e.target=e.target||t;else{var i=e;Pe(e=new en(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=Nn(s,r,!0,e)&&i}if(i=Nn(s=e.a=t,r,!0,e)&&i,i=Nn(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Nn(s=e.a=n[o],r,!1,e)&&i}function Nn(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&hn(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}ye(Sn,ge),Sn.prototype[on]=!0,(re=Sn.prototype).addEventListener=function(t,e,n,r){dn(this,t,e,n,r)},re.removeEventListener=function(t,e,n,r){yn(this,t,e,n,r)},re.G=function(){if(Sn.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)un(n[r]);delete e.a[t],e.b--}}this.C=null},re.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},re.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var kn=se.JSON.stringify;function Dn(){this.b=this.a=null}var On,Cn=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new Pn}),(function(t){t.reset()}));function Rn(){var t=Fn,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Pn(){this.next=this.b=this.a=null}function xn(t){se.setTimeout((function(){throw t}),0)}function Ln(t,e){On||function(){var t=se.Promise.resolve(void 0);On=function(){t.then(Vn)}}(),Mn||(On(),Mn=!0),Fn.add(t,e)}Dn.prototype.add=function(t,e){var n=Cn.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Pn.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Pn.prototype.reset=function(){this.next=this.b=this.a=null};var Mn=!1,Fn=new Dn;function Vn(){for(var t;t=Rn();){try{t.a.call(t.b)}catch(t){xn(t)}var e=Cn;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Mn=!1}function Un(t,e){Sn.call(this),this.b=t||1,this.a=e||se,this.f=de(this.Za,this),this.g=me()}function jn(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function qn(t,e,n){if("function"==typeof t)n&&(t=de(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=de(t.handleEvent,t)}return 2147483647<Number(e)?-1:se.setTimeout(t,e||0)}function Bn(t){t.a=qn((function(){t.a=null,t.c&&(t.c=!1,Bn(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}ye(Un,Sn),(re=Un.prototype).aa=!1,re.M=null,re.Za=function(){if(this.aa){var t=me()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),An(this,"tick"),this.aa&&(jn(this),this.start()))}},re.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=me())},re.G=function(){Un.X.G.call(this),jn(this),delete this.a};var Kn=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}ee(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Bn(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(se.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(ge);function Gn(t){ge.call(this),this.b=t,this.a={}}ye(Gn,ge);var Hn=[];function zn(t,e,n,r){Array.isArray(n)||(n&&(Hn[0]=n.toString()),n=Hn);for(var i=0;i<n.length;i++){var o=dn(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Wn(t){Oe(t.a,(function(t,e){this.a.hasOwnProperty(e)&&gn(t)}),t),t.a={}}function $n(){this.a=!0}function Xn(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return kn(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}Gn.prototype.G=function(){Gn.X.G.call(this),Wn(this)},Gn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},$n.prototype.info=function(){};var Qn={},Yn=null;function Jn(){return Yn=Yn||new Sn}function Zn(t){en.call(this,Qn.Fa,t)}function tr(t){var e=Jn();An(e,new Zn(e,t))}function er(t,e){en.call(this,Qn.STAT_EVENT,t),this.stat=e}function nr(t){var e=Jn();An(e,new er(e,t))}function rr(t){en.call(this,Qn.Ga,t)}function ir(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return se.setTimeout((function(){t()}),e)}Qn.Fa="serverreachability",ye(Zn,en),Qn.STAT_EVENT="statevent",ye(er,en),Qn.Ga="timingevent",ye(rr,en);var or={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},sr={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function ar(){}function ur(t){var e;return(e=t.a)||(e=t.a={}),e}function cr(){}ar.prototype.a=null;var hr,lr={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function fr(){en.call(this,"d")}function pr(){en.call(this,"c")}function dr(){}function vr(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Gn(this),this.P=mr,t=je?125:void 0,this.R=new Un(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}ye(fr,en),ye(pr,en),ye(dr,ar),hr=new dr;var mr=45e3,yr={},gr={};function br(t,e,n){t.H=1,t.i=qr(Lr(e)),t.j=n,t.I=!0,wr(t,null)}function wr(t,e){t.u=me(),Tr(t),t.l=Lr(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),ti(n.b,"t",r),t.D=0,t.a=$i(t.g,t.g.C?e:null),0<t.O&&(t.F=new Kn(de(t.Ca,t,t.a),t.O)),zn(t.J,t.a,"readystatechange",t.Xa),e=t.B?Ce(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),tr(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var h=c[0];c=c[1];var l=h.split("_");s=2<=l.length&&"type"==l[1]?s+(h+"=")+c+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function Ir(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Er(t,n);if(i==gr){4==e&&(t.h=4,nr(14),r=!1),Xn(t.c,t.f,null,"[Incomplete Response]");break}if(i==yr){t.h=4,nr(15),Xn(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Xn(t.c,t.f,i,null),kr(t,i)}4==e&&0==n.length&&(t.h=1,nr(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),ji(e),e.F=!0,nr(11))):(Xn(t.c,t.f,n,"[Invalid Chunked Response]"),Nr(t),Ar(t))}function Er(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?gr:(n=Number(e.substring(n,r)),isNaN(n)?yr:(r+=1)+n>e.length?gr:(e=e.substr(r,n),t.D=r+n,e))}function Tr(t){t.T=me()+t.P,_r(t,t.P)}function _r(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=ir(de(t.Va,t),e)}function Sr(t){t.o&&(se.clearTimeout(t.o),t.o=null)}function Ar(t){0==t.g.v||t.A||Ki(t.g,t)}function Nr(t){Sr(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,jn(t.R),Wn(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function kr(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||ai(n.b,t)))if(n.I=t.N,!t.C&&ai(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Bi(n),Ci(n)}Ui(n),nr(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=ir(de(n.Sa,n),6e3));if(1>=si(n.b)&&n.ea){try{n.ea()}catch(t){}n.ea=void 0}}else Hi(n,11)}else if((t.C||n.a==t)&&Bi(n),!Te(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var h=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var l=u.b;!l.a&&(Ae(h,"spdy")||Ae(h,"quic")||Ae(h,"h2"))&&(l.f=l.g,l.a=new Set,l.b&&(ui(l,l.b),l.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,jr(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=me()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((u=n).la=Wi(u,u.C?u.ga:null,u.fa),p.C){ci(u.b,p);var d=p,v=u.D;v&&d.setTimeout(v),d.o&&(Sr(d),Tr(d)),u.a=p}else Vi(u);0<n.g.length&&xi(n)}else"stop"!=i[0]&&"close"!=i[0]||Hi(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Hi(n,7):Oi(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);tr(4)}catch(t){}}function Dr(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(ue(t)||"string"==typeof t)we(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(ue(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(ue(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Or(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Or)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Cr(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Rr(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Rr(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Rr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(re=vr.prototype).setTimeout=function(t){this.P=t},re.Xa=function(t){t=t.target;var e=this.F;e&&3==Ai(t)?e.f():this.Ca(t)},re.Ca=function(t){try{if(t==this.a)t:{var e=Ai(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!je&&!this.a.$())){this.A||4!=e||7==n||tr(8==n||0>=r?3:2),Sr(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Te(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,nr(12),Nr(this),Ar(this);break t}Xn(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,kr(this,u)}this.I?(Ir(this,e,o),je&&this.b&&3==e&&(zn(this.J,this.R,"tick",this.Wa),this.R.start())):(Xn(this.c,this.f,o,null),kr(this,o)),4==e&&Nr(this),this.b&&!this.A&&(4==e?Ki(this.g,this):(this.b=!1,Tr(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,nr(12)):(this.h=0,nr(13)),Nr(this),Ar(this)}}}catch(t){}},re.Wa=function(){if(this.a){var t=Ai(this.a),e=this.a.$();this.D<e.length&&(Sr(this),Ir(this,t,e),this.b&&4!=t&&Tr(this))}},re.cancel=function(){this.A=!0,Nr(this)},re.Va=function(){this.o=null;var t=me();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(tr(3),nr(17)),Nr(this),this.h=2,Ar(this)):_r(this,this.T-t)},(re=Or.prototype).K=function(){Cr(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},re.L=function(){return Cr(this),this.a.concat()},re.get=function(t,e){return Rr(this.b,t)?this.b[t]:e},re.set=function(t,e){Rr(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},re.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Pr=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function xr(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof xr){this.a=void 0!==e?e:t.a,Mr(this,t.f),this.j=t.j,Fr(this,t.c),Vr(this,t.h),this.g=t.g,e=t.b;var n=new Qr;n.c=e.c,e.a&&(n.a=new Or(e.a),n.b=e.b),Ur(this,n),this.i=t.i}else t&&(n=String(t).match(Pr))?(this.a=!!e,Mr(this,n[1]||"",!0),this.j=Br(n[2]||""),Fr(this,n[3]||"",!0),Vr(this,n[4]),this.g=Br(n[5]||"",!0),Ur(this,n[6]||"",!0),this.i=Br(n[7]||"")):(this.a=!!e,this.b=new Qr(null,this.a))}function Lr(t){return new xr(t)}function Mr(t,e,n){t.f=n?Br(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Fr(t,e,n){t.c=n?Br(e,!0):e}function Vr(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Ur(t,e,n){e instanceof Qr?(t.b=e,function(t,e){e&&!t.f&&(Yr(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Jr(this,e),ti(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=Kr(e,$r)),t.b=new Qr(e,t.a))}function jr(t,e,n){t.b.set(e,n)}function qr(t){return jr(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^me()).toString(36)),t}function Br(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Kr(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Gr),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Gr(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}xr.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Kr(e,Hr,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Kr(e,Hr,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Kr(n,"/"==n.charAt(0)?Wr:zr,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Kr(n,Xr)),t.join("")};var Hr=/[#\/\?@]/g,zr=/[#\?:]/g,Wr=/[#\?]/g,$r=/[#\?@]/g,Xr=/#/g;function Qr(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Yr(t){t.a||(t.a=new Or,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Jr(t,e){Yr(t),e=ei(t,e),Rr(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Rr((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Cr(t)))}function Zr(t,e){return Yr(t),e=ei(t,e),Rr(t.a.b,e)}function ti(t,e,n){Jr(t,e),0<n.length&&(t.c=null,t.a.set(ei(t,e),Ee(n)),t.b+=n.length)}function ei(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(re=Qr.prototype).add=function(t,e){Yr(this),this.c=null,t=ei(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},re.forEach=function(t,e){Yr(this),this.a.forEach((function(n,r){we(n,(function(n){t.call(e,n,r,this)}),this)}),this)},re.L=function(){Yr(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},re.K=function(t){Yr(this);var e=[];if("string"==typeof t)Zr(this,t)&&(e=Ie(e,this.a.get(ei(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Ie(e,t[n])}return e},re.set=function(t,e){return Yr(this),this.c=null,Zr(this,t=ei(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},re.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},re.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var ni=function(t,e){this.b=t,this.a=e};function ri(t){this.g=t||ii,se.PerformanceNavigationTiming?t=0<(t=se.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(se.ia&&se.ia.ya&&se.ia.ya()&&se.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var ii=10;function oi(t){return!!t.b||!!t.a&&t.a.size>=t.f}function si(t){return t.b?1:t.a?t.a.size:0}function ai(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function ui(t,e){t.a?t.a.add(e):t.b=e}function ci(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function hi(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=ne(t.a.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Ee(t.c)}function li(){}function fi(){this.a=new li}function pi(t,e,n){var r=n||"";try{Dr(t,(function(t,n){var i=t;ce(t)&&(i=kn(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function di(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}ri.prototype.cancel=function(){var t,e;if(this.c=hi(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=ne(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},li.prototype.stringify=function(t){return se.JSON.stringify(t,void 0)},li.prototype.parse=function(t){return se.JSON.parse(t,void 0)};var vi=se.JSON.parse;function mi(t){Sn.call(this),this.headers=new Or,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=yi,this.D=this.F=!1}ye(mi,Sn);var yi="",gi=/^https?$/i,bi=["POST","PUT"];function wi(t){return"content-type"==t.toLowerCase()}function Ii(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Ei(t),_i(t)}function Ei(t){t.u||(t.u=!0,An(t,"complete"),An(t,"error"))}function Ti(t){if(t.b&&void 0!==oe&&(!t.s[1]||4!=Ai(t)||2!=t.W()))if(t.l&&4==Ai(t))qn(t.za,0,t);else if(An(t,"readystatechange"),4==Ai(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Pr)[1]||null;if(!o&&se.self&&se.self.location){var s=se.self.location.protocol;o=s.substr(0,s.length-1)}i=!gi.test(o?o.toLowerCase():"")}e=i}if(e)An(t,"complete"),An(t,"success");else{t.h=6;try{var a=2<Ai(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",Ei(t)}}finally{_i(t)}}}function _i(t,e){if(t.a){Si(t);var n=t.a,r=t.s[0]?ae:null;t.a=null,t.s=null,e||An(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function Si(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(se.clearTimeout(t.m),t.m=null)}function Ai(t){return t.a?t.a.readyState:0}function Ni(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Oe(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):jr(t,e,n))}function ki(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Di(t){this.pa=0,this.g=[],this.c=new $n,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=ki("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=ki("baseRetryDelayMs",5e3,t),this.Ra=ki("retryDelaySeedMs",1e4,t),this.Ma=ki("forwardChannelMaxRetries",2,t),this.ma=ki("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new ri(t&&t.concurrentRequestLimit),this.ka=new fi,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Oi(t){if(Ri(t),3==t.v){var e=t.R++,n=Lr(t.B);jr(n,"SID",t.J),jr(n,"RID",e),jr(n,"TYPE","terminate"),Mi(t,n),(e=new vr(t,t.c,e,void 0)).H=2,e.i=qr(Lr(n)),n=!1,se.navigator&&se.navigator.sendBeacon&&(n=se.navigator.sendBeacon(e.i.toString(),"")),!n&&se.Image&&((new Image).src=e.i,n=!0),n||(e.a=$i(e.g,null),e.a.ba(e.i)),e.u=me(),Tr(e)}zi(t)}function Ci(t){t.a&&(ji(t),t.a.cancel(),t.a=null)}function Ri(t){Ci(t),t.j&&(se.clearTimeout(t.j),t.j=null),Bi(t),t.b.cancel(),t.h&&("number"==typeof t.h&&se.clearTimeout(t.h),t.h=null)}function Pi(t,e){t.g.push(new ni(t.Oa++,e)),3==t.v&&xi(t)}function xi(t){oi(t.b)||t.h||(t.h=!0,Ln(t.Ba,t),t.u=0)}function Li(t,e){var n;n=e?e.f:t.R++;var r=Lr(t.B);jr(r,"SID",t.J),jr(r,"RID",n),jr(r,"AID",t.P),Mi(t,r),t.i&&t.l&&Ni(r,t.i,t.l),n=new vr(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Fi(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),ui(t.b,n),br(n,r,e)}function Mi(t,e){t.f&&Dr({},(function(t,n){jr(e,n,t)}))}function Fi(t,e,n){n=Math.min(t.g.length,n);var r=t.f?de(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{pi(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Vi(t){t.a||t.j||(t.T=1,Ln(t.Aa,t),t.o=0)}function Ui(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=ir(de(t.Aa,t),Gi(t,t.o)),t.o++,!0)}function ji(t){null!=t.s&&(se.clearTimeout(t.s),t.s=null)}function qi(t){t.a=new vr(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Lr(t.la);jr(e,"RID","rpc"),jr(e,"SID",t.J),jr(e,"CI",t.H?"0":"1"),jr(e,"AID",t.P),Mi(t,e),jr(e,"TYPE","xmlhttp"),t.i&&t.l&&Ni(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=qr(Lr(e)),n.j=null,n.I=!0,wr(n,t)}function Bi(t){null!=t.m&&(se.clearTimeout(t.m),t.m=null)}function Ki(t,e){var n=null;if(t.a==e){Bi(t),ji(t),t.a=null;var r=2}else{if(!ai(t.b,e))return;n=e.s,ci(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=me()-e.u;var i=t.u;An(r=Jn(),new rr(r,n,e,i)),xi(t)}else Vi(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(si(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=ir(de(t.Ba,t,e),Gi(t,t.u)),t.u++,0)))}(t,e)||2==r&&Ui(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Hi(t,5);break;case 4:Hi(t,10);break;case 3:Hi(t,6);break;default:Hi(t,2)}}function Gi(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Hi(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=de(t.Ya,t);n||(n=new xr("//www.google.com/images/cleardot.gif"),se.location&&"http"==se.location.protocol||Mr(n,"https"),qr(n)),function(t,e){var n=new $n;if(se.Image){var r=new Image;r.onload=ve(di,n,r,"TestLoadImage: loaded",!0,e),r.onerror=ve(di,n,r,"TestLoadImage: error",!1,e),r.onabort=ve(di,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=ve(di,n,r,"TestLoadImage: timeout",!1,e),se.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else nr(2);t.v=0,t.f&&t.f.ra(e),zi(t),Ri(t)}function zi(t){t.v=0,t.I=-1,t.f&&(0==hi(t.b).length&&0==t.g.length||(t.b.c.length=0,Ee(t.g),t.g.length=0),t.f.qa())}function Wi(t,e,n){var r=function(t){return t instanceof xr?Lr(t):new xr(t,void 0)}(n);if(""!=r.c)e&&Fr(r,e+"."+r.c),Vr(r,r.h);else{var i=se.location;r=function(t,e,n,r){var i=new xr(null,void 0);return t&&Mr(i,t),e&&Fr(i,e),n&&Vr(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Oe(t.V,(function(t,e){jr(r,e,t)})),e=t.A,n=t.na,e&&n&&jr(r,e,n),jr(r,"VER",t.ha),Mi(t,r),r}function $i(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new mi(t.Na)).F=t.C,e}function Xi(){}function Qi(){if(Ve&&!(10<=Number(Ye)))throw Error("Environmental error: no available transport.")}function Yi(t,e){Sn.call(this),this.a=new Di(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Te(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Te(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new to(this)}function Ji(t){fr.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Zi(){pr.call(this),this.status=1}function to(t){this.a=t}(re=mi.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?ur(this.H):ur(hr),this.a.onreadystatechange=de(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void Ii(this,t)}t=n||"";var i=new Or(this.headers);r&&Dr(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=wi,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=se.FormData&&t instanceof se.FormData,!(0<=be(bi,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Si(this),0<this.o&&((this.D=function(t){return Ve&&Xe(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=de(this.xa,this)):this.m=qn(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){Ii(this,t)}},re.xa=function(){void 0!==oe&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,An(this,"timeout"),this.abort(8))},re.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,An(this,"complete"),An(this,"abort"),_i(this))},re.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),_i(this,!0)),mi.X.G.call(this)},re.za=function(){this.j||(this.A||this.l||this.g?Ti(this):this.Ua())},re.Ua=function(){Ti(this)},re.W=function(){try{return 2<Ai(this)?this.a.status:-1}catch(t){return-1}},re.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},re.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),vi(e)}},re.ua=function(){return this.h},re.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(re=Di.prototype).ha=8,re.v=1,re.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new vr(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Pe(r=Ce(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Fi(this,n,e),jr(i=Lr(this.B),"RID",t),jr(i,"CVER",22),this.A&&jr(i,"X-HTTP-Session-Id",this.A),Mi(this,i),this.i&&r&&Ni(i,this.i,r),ui(this.b,n),this.Ia&&jr(i,"TYPE","init"),this.da?(jr(i,"$req",e),jr(i,"SID","null"),n.U=!0,br(n,i,null)):br(n,i,e),this.v=2}}else 3==this.v&&(t?Li(this,t):0==this.g.length||oi(this.b)||Li(this))},re.Aa=function(){if(this.j=null,qi(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=ir(de(this.Ta,this),t)}},re.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,nr(10),Ci(this),qi(this))},re.Sa=function(){null!=this.m&&(this.m=null,Ci(this),Ui(this),nr(19))},re.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),nr(2)):(this.c.info("Failed to ping google.com"),nr(1))},(re=Xi.prototype).ta=function(){},re.sa=function(){},re.ra=function(){},re.qa=function(){},re.Ja=function(){},Qi.prototype.a=function(t,e){return new Yi(t,e)},ye(Yi,Sn),Yi.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;nr(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Wi(t,null,t.fa),xi(t)},Yi.prototype.close=function(){Oi(this.a)},Yi.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Pi(this.a,e)}else this.l?((e={}).__data__=kn(t),Pi(this.a,e)):Pi(this.a,t)},Yi.prototype.G=function(){this.a.f=null,delete this.f,Oi(this.a),delete this.a,Yi.X.G.call(this)},ye(Ji,fr),ye(Zi,pr),ye(to,Xi),to.prototype.ta=function(){An(this.a,"a")},to.prototype.sa=function(t){An(this.a,new Ji(t))},to.prototype.ra=function(t){An(this.a,new Zi(t))},to.prototype.qa=function(){An(this.a,"b")},Qi.prototype.createWebChannel=Qi.prototype.a,Yi.prototype.send=Yi.prototype.h,Yi.prototype.open=Yi.prototype.g,Yi.prototype.close=Yi.prototype.close,or.NO_ERROR=0,or.TIMEOUT=8,or.HTTP_ERROR=6,sr.COMPLETE="complete",cr.EventType=lr,lr.OPEN="a",lr.CLOSE="b",lr.ERROR="c",lr.MESSAGE="d",Sn.prototype.listen=Sn.prototype.va,mi.prototype.listenOnce=mi.prototype.wa,mi.prototype.getLastError=mi.prototype.Qa,mi.prototype.getLastErrorCode=mi.prototype.ua,mi.prototype.getStatus=mi.prototype.W,mi.prototype.getResponseJson=mi.prototype.Pa,mi.prototype.getResponseText=mi.prototype.$,mi.prototype.send=mi.prototype.ba;var eo=or,no=sr,ro=Qn,io=10,oo=11,so=cr,ao=mi,uo=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();uo.o=-1;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var co={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ho=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return st(e,t),e}(Error),lo=new Ut("@firebase/firestore");function fo(){return lo.logLevel}function po(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(lo.logLevel<=Rt.DEBUG){var r=e.map(yo);lo.debug.apply(lo,ft(["Firestore (8.4.2): "+t],r))}}function vo(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(lo.logLevel<=Rt.ERROR){var r=e.map(yo);lo.error.apply(lo,ft(["Firestore (8.4.2): "+t],r))}}function mo(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(lo.logLevel<=Rt.WARN){var r=e.map(yo);lo.warn.apply(lo,ft(["Firestore (8.4.2): "+t],r))}}function yo(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var e}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function go(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.4.2) INTERNAL ASSERTION FAILED: "+t;throw vo(e),new Error(e)}function bo(t,e){t||go()}function wo(t,e){return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Io(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Eo=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Io(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function To(t,e){return t<e?-1:t>e?1:0}function _o(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function So(t){return t+"\0"}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ao=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ho(co.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ho(co.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new ho(co.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ho(co.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?To(this.nanoseconds,t.nanoseconds):To(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),No=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Ao(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ko(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Do(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Oo(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Co=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&go(),void 0===n?n=t.length-e:n>t.length-e&&go(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Ro=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return st(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new ho(co.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Co),Po=/^[_a-zA-Z][_a-zA-Z0-9]*$/,xo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return st(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Po.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new ho(co.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new ho(co.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new ho(co.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new ho(co.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Co),Lo=function(){function t(t){this.fields=t,t.sort(xo.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return _o(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Mo=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return To(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Mo.EMPTY_BYTE_STRING=new Mo("");var Fo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vo(t){if(bo(!!t),"string"==typeof t){var e=0,n=Fo.exec(t);if(bo(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Uo(t.seconds),nanos:Uo(t.nanos)}}function Uo(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function jo(t){return"string"==typeof t?Mo.fromBase64String(t):Mo.fromUint8Array(t)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function qo(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Bo(t){var e=t.mapValue.fields.__previous_value__;return qo(e)?Bo(e):e}function Ko(t){var e=Vo(t.mapValue.fields.__local_write_time__.timestampValue);return new Ao(e.seconds,e.nanos)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Go(t){return null==t}function Ho(t){return 0===t&&1/t==-1/0}function zo(t){return"number"==typeof t&&Number.isInteger(t)&&!Ho(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Wo=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Ro.fromString(e))},t.fromName=function(e){return new t(Ro.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Ro.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Ro.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Ro(e.slice()))},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function $o(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?qo(t)?4:10:go()}function Xo(t,e){var n=$o(t);if(n!==$o(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ko(t).isEqual(Ko(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Vo(t.timestampValue),r=Vo(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return jo(t.bytesValue).isEqual(jo(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Uo(t.geoPointValue.latitude)===Uo(e.geoPointValue.latitude)&&Uo(t.geoPointValue.longitude)===Uo(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Uo(t.integerValue)===Uo(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Uo(t.doubleValue),r=Uo(e.doubleValue);return n===r?Ho(n)===Ho(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return _o(t.arrayValue.values||[],e.arrayValue.values||[],Xo);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(ko(n)!==ko(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Xo(n[i],r[i])))return!1;return!0}(t,e);default:return go()}}function Qo(t,e){return void 0!==(t.values||[]).find((function(t){return Xo(t,e)}))}function Yo(t,e){var n=$o(t),r=$o(e);if(n!==r)return To(n,r);switch(n){case 0:return 0;case 1:return To(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Uo(t.integerValue||t.doubleValue),r=Uo(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Jo(t.timestampValue,e.timestampValue);case 4:return Jo(Ko(t),Ko(e));case 5:return To(t.stringValue,e.stringValue);case 6:return function(t,e){var n=jo(t),r=jo(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=To(n[i],r[i]);if(0!==o)return o}return To(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=To(Uo(t.latitude),Uo(e.latitude));return 0!==n?n:To(Uo(t.longitude),Uo(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Yo(n[i],r[i]);if(o)return o}return To(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=To(r[s],o[s]);if(0!==a)return a;var u=Yo(n[r[s]],i[o[s]]);if(0!==u)return u}return To(r.length,o.length)}(t.mapValue,e.mapValue);default:throw go()}}function Jo(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return To(t,e);var n=Vo(t),r=Vo(e),i=To(n.seconds,r.seconds);return 0!==i?i:To(n.nanos,r.nanos)}function Zo(t){return ts(t)}function ts(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Vo(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?jo(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,Wo.fromName(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=ts(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+ts(t.fields[o])}return e+"}"}(t.mapValue):go();var e,n}function es(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function ns(t){return!!t&&"integerValue"in t}function rs(t){return!!t&&"arrayValue"in t}function is(t){return!!t&&"nullValue"in t}function os(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ss(t){return!!t&&"mapValue"in t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var as=function(){function t(t){this.overlayMap=new Map,this.partialValue=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(e){return t.extractNestedValue(this.buildProto(),e)},t.prototype.toProto=function(){return this.field(xo.emptyPath())},t.prototype.set=function(t,e){this.setOverlay(t,e)},t.prototype.setAll=function(t){var e=this;t.forEach((function(t,n){t?e.set(n,t):e.delete(n)}))},t.prototype.delete=function(t){this.setOverlay(t,null)},t.prototype.isEqual=function(t){return Xo(this.buildProto(),t.buildProto())},t.prototype.setOverlay=function(t,e){for(var n=this.overlayMap,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===$o(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.applyOverlay=function(e,n){var r=this,i=!1,o=t.extractNestedValue(this.partialValue,e),s=ss(o)?Object.assign({},o.mapValue.fields):{};return n.forEach((function(t,n){if(t instanceof Map){var o=r.applyOverlay(e.child(n),t);null!=o&&(s[n]=o,i=!0)}else null!==t?(s[n]=t,i=!0):s.hasOwnProperty(n)&&(delete s[n],i=!0)})),i?{mapValue:{fields:s}}:null},t.prototype.buildProto=function(){var t=this.applyOverlay(xo.emptyPath(),this.overlayMap);return null!=t&&(this.partialValue=t,this.overlayMap.clear()),this.partialValue},t.extractNestedValue=function(t,e){if(e.isEmpty())return t;for(var n=t,r=0;r<e.length-1;++r){if(!n.mapValue.fields)return null;if(!ss(n=n.mapValue.fields[e.get(r)]))return null}return(n=(n.mapValue.fields||{})[e.lastSegment()])||null},t.prototype.clone=function(){return new t(this.buildProto())},t}();function us(t){var e=[];return Do(t.fields||{},(function(t,n){var r=new xo([t]);if(ss(n)){var i=us(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var a=s[o];e.push(r.child(a))}}else e.push(r)})),new Lo(e)
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var cs=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,No.min(),as.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,as.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,as.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=as.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=as.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.toProto())+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),hs=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ls(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new hs(t,e,n,r,i,o,s)}function fs(t){var e=wo(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+Zo(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),Go(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Ss(e.startAt)),e.endAt&&(n+="|ub:",n+=Ss(e.endAt)),e.h=n}return e.h}function ps(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Ns(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!Xo(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ds(t.startAt,e.startAt)&&Ds(t.endAt,e.endAt)}function ds(t){return Wo.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var vs=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return st(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new ms(t,n,r):"array-contains"===n?new ws(t,r):"in"===n?new Is(t,r):"not-in"===n?new Es(t,r):"array-contains-any"===n?new Ts(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new ys(t,n):new gs(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Yo(e,this.value)):null!==e&&$o(this.value)===$o(e)&&this.m(Yo(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return go()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),ms=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Wo.fromName(r.referenceValue),i}return st(e,t),e.prototype.matches=function(t){var e=Wo.comparator(t.key,this.key);return this.m(e)},e}(vs),ys=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=bs("in",n),r}return st(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(vs),gs=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=bs("not-in",n),r}return st(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(vs);function bs(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return Wo.fromName(t.referenceValue)}))}var ws=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return st(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return rs(e)&&Qo(e.arrayValue,this.value)},e}(vs),Is=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return st(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&Qo(this.value.arrayValue,e)},e}(vs),Es=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return st(e,t),e.prototype.matches=function(t){if(Qo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!Qo(this.value.arrayValue,e)},e}(vs),Ts=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return st(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!rs(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return Qo(e.value.arrayValue,t)}))},e}(vs),_s=function(t,e){this.position=t,this.before=e};function Ss(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Zo(t)})).join(",")}var As=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Ns(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function ks(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?Wo.comparator(Wo.fromName(s.referenceValue),n.key):Yo(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Ds(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Xo(t.position[n],e.position[n]))return!1;return!0}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Os=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null,this.startAt,this.endAt};function Cs(t,e,n,r,i,o,s,a){return new Os(t,e,n,r,i,o,s,a)}function Rs(t){return new Os(t)}function Ps(t){return!Go(t.limit)&&"F"===t.limitType}function xs(t){return!Go(t.limit)&&"L"===t.limitType}function Ls(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Ms(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Fs(t){return null!==t.collectionGroup}function Vs(t){var e=wo(t);if(null===e.p){e.p=[];var n=Ms(e),r=Ls(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new As(n)),e.p.push(new As(xo.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new As(xo.keyField(),u))}}}return e.p}function Us(t){var e=wo(t);if(!e.T)if("F"===e.limitType)e.T=ls(e.path,e.collectionGroup,Vs(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Vs(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new As(o.field,s))}var a=e.endAt?new _s(e.endAt.position,!e.endAt.before):null,u=e.startAt?new _s(e.startAt.position,!e.startAt.before):null;e.T=ls(e.path,e.collectionGroup,n,e.filters,e.limit,a,u)}return e.T}function js(t,e,n){return new Os(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function qs(t,e){return ps(Us(t),Us(e))&&t.limitType===e.limitType}function Bs(t){return fs(Us(t))+"|lt:"+t.limitType}function Ks(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Zo(e.value);var e})).join(", ")+"]"),Go(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Ss(t.startAt)),t.endAt&&(e+=", endAt: "+Ss(t.endAt)),"Target("+e+")"}(Us(t))+"; limitType="+t.limitType+")"}function Gs(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Wo.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!ks(t.startAt,Vs(t),e)||t.endAt&&ks(t.endAt,Vs(t),e))}(t,e)}function Hs(t){return function(e,n){for(var r=!1,i=0,o=Vs(t);i<o.length;i++){var s=o[i],a=zs(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function zs(t,e,n){var r=t.field.isKeyField()?Wo.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Yo(r,i):go()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return go()}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ws(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ho(e)?"-0":e}}function $s(t){return{integerValue:""+t}}function Xs(t,e){return zo(e)?$s(e):Ws(t,e)}
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Qs=function(){this._=void 0};function Ys(t,e,n){return t instanceof ta?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof ea?na(t,e):t instanceof ra?ia(t,e):function(t,e){var n=Zs(t,e),r=sa(n)+sa(t.A);return ns(n)&&ns(t.A)?$s(r):Ws(t.R,r)}(t,e)}function Js(t,e,n){return t instanceof ea?na(t,e):t instanceof ra?ia(t,e):n}function Zs(t,e){return t instanceof oa?ns(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var ta=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return st(e,t),e}(Qs),ea=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return st(e,t),e}(Qs);function na(t,e){for(var n=aa(e),r=function(t){n.some((function(e){return Xo(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ra=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return st(e,t),e}(Qs);function ia(t,e){for(var n=aa(e),r=function(t){n=n.filter((function(e){return!Xo(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var oa=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return st(e,t),e}(Qs);function sa(t){return Uo(t.integerValue||t.doubleValue)}function aa(t){return rs(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ua=function(t,e){this.field=t,this.transform=e},ca=function(t,e){this.version=t,this.transformResults=e},ha=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function la(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var fa=function(){};function pa(t,e,n){t instanceof ga?function(t,e,n){var r=t.value.clone(),i=Ia(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof ba?function(t,e,n){if(la(t.precondition,e)){var r=Ia(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(wa(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function da(t,e,n){t instanceof ga?function(t,e,n){if(la(t.precondition,e)){var r=t.value.clone(),i=Ea(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(ya(e),r).setHasLocalMutations()}}(t,e,n):t instanceof ba?function(t,e,n){if(la(t.precondition,e)){var r=Ea(t.fieldTransforms,n,e),i=e.data;i.setAll(wa(t)),i.setAll(r),e.convertToFoundDocument(ya(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){la(t.precondition,e)&&e.convertToNoDocument(No.min())}(t,e)}function va(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=Zs(o.transform,s||null);null!=a&&(null==n&&(n=as.empty()),n.set(o.field,a))}return n||null}function ma(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&_o(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof ea&&e instanceof ea||t instanceof ra&&e instanceof ra?_o(t.elements,e.elements,Xo):t instanceof oa&&e instanceof oa?Xo(t.A,e.A):t instanceof ta&&e instanceof ta}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function ya(t){return t.isFoundDocument()?t.version:No.min()}var ga=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return st(e,t),e}(fa),ba=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return st(e,t),e}(fa);function wa(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function Ia(t,e,n){var r=new Map;bo(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Js(s,a,n[i]))}return r}function Ea(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,Ys(a,u,e))}return r}var Ta,_a,Sa=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return st(e,t),e}(fa),Aa=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return st(e,t),e}(fa),Na=function(t){this.count=t};function ka(t){switch(t){case co.OK:return go();case co.CANCELLED:case co.UNKNOWN:case co.DEADLINE_EXCEEDED:case co.RESOURCE_EXHAUSTED:case co.INTERNAL:case co.UNAVAILABLE:case co.UNAUTHENTICATED:return!1;case co.INVALID_ARGUMENT:case co.NOT_FOUND:case co.ALREADY_EXISTS:case co.PERMISSION_DENIED:case co.FAILED_PRECONDITION:case co.ABORTED:case co.OUT_OF_RANGE:case co.UNIMPLEMENTED:case co.DATA_LOSS:return!0;default:return go()}}function Da(t){if(void 0===t)return vo("GRPC error has no .code"),co.UNKNOWN;switch(t){case Ta.OK:return co.OK;case Ta.CANCELLED:return co.CANCELLED;case Ta.UNKNOWN:return co.UNKNOWN;case Ta.DEADLINE_EXCEEDED:return co.DEADLINE_EXCEEDED;case Ta.RESOURCE_EXHAUSTED:return co.RESOURCE_EXHAUSTED;case Ta.INTERNAL:return co.INTERNAL;case Ta.UNAVAILABLE:return co.UNAVAILABLE;case Ta.UNAUTHENTICATED:return co.UNAUTHENTICATED;case Ta.INVALID_ARGUMENT:return co.INVALID_ARGUMENT;case Ta.NOT_FOUND:return co.NOT_FOUND;case Ta.ALREADY_EXISTS:return co.ALREADY_EXISTS;case Ta.PERMISSION_DENIED:return co.PERMISSION_DENIED;case Ta.FAILED_PRECONDITION:return co.FAILED_PRECONDITION;case Ta.ABORTED:return co.ABORTED;case Ta.OUT_OF_RANGE:return co.OUT_OF_RANGE;case Ta.UNIMPLEMENTED:return co.UNIMPLEMENTED;case Ta.DATA_LOSS:return co.DATA_LOSS;default:return go()}}(_a=Ta||(Ta={}))[_a.OK=0]="OK",_a[_a.CANCELLED=1]="CANCELLED",_a[_a.UNKNOWN=2]="UNKNOWN",_a[_a.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_a[_a.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_a[_a.NOT_FOUND=5]="NOT_FOUND",_a[_a.ALREADY_EXISTS=6]="ALREADY_EXISTS",_a[_a.PERMISSION_DENIED=7]="PERMISSION_DENIED",_a[_a.UNAUTHENTICATED=16]="UNAUTHENTICATED",_a[_a.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_a[_a.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_a[_a.ABORTED=10]="ABORTED",_a[_a.OUT_OF_RANGE=11]="OUT_OF_RANGE",_a[_a.UNIMPLEMENTED=12]="UNIMPLEMENTED",_a[_a.INTERNAL=13]="INTERNAL",_a[_a.UNAVAILABLE=14]="UNAVAILABLE",_a[_a.DATA_LOSS=15]="DATA_LOSS";
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Oa=function(){function t(t,e){this.comparator=t,this.root=e||Ra.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ra.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ra.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Ca(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Ca(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Ca(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Ca(this.root,t,this.comparator,!0)},t}(),Ca=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Ra=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw go();if(this.right.isRed())throw go();var t=this.left.check();if(t!==this.right.check())throw go();return t+(this.isRed()?0:1)},t}();Ra.EMPTY=null,Ra.RED=!0,Ra.BLACK=!1,Ra.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw go()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw go()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw go()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw go()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw go()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Ra(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Pa=function(){function t(t){this.comparator=t,this.data=new Oa(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new xa(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new xa(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),xa=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),La=new Oa(Wo.comparator);function Ma(){return La}var Fa=new Oa(Wo.comparator);function Va(){return Fa}var Ua=new Oa(Wo.comparator);var ja=new Pa(Wo.comparator);function qa(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=ja,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Ba=new Pa(To);function Ka(){return Ba}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ga=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Ha.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(No.min(),r,Ka(),Ma(),qa())},t}(),Ha=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Mo.EMPTY_BYTE_STRING,n,qa(),qa(),qa())},t}(),za=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},Wa=function(t,e){this.targetId=t,this.V=e},$a=function(t,e,n,r){void 0===n&&(n=Mo.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Xa=function(){function t(){this.S=0,this.D=Ja(),this.C=Mo.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"O",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.$=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=qa(),e=qa(),n=qa();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:go()}})),new Ha(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=Ja()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),Qa=function(){function t(t){this.W=t,this.G=new Map,this.H=Ma(),this.J=Ya(),this.Y=new Pa(To)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.$(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.$(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.$(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.$(t.resumeToken));break;default:go()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(ds(i))if(0===n){var o=new Wo(i.path);this.tt(e,o,cs.newNoDocument(o,No.min()))}else bo(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&ds(o.target)){var s=new Wo(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,cs.newNoDocument(s,t))}r.O&&(n.set(i,r.M()),r.L())}}));var r=qa();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Ga(t,n,this.Y,this.H,r);return this.H=Ma(),this.J=Ya(),this.Y=new Pa(To),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Xa,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Pa(To),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||po("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Xa),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Ya(){return new Oa(Wo.comparator)}function Ja(){return new Oa(Wo.comparator)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Za={asc:"ASCENDING",desc:"DESCENDING"},tu={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eu=function(t,e){this.databaseId=t,this.I=e};function nu(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function ru(t,e){return t.I?e.toBase64():e.toUint8Array()}function iu(t,e){return nu(t,e.toTimestamp())}function ou(t){return bo(!!t),No.fromTimestamp(function(t){var e=Vo(t);return new Ao(e.seconds,e.nanos)}(t))}function su(t,e){return function(t){return new Ro(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function au(t){var e=Ro.fromString(t);return bo(Ou(e)),e}function uu(t,e){return su(t.databaseId,e.path)}function cu(t,e){var n=au(e);if(n.get(1)!==t.databaseId.projectId)throw new ho(co.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ho(co.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Wo(pu(n))}function hu(t,e){return su(t.databaseId,e)}function lu(t){var e=au(t);return 4===e.length?Ro.emptyPath():pu(e)}function fu(t){return new Ro(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function pu(t){return bo(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function du(t,e,n){return{name:uu(t,e),fields:n.toProto().mapValue.fields}}function vu(t,e){var n;if(e instanceof ga)n={update:du(t,e.key,e.value)};else if(e instanceof Sa)n={delete:uu(t,e.key)};else if(e instanceof ba)n={update:du(t,e.key,e.data),updateMask:Du(e.fieldMask)};else{if(!(e instanceof Aa))return go();n={verify:uu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof ta)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ea)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ra)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof oa)return{fieldPath:e.field.canonicalString(),increment:n.A};throw go()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:iu(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:go()}(t,e.precondition)),n}function mu(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?ha.updateTime(ou(t.updateTime)):void 0!==t.exists?ha.exists(t.exists):ha.none()}(e.currentDocument):ha.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)bo("REQUEST_TIME"===e.setToServerValue),n=new ta;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new ea(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new ra(i)}else"increment"in e?n=new oa(t,e.increment):go();var o=xo.fromServerFormat(e.fieldPath);return new ua(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=cu(t,e.update.name),o=new as({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){var e=t.fieldPaths||[];return new Lo(e.map((function(t){return xo.fromServerFormat(t)})))}(e.updateMask);return new ba(i,o,s,n,r)}return new ga(i,o,n,r)}if(e.delete){var a=cu(t,e.delete);return new Sa(a,n)}if(e.verify){var u=cu(t,e.verify);return new Aa(u,n)}return go()}function yu(t,e){return{documents:[hu(t,e.path)]}}function gu(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=hu(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=hu(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(os(t.value))return{unaryFilter:{field:Su(t.field),op:"IS_NAN"}};if(is(t.value))return{unaryFilter:{field:Su(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(os(t.value))return{unaryFilter:{field:Su(t.field),op:"IS_NOT_NAN"}};if(is(t.value))return{unaryFilter:{field:Su(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Su(t.field),op:_u(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Su(t.field),direction:Tu(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||Go(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Iu(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Iu(e.endAt)),n}function bu(t){var e=lu(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){bo(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=wu(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return function(t){return new As(Au(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return Go(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Eu(n.startAt));var h=null;return n.endAt&&(h=Eu(n.endAt)),Cs(e,i,a,s,u,"F",c,h)}function wu(t){return t?void 0!==t.unaryFilter?[ku(t)]:void 0!==t.fieldFilter?[Nu(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return wu(t)})).reduce((function(t,e){return t.concat(e)})):go():[]}function Iu(t){return{before:t.before,values:t.position}}function Eu(t){var e=!!t.before,n=t.values||[];return new _s(n,e)}function Tu(t){return Za[t]}function _u(t){return tu[t]}function Su(t){return{fieldPath:t.canonicalString()}}function Au(t){return xo.fromServerFormat(t.fieldPath)}function Nu(t){return vs.create(Au(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return go()}}(t.fieldFilter.op),t.fieldFilter.value)}function ku(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Au(t.unaryFilter.field);return vs.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Au(t.unaryFilter.field);return vs.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Au(t.unaryFilter.field);return vs.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Au(t.unaryFilter.field);return vs.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return go()}}function Du(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function Ou(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Cu(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Pu(e)),e=Ru(t.get(n),e);return Pu(e)}function Ru(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Pu(t){return t+""}function xu(t){var e=t.length;if(bo(e>=2),2===e)return bo(""===t.charAt(0)&&""===t.charAt(1)),Ro.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&go(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:go()}o=s+2}return new Ro(r)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Lu=function(t,e){this.seconds=t,this.nanoseconds=e},Mu=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Mu.store="owner",Mu.key="owner";var Fu=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Fu.store="mutationQueues",Fu.keyPath="userId";var Vu=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Vu.store="mutations",Vu.keyPath="batchId",Vu.userMutationsIndex="userMutationsIndex",Vu.userMutationsKeyPath=["userId","batchId"];var Uu=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Cu(e)]},t.key=function(t,e,n){return[t,Cu(e),n]},t}();Uu.store="documentMutations",Uu.PLACEHOLDER=new Uu;var ju=function(t,e){this.path=t,this.readTime=e},qu=function(t,e){this.path=t,this.version=e},Bu=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Bu.store="remoteDocuments",Bu.readTimeIndex="readTimeIndex",Bu.readTimeIndexPath="readTime",Bu.collectionReadTimeIndex="collectionReadTimeIndex",Bu.collectionReadTimeIndexPath=["parentPath","readTime"];var Ku=function(t){this.byteSize=t};Ku.store="remoteDocumentGlobal",Ku.key="remoteDocumentGlobalKey";var Gu=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Gu.store="targets",Gu.keyPath="targetId",Gu.queryTargetsIndexName="queryTargetsIndex",Gu.queryTargetsKeyPath=["canonicalId","targetId"];var Hu=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Hu.store="targetDocuments",Hu.keyPath=["targetId","path"],Hu.documentTargetsIndex="documentTargetsIndex",Hu.documentTargetsKeyPath=["path","targetId"];var zu=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};zu.key="targetGlobalKey",zu.store="targetGlobal";var Wu=function(t,e){this.collectionId=t,this.parent=e};Wu.store="collectionParents",Wu.keyPath=["collectionId","parent"];var $u=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};$u.store="clientMetadata",$u.keyPath="clientId";var Xu=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Xu.store="bundles",Xu.keyPath="bundleId";var Qu=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Qu.store="namedQueries",Qu.keyPath="name";var Yu=ft(ft([],ft(ft([],ft(ft([],ft(ft([],[Fu.store,Vu.store,Uu.store,Bu.store,Gu.store,Mu.store,zu.store,Hu.store]),[$u.store])),[Ku.store])),[Wu.store])),[Xu.store,Qu.store]),Ju="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Zu=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),tc=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},ec=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&go(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),nc=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new tc,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new oc(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=hc(e.target.error);n.ft.reject(new oc(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new oc(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(po("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new ac(e)},t}(),rc=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(vt())&&vo("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return po("SimpleDb","Removing database:",t),uc(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=vt(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return ut(this,void 0,void 0,(function(){var e,n=this;return ct(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(po("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new oc(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new ho(co.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new oc(t,n))},i.onupgradeneeded=function(t){po("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){po("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return ut(this,void 0,void 0,(function(){var i,o,s,a,u;return ct(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,h;return ct(this,(function(l){switch(l.label){case 0:++o,l.label=1;case 1:return l.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=l.sent(),e=nc.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),ec.reject(t)})).toPromise(),u={},s.catch((function(){})),[4,e.dt];case 3:return[2,(u.value=(l.sent(),s),u)];case 4:return c=l.sent(),h="FirebaseError"!==c.name&&o<3,po("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),a.close(),h?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),ic=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return uc(this.Pt.delete())},t}(),oc=function(t){function e(e,n){var r=this;return(r=t.call(this,co.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return st(e,t),e}(ho);function sc(t){return"IndexedDbTransactionError"===t.name}var ac=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(po("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(po("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),uc(n)},t.prototype.add=function(t){return po("SimpleDb","ADD",this.store.name,t,t),uc(this.store.add(t))},t.prototype.get=function(t){var e=this;return uc(this.store.get(t)).next((function(n){return void 0===n&&(n=null),po("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return po("SimpleDb","DELETE",this.store.name,t),uc(this.store.delete(t))},t.prototype.count=function(){return po("SimpleDb","COUNT",this.store.name),uc(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Ft=function(t,e){po("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.Ot=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.$t=function(t){var e=this.cursor({});return new ec((function(n,r){e.onerror=function(t){var e=hc(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new ec((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new ic(i),s=e(i.primaryKey,i.value,o);if(s instanceof ec){var a=s.catch((function(t){return o.done(),ec.reject(t)}));n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return ec.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function uc(t){return new ec((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=hc(t.target.error);n(e)}}))}var cc=!1;function hc(t){var e=rc._t(vt());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new ho("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return cc||(cc=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var lc=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return st(e,t),e}(Zu);function fc(t,e){var n=wo(t);return rc.It(n.Mt,e)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var pc=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&pa(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&da(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&da(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(No.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),qa())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&_o(this.mutations,t.mutations,(function(t,e){return ma(t,e)}))&&_o(this.baseMutations,t.baseMutations,(function(t,e){return ma(t,e)}))},t}(),dc=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){bo(e.mutations.length===r.length);for(var i=Ua,o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),vc=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=No.min()),void 0===o&&(o=No.min()),void 0===s&&(s=Mo.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),mc=function(t){this.Lt=t};function yc(t,e){if(e.document)return function(t,e,n){var r=cu(t,e.name),i=ou(e.updateTime),o=new as({mapValue:{fields:e.fields}}),s=cs.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Wo.fromSegments(e.noDocument.path),r=Ec(e.noDocument.readTime),i=cs.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=Wo.fromSegments(e.unknownDocument.path);return r=Ec(e.unknownDocument.version),cs.newUnknownDocument(o,r)}return go()}function gc(t,e,n){var r=bc(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:uu(t,e.key),fields:e.data.toProto().mapValue.fields,updateTime:nu(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new Bu(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=Ic(e.version);return s=e.hasCommittedMutations,new Bu(null,new ju(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),h=Ic(e.version);return new Bu(new qu(c,h),null,null,!0,r,i)}return go()}function bc(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function wc(t){var e=new Ao(t[0],t[1]);return No.fromTimestamp(e)}function Ic(t){var e=t.toTimestamp();return new Lu(e.seconds,e.nanoseconds)}function Ec(t){var e=new Ao(t.seconds,t.nanoseconds);return No.fromTimestamp(e)}function Tc(t,e){for(var n=(e.baseMutations||[]).map((function(e){return mu(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var s=e.mutations.map((function(e){return mu(t.Lt,e)})),a=Ao.fromMillis(e.localWriteTimeMs);return new pc(e.batchId,a,n,s)}function _c(t){var e,n,r=Ec(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Ec(t.lastLimboFreeSnapshotVersion):No.min();return void 0!==t.query.documents?(bo(1===(n=t.query).documents.length),e=Us(Rs(lu(n.documents[0])))):e=function(t){return Us(bu(t))}(t.query),new vc(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Mo.fromBase64String(t.resumeToken))}function Sc(t,e){var n,r=Ic(e.snapshotVersion),i=Ic(e.lastLimboFreeSnapshotVersion);n=ds(e.target)?yu(t.Lt,e.target):gu(t.Lt,e.target);var o=e.resumeToken.toBase64();return new Gu(e.targetId,fs(e.target),r,o,e.sequenceNumber,i,n)}function Ac(t){var e=bu({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?js(e,e.limit,"L"):e}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Nc=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return kc(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Ec(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return kc(t).put({bundleId:(n=e).id,createTime:Ic(ou(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Dc(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Ac(e.bundledQuery),readTime:Ec(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return Dc(t).put(function(t){return{name:t.name,readTime:Ic(ou(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function kc(t){return fc(t,Xu.store)}function Dc(t){return fc(t,Qu.store)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Oc=function(){function t(){this.Bt=new Cc}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),ec.resolve()},t.prototype.getCollectionParents=function(t,e){return ec.resolve(this.Bt.getEntries(e))},t}(),Cc=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Pa(Ro.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Pa(Ro.comparator)).toArray()},t}(),Rc=function(){function t(){this.qt=new Cc}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:Cu(i)};return Pc(t).put(o)}return ec.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[So(e),""],!1,!0);return Pc(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(xu(o.parent))}return n}))},t}();function Pc(t){return fc(t,Wu.store)}
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var xc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Lc=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Mc(t,e,n){var r=t.store(Vu.store),i=t.store(Uu.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.Ot({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){bo(1===a)})));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],p=Uu.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return ec.waitFor(o).next((function(){return c}))}function Fc(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw go();e=t.noDocument}return JSON.stringify(e).length}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */Lc.DEFAULT_COLLECTION_PERCENTILE=10,Lc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Lc.DEFAULT=new Lc(41943040,Lc.DEFAULT_COLLECTION_PERCENTILE,Lc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Lc.DISABLED=new Lc(-1,0,0);var Vc=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return bo(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return jc(t).Ot({index:Vu.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=qc(t),s=jc(t);return s.add({}).next((function(a){bo("number"==typeof a);for(var u=new pc(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return vu(t.Lt,e)})),i=n.mutations.map((function(e){return vu(t.Lt,e)}));return new Vu(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),h=[],l=new Pa((function(t,e){return To(t.canonicalString(),e.canonicalString())})),f=0,p=r;f<p.length;f++){var d=p[f],v=Uu.key(i.userId,d.key.path,a);l=l.add(d.key.path.popLast()),h.push(s.put(c)),h.push(o.put(v,Uu.PLACEHOLDER))}return l.forEach((function(e){h.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Qt[a]=u.keys()})),ec.waitFor(h).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return jc(t).get(e).next((function(t){return t?(bo(t.userId===n.userId),Tc(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?ec.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return jc(t).Ot({index:Vu.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(bo(e.batchId>=r),o=Tc(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return jc(t).Ot({index:Vu.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return jc(t).Nt(Vu.userMutationsIndex,n).next((function(t){return t.map((function(t){return Tc(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Uu.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return qc(t).Ot({range:i},(function(r,i,s){var a=r[0],u=r[1],c=r[2],h=xu(u);if(a===n.userId&&e.path.isEqual(h))return jc(t).get(c).next((function(t){if(!t)throw go();bo(t.userId===n.userId),o.push(Tc(n.R,t))}));s.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Pa(To),i=[];return e.forEach((function(e){var o=Uu.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=qc(t).Ot({range:s},(function(t,i,o){var s=t[0],a=t[1],u=t[2],c=xu(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(a)})),ec.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Uu.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Pa(To);return qc(t).Ot({range:s},(function(t,e,o){var s=t[0],u=t[1],c=t[2],h=xu(u);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(a=a.add(c)):o.done()})).next((function(){return n.Wt(t,a)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(jc(t).get(e).next((function(t){if(null===t)throw go();bo(t.userId===n.userId),r.push(Tc(n.R,t))})))})),ec.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return Mc(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),ec.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return ec.resolve();var r=IDBKeyRange.lowerBound(Uu.prefixForUser(e.userId)),i=[];return qc(t).Ot({range:r},(function(t,n,r){if(t[0]===e.userId){var o=xu(t[1]);i.push(o)}else r.done()})).next((function(){bo(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return Uc(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return Bc(t).get(this.userId).next((function(t){return t||new Fu(e.userId,-1,"")}))},t}();function Uc(t,e,n){var r=Uu.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return qc(t).Ot({range:o,kt:!0},(function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()})).next((function(){return s}))}function jc(t){return fc(t,Vu.store)}function qc(t){return fc(t,Uu.store)}function Bc(t){return fc(t,Fu.store)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Kc=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),Gc=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new Kc(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return No.fromTimestamp(new Ao(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return Hc(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return bo(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Hc(t).Ot((function(s,a){var u=_c(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return ec.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return Hc(t).Ot((function(t,n){var r=_c(n);e(r)}))},t.prototype.Xt=function(t){return zc(t).get(zu.key).next((function(t){return bo(null!==t),t}))},t.prototype.Zt=function(t,e){return zc(t).put(zu.key,e)},t.prototype.te=function(t,e){return Hc(t).put(Sc(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=fs(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Hc(t).Ot({range:r,index:Gu.queryTargetsIndexName},(function(t,n,r){var o=_c(n);ps(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Wc(t);return e.forEach((function(e){var s=Cu(e.path);i.push(o.put(new Hu(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))})),ec.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Wc(t);return ec.forEach(e,(function(e){var o=Cu(e.path);return ec.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Wc(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Wc(t),i=qa();return r.Ot({range:n,kt:!0},(function(t,e,n){var r=xu(t[1]),o=new Wo(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=Cu(e.path),r=IDBKeyRange.bound([n],[So(n)],!1,!0),i=0;return Wc(t).Ot({index:Hu.documentTargetsIndex,kt:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return Hc(t).get(e).next((function(t){return t?_c(t):null}))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Hc(t){return fc(t,Gu.store)}function zc(t){return fc(t,zu.store)}function Wc(t){return fc(t,Hu.store)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function $c(t){return ut(this,void 0,void 0,(function(){return ct(this,(function(e){if(t.code!==co.FAILED_PRECONDITION||t.message!==Ju)throw t;return po("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Xc(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=To(n,i);return 0===s?To(r,o):s}var Qc=function(){function t(t){this.ne=t,this.buffer=new Pa(Xc),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Xc(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Yc=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;po("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return ut(e,void 0,void 0,(function(){var e;return ct(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return sc(e=n.sent())?(po("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,$c(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Jc=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return ec.resolve(uo.o);var r=new Qc(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(po("LruGarbageCollector","Garbage collection skipped; disabled"),ec.resolve(xc)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(po("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),xc):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>c.params.maximumSequenceNumbersToCollect?(po("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),fo()<=Rt.DEBUG&&po("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-h)+"ms"),ec.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),Zc=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new Jc(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return th(t,n)},t.prototype.removeReference=function(t,e,n){return th(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return th(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return Bc(t).$t((function(r){return Uc(t,r,e).next((function(t){return t&&(n=!0),ec.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(s,a){if(a<=e){var u=n._e(t,s).next((function(e){if(!e)return o++,r.getEntry(t,s).next((function(){return r.removeEntry(s),Wc(t).delete([0,Cu(s.path)])}))}));i.push(u)}})).next((function(){return ec.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return th(t,e)},t.prototype.we=function(t,e){var n,r=Wc(t),i=uo.o;return r.Ot({index:Hu.documentTargetsIndex},(function(t,r){var o=t[0],s=(t[1],r.path),a=r.sequenceNumber;0===o?(i!==uo.o&&e(new Wo(xu(n)),i),i=a,n=s):i=uo.o})).next((function(){i!==uo.o&&e(new Wo(xu(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function th(t,e){return Wc(t).put(function(t,e){return new Hu(0,Cu(t.path),e)}(e,t.currentSequenceNumber))}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var eh=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.equalsFn(s,t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Do(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}}))},t.prototype.isEmpty=function(){return Oo(this.inner)},t}(),nh=function(){function t(){this.changes=new eh((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:No.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:cs.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?ec.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),rh=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return sh(t).put(ah(e),n)},t.prototype.removeEntry=function(t,e){var n=sh(t),r=ah(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return sh(t).get(ah(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return sh(t).get(ah(e)).next((function(t){return{document:n.ye(e,t),size:Fc(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=Ma();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=Ma(),i=new Oa(Wo.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,Fc(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return ec.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return sh(t).Ot({range:r},(function(t,e,r){for(var s=Wo.fromSegments(t);o&&Wo.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Ma(),o=e.path.length+1,s={};if(n.isEqual(No.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=bc(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=Bu.collectionReadTimeIndex}return sh(t).Ot(s,(function(t,n,s){if(t.length===o){var a=yc(r.R,n);e.path.isPrefixOf(a.key.path)?Gs(e,a)&&(i=i.insert(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new ih(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return oh(t).get(Ku.key).next((function(t){return bo(!!t),t}))},t.prototype.me=function(t,e){return oh(t).put(Ku.key,e)},t.prototype.ye=function(t,e){if(e){var n=yc(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(No.min()))return n}return cs.newInvalidDocument(t)},t}(),ih=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new eh((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return st(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Pa((function(t,e){return To(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=gc(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=Fc(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var h=gc(e.Ie.R,cs.newNoDocument(o,No.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,h))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),ec.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(nh);
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function oh(t){return fc(t,Ku.store)}function sh(t){return fc(t,Bu.store)}function ah(t){return t.path.toArray()}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var uh=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;bo(n<r&&n>=0&&r<=11);var o=new nc("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Mu.store)}(t),function(t){t.createObjectStore(Fu.store,{keyPath:Fu.keyPath}),t.createObjectStore(Vu.store,{keyPath:Vu.keyPath,autoIncrement:!0}).createIndex(Vu.userMutationsIndex,Vu.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Uu.store)}(t),ch(t),function(t){t.createObjectStore(Bu.store)}(t));var s=ec.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Hu.store),t.deleteObjectStore(Gu.store),t.deleteObjectStore(zu.store)}(t),ch(t)),s=s.next((function(){return function(t){var e=t.store(zu.store),n=new zu(0,0,No.min().toTimestamp(),0);return e.put(zu.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(Vu.store).Nt().next((function(n){t.deleteObjectStore(Vu.store),t.createObjectStore(Vu.store,{keyPath:Vu.keyPath,autoIncrement:!0}).createIndex(Vu.userMutationsIndex,Vu.userMutationsKeyPath,{unique:!0});var r=e.store(Vu.store),i=n.map((function(t){return r.put(t)}));return ec.waitFor(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore($u.store,{keyPath:$u.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.Re(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(Ku.store)}(t),i.be(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ve(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Bu.store);e.createIndex(Bu.readTimeIndex,Bu.readTimeIndexPath,{unique:!1}),e.createIndex(Bu.collectionReadTimeIndex,Bu.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(Xu.store,{keyPath:Xu.keyPath})}(t),function(t){t.createObjectStore(Qu.store,{keyPath:Qu.keyPath})}(t)}))),s},t.prototype.be=function(t){var e=0;return t.store(Bu.store).Ot((function(t,n){e+=Fc(n)})).next((function(){var n=new Ku(e);return t.store(Ku.store).put(Ku.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(Fu.store),r=t.store(Vu.store);return n.Nt().next((function(n){return ec.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Vu.userMutationsIndex,i).next((function(r){return ec.forEach(r,(function(r){bo(r.userId===n.userId);var i=Tc(e.R,r);return Mc(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(Hu.store),n=t.store(Bu.store);return t.store(zu.store).get(zu.key).next((function(t){var r=[];return n.Ot((function(n,i){var o=new Ro(n),s=function(t){return[0,Cu(t)]}(o);r.push(e.get(s).next((function(n){return n?ec.resolve():function(n){return e.put(new Hu(0,Cu(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return ec.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(Wu.store,{keyPath:Wu.keyPath});var n=e.store(Wu.store),r=new Cc,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Cu(i)})}};return e.store(Bu.store).Ot({kt:!0},(function(t,e){var n=new Ro(t);return i(n.popLast())})).next((function(){return e.store(Uu.store).Ot({kt:!0},(function(t,e){t[0];var n=t[1],r=(t[2],xu(n));return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(Gu.store);return n.Ot((function(t,r){var i=_c(r),o=Sc(e.R,i);return n.put(o)}))},t}();function ch(t){t.createObjectStore(Hu.store,{keyPath:Hu.keyPath}).createIndex(Hu.documentTargetsIndex,Hu.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Gu.store,{keyPath:Gu.keyPath}).createIndex(Gu.queryTargetsIndexName,Gu.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(zu.store)}var hh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",lh=function(){function t(e,n,r,i,o,s,a,u,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=h,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.Oe=null,this.$e=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new ho(co.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Zc(this,i),this.Le=n+"main",this.R=new mc(u),this.Be=new rc(this.Le,11,new uh(this.R)),this.qe=new Gc(this.referenceDelegate,this.R),this.Ut=new Rc,this.Ue=function(t,e){return new rh(t,e)}(this.R,this.Ut),this.Qe=new Nc,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===h&&vo("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new ho(co.FAILED_PRECONDITION,hh);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new uo(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return ut(e,void 0,void 0,(function(){return ct(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return ut(e,void 0,void 0,(function(){return ct(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return ut(e,void 0,void 0,(function(){return ct(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return ph(e).put(new $u(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(sc(e))return po("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return po("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return fh(t).get(Mu.key).next((function(t){return ec.resolve(e.tn(t))}))},t.prototype.en=function(t){return ph(t).delete(this.clientId)},t.prototype.nn=function(){return ut(this,void 0,void 0,(function(){var t,e,n,r,i=this;return ct(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.$e,18e5)?[3,2]:(this.$e=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=fc(t,$u.store);return e.Nt().next((function(t){var n=i.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return ec.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)r=n[e],this.Ke.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.Oe=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?ec.resolve(!0):fh(t).get(Mu.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new ho(co.FAILED_PRECONDITION,hh);return!1}}return!(!e.networkEnabled||!e.inForeground)||ph(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&po("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return ut(this,void 0,void 0,(function(){var t=this;return ct(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.Oe&&(this.Oe.cancel(),this.Oe=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Mu.store,$u.store],(function(e){var n=new lc(e,uo.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return ph(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Vc.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;po("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,Yu,(function(o){return i=new lc(o,r.Ne?r.Ne.next():uo.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw vo("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new ho(co.FAILED_PRECONDITION,Ju);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return fh(t).get(Mu.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new ho(co.FAILED_PRECONDITION,hh)}))},t.prototype.Ze=function(t){var e=new Mu(this.clientId,this.allowTabSynchronization,Date.now());return fh(t).put(Mu.key,e)},t.yt=function(){return rc.yt()},t.prototype.Xe=function(t){var e=this,n=fh(t);return n.get(Mu.key).next((function(t){return e.tn(t)?(po("IndexedDbPersistence","Releasing primary lease."),n.delete(Mu.key)):ec.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(vo("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("unload",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("unload",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return po("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return vo("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){vo("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function fh(t){return fc(t,Mu.store)}function ph(t){return fc(t,$u.store)}function dh(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var vh=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return Wo.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):Fs(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new Wo(e)).next((function(t){var e=Va();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=Va();return this.Ut.getCollectionParents(t,i).next((function(s){return ec.forEach(s,(function(s){var a=function(t,e){return new Os(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,h=r.get(c);null==h&&(h=cs.newInvalidDocument(c),r=r.insert(c,h)),da(u,h,o.localWriteTime),h.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){Gs(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=qa(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof ba&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),mh=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=qa(),i=qa(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),yh=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(No.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(o){var s=i.Cn(e,o);return(Ps(e)||xs(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(fo()<=Rt.DEBUG&&po("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Ks(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return s.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new Pa(Hs(t));return e.forEach((function(e,r){Gs(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return fo()<=Rt.DEBUG&&po("QueryEngine","Using full collection scan to execute query:",Ks(e)),this.Sn.getDocumentsMatchingQuery(t,e,No.min())},t}(),gh=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new Oa(To),this.kn=new eh((function(t){return fs(t)}),ps),this.On=No.min(),this._n=t.getMutationQueue(n),this.$n=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new vh(this.$n,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.Fn)}))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function bh(t,e,n,r){return new gh(t,e,n,r)}function wh(t,e){return ut(this,void 0,void 0,(function(){var n,r,i,o;return ct(this,(function(s){switch(s.label){case 0:return n=wo(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new vh(n.$n,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],s=qa(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var h=0,l=c.mutations;h<l.length;h++){var f=l[h];s=s.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var m=0,y=v.mutations;m<y.length;m++){var g=y[m];s=s.add(g.key)}}return i.pn(t,s).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function Ih(t,e){var n=wo(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.$n.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=ec.resolve();return o.forEach((function(t){s=s.next((function(){return r.getEntry(e,t)})).next((function(e){var o=n.docVersions.get(t);bo(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),s.next((function(){return t._n.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}function Eh(t){var e=wo(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function Th(t,e){var n=wo(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.$n.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach((function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return bo(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}}));var a=Ma();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),s.push(function(t,e,n,r,i){var o=qa();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=Ma();return n.forEach((function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(No.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):po("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),o}))}(t,o,e.documentUpdates,r,void 0).next((function(t){a=t}))),!r.isEqual(No.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));s.push(u)}return ec.waitFor(s).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,a)})).next((function(){return a}))})).then((function(t){return n.Fn=i,t}))}function _h(t,e){var n=wo(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function Sh(t,e){var n=wo(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,ec.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new vc(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t}))}function Ah(t,e,n){return ut(this,void 0,void 0,(function(){var r,i,o,s;return ct(this,(function(a){switch(a.label){case 0:r=wo(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!sc(s=a.sent()))throw s;return po("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}}))}))}function Nh(t,e,n){var r=wo(t),i=No.min(),o=qa();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=wo(t),i=r.kn.get(n);return void 0!==i?ec.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,Us(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:No.min(),n?o:qa())})).next((function(t){return{documents:t,Bn:o}}))}))}function kh(t,e){var n=wo(t),r=wo(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function Dh(t){var e=wo(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=wo(t),i=Ma(),o=bc(n),s=sh(e),a=IDBKeyRange.lowerBound(o,!0);return s.Ot({index:Bu.readTimeIndex,range:a},(function(t,e){var n=yc(r.R,e);i=i.insert(n.key,n),o=e.readTime})).next((function(){return{wn:i,readTime:wc(o)}}))}(e.$n,t,e.On)})).then((function(t){var n=t.wn,r=t.readTime;return e.On=r,n}))}function Oh(t){return ut(this,void 0,void 0,(function(){var e;return ct(this,(function(n){return[2,(e=wo(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=sh(t),n=No.min();return e.Ot({index:Bu.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=wc(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.On=t}))]}))}))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ch=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return ec.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:ou(n.createTime)}),ec.resolve()},t.prototype.getNamedQuery=function(t,e){return ec.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Ac(t.bundledQuery),readTime:ou(t.readTime)}}(e)),ec.resolve()},t}(),Rh=function(){function t(){this.Wn=new Pa(Ph.Gn),this.zn=new Pa(Ph.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Ph(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new Ph(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new Wo(new Ro([])),r=new Ph(n,t),i=new Ph(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new Wo(new Ro([])),n=new Ph(e,t),r=new Ph(e,t+1),i=qa();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new Ph(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Ph=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return Wo.comparator(t.key,e.key)||To(t.ns,e.ns)},t.Hn=function(t,e){return To(t.ns,e.ns)||Wo.comparator(t.key,e.key)},t}(),xh=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Pa(Ph.Gn)}return t.prototype.checkEmpty=function(t){return ec.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new pc(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new Ph(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return ec.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return ec.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return ec.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return ec.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return ec.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Ph(e,0),i=new Ph(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),ec.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Pa(To);return e.forEach((function(t){var e=new Ph(t,0),i=new Ph(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),ec.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;Wo.isDocumentKey(i)||(i=i.child(""));var o=new Ph(new Wo(i),0),s=new Pa(To);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)}),o),ec.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;bo(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return ec.forEach(e.mutations,(function(i){var o=new Ph(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new Ph(e,0),r=this.rs.firstAfterOrEqual(n);return ec.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,ec.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),Lh=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Oa(Wo.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return ec.resolve(n?n.document.clone():cs.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=Ma();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():cs.newInvalidDocument(t))})),ec.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Ma(),i=new Wo(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.key,u=s.value,c=u.document,h=u.readTime;if(!e.path.isPrefixOf(a.path))break;h.compareTo(n)<=0||Gs(e,c)&&(r=r.insert(c.key,c.clone()))}return ec.resolve(r)},t.prototype.fs=function(t,e){return ec.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new Mh(this)},t.prototype.getSize=function(t){return ec.resolve(this.size)},t}(),Mh=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return st(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),ec.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(nh),Fh=function(){function t(t){this.persistence=t,this.ds=new eh((function(t){return fs(t)}),ps),this.lastRemoteSnapshotVersion=No.min(),this.highestTargetId=0,this.ws=0,this._s=new Rh,this.targetCount=0,this.ys=Kc.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),ec.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return ec.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return ec.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),ec.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),ec.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Kc(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,ec.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),ec.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,ec.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)})),ec.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return ec.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return ec.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),ec.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),ec.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),ec.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return ec.resolve(n)},t.prototype.containsKey=function(t,e){return ec.resolve(this._s.containsKey(e))},t}(),Vh=function(){function t(t,e){var n=this;this.gs={},this.Ne=new uo(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Fh(this),this.Ut=new Oc,this.Ue=function(t,e){return new Lh(t,(function(t){return n.referenceDelegate.ps(t)}))}(this.Ut),this.R=new mc(e),this.Qe=new Ch(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new xh(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;po("MemoryPersistence","Starting transaction:",t);var i=new Uh(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return ec.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),Uh=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return st(e,t),e}(Zu),jh=function(){function t(t){this.persistence=t,this.As=new Rh,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw go()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),ec.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),ec.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),ec.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ec.forEach(this.vs,(function(r){var i=Wo.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return ec.or([function(){return ec.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),qh=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Bh(t,e){return"firestore_clients_"+t+"_"+e}function Kh(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Gh(t,e){return"firestore_targets_"+t+"_"+e}qh.UNAUTHENTICATED=new qh(null),qh.GOOGLE_CREDENTIALS=new qh("google-credentials-uid"),qh.FIRST_PARTY=new qh("first-party-uid");var Hh=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new ho(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(vo("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),zh=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new ho(i.error.code,i.error.message)),o?new t(e,i.state,r):(vo("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Wh=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Ka(),s=0;i&&s<r.activeTargetIds.length;++s)i=zo(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(vo("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),$h=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(vo("SharedClientState","Failed to parse online state: "+e),null)},t}(),Xh=function(){function t(){this.activeTargetIds=Ka()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Qh=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Oa(To),this.started=!1,this.Os=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.$s=Bh(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new Xh),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return ut(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,a,u,c,h,l=this;return ct(this,(function(f){switch(f.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(Bh(this.persistenceKey,r)))&&(o=Wh.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.Os;u<c.length;u++)h=c[u],this.Fs(h);return this.Os=[],this.window.addEventListener("unload",(function(){return l.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Gh(this.persistenceKey,t));if(n){var r=zh.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Gh(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.$s),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return po("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){po("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){po("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(po("SharedClientState","EVENT",n.key,n.newValue),n.key===this.$s)return void vo("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return ut(e,void 0,void 0,(function(){var t,e,r,i,o,s;return ct(this,(function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=uo.o;if(null!=t)try{var n=JSON.parse(t);bo("number"==typeof n),e=n}catch(t){vo("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==uo.o&&this.sequenceNumberHandler(s);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.Os.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.$s,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new Hh(this.currentUser,t,e,n),i=Kh(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=Kh(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=Gh(this.persistenceKey,t),i=new zh(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return Wh.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Hh.Vs(new qh(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return zh.Vs(r,e)},t.prototype.js=function(t){return $h.Vs(t)},t.prototype.ii=function(t){return ut(this,void 0,void 0,(function(){return ct(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(po("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.syncEngine.hi(s,a).then((function(){n.ks=r}))},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=Ka();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),Yh=function(){function t(){this.li=new Xh,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new Xh,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Jh=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Zh=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){po("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){po("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),tl={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},el=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),nl=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return st(e,t),e.prototype.ki=function(t,e,n,r){return new Promise((function(i,o){var s=new ao;s.listenOnce(no.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case eo.NO_ERROR:var e=s.getResponseJson();po("Connection","XHR received:",JSON.stringify(e)),i(e);break;case eo.TIMEOUT:po("Connection",'RPC "'+t+'" timed out'),o(new ho(co.DEADLINE_EXCEEDED,"Request time out"));break;case eo.HTTP_ERROR:var n=s.getStatus();if(po("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(co).indexOf(e)>=0?e:co.UNKNOWN}(r.status);o(new ho(a,r.message))}else o(new ho(co.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new ho(co.UNAVAILABLE,"Connection failed."));break;default:go()}}finally{po("Connection",'RPC "'+t+'" completed.')}}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},e.prototype.$i=function(t,e){var n,r=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=new Qi,o=Jn(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(s.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vt())||"object"==typeof navigator&&"ReactNative"===navigator.product||vt().indexOf("Electron/")>=0||function(){var t=vt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()||vt().indexOf("MSAppHost/")>=0||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(s.httpHeadersOverwriteParam="$httpHeaders");var a=r.join("");po("Connection","Creating WebChannel: "+a,s);var u=i.createWebChannel(a,s),c=!1,h=!1,l=new el({Ei:function(t){h?po("Connection","Not sending because WebChannel is closed:",t):(c||(po("Connection","Opening WebChannel transport."),u.open(),c=!0),po("Connection","WebChannel sending:",t),u.send(t))},Ti:function(){return u.close()}}),f=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return f(u,so.EventType.OPEN,(function(){h||po("Connection","WebChannel transport opened.")})),f(u,so.EventType.CLOSE,(function(){h||(h=!0,po("Connection","WebChannel transport closed"),l.Vi())})),f(u,so.EventType.ERROR,(function(t){h||(h=!0,mo("Connection","WebChannel transport errored:",t),l.Vi(new ho(co.UNAVAILABLE,"The operation could not be completed")))})),f(u,so.EventType.MESSAGE,(function(t){var e;if(!h){var n=t.data[0];bo(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){po("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=Ta[t];if(void 0!==e)return Da(e)}(o),a=i.message;void 0===s&&(s=co.INTERNAL,a="Unknown error status: "+o+" with message "+i.message),h=!0,l.Vi(new ho(s,a)),u.close()}else po("Connection","WebChannel received:",n),l.Si(n)}})),f(o,ro.STAT_EVENT,(function(t){t.stat===io?po("Connection","Detected buffering proxy"):t.stat===oo&&po("Connection","Detected no buffering proxy")})),setTimeout((function(){l.Pi()}),0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);po("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then((function(t){return po("RestConnection","Received: ",t),t}),(function(e){throw mo("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Oi=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.4.2",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=tl[t];return this.Di+"/v1/"+e+":"+n},t}());
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function rl(){return"undefined"!=typeof window?window:null}function il(){return"undefined"!=typeof document?document:null}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ol(t){return new eu(t,!0)}var sl=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&po("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Qi=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),al=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new sl(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return ut(this,void 0,void 0,(function(){return ct(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return ut(this,void 0,void 0,(function(){return ct(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return ut(this,void 0,void 0,(function(){return ct(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===co.RESOURCE_EXHAUSTED?(vo(e.toString()),vo("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===co.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new ho(co.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return ut(t,void 0,void 0,(function(){return ct(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return po("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(po("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),ul=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return st(e,t),e.prototype.wr=function(t){return this.Hi.$i("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:go()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(bo(void 0===e||"string"==typeof e),Mo.fromBase64String(e||"")):(bo(void 0===e||e instanceof Uint8Array),Mo.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?co.UNKNOWN:Da(t.code);return new ho(e,t.message||"")}(a);n=new $a(r,i,o,s||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=cu(t,r.document.name),o=ou(r.document.updateTime);var a=new as({mapValue:{fields:r.document.fields}}),u=(s=cs.newFoundDocument(i,o,a),r.targetIds||[]),c=r.removedTargetIds||[];n=new za(u,c,s.key,s)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=cu(t,r.document),o=r.readTime?ou(r.readTime):No.min(),a=cs.newNoDocument(i,o),s=r.removedTargetIds||[],n=new za([],s,a.key,a);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=cu(t,r.document),o=r.removedTargetIds||[],n=new za([],o,i,null);else{if(!("filter"in e))return go();e.filter;var h=e.filter;h.targetId,r=h.count||0,i=new Na(r),o=h.targetId,n=new Wa(o,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return No.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?No.min():e.readTime?ou(e.readTime):No.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=fu(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=ds(r)?{documents:yu(t,r)}:{query:gu(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=ru(t,e.resumeToken):e.snapshotVersion.compareTo(No.min())>0&&(n.readTime=nu(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return go()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=fu(this.R),e.removeTarget=t,this.cr(e)},e}(al),cl=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return st(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.$i("Write",t)},e.prototype.onMessage=function(t){if(bo(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(bo(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?ou(t.updateTime):ou(e);return n.isEqual(No.min())&&(n=ou(e)),new ca(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=ou(t.commitTime);return this.listener.Tr(n,e)}return bo(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=fu(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return vu(e.R,t)}))};this.cr(n)},e}(al),hl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return st(e,t),e.prototype.br=function(){if(this.Rr)throw new ho(co.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===co.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new ho(co.UNKNOWN,t.toString())}))},e.prototype.Oi=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Oi(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===co.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new ho(co.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),ll=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(vo(e),this.Vr=!1):po("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),fl=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.Or=new Map,this.$r=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return ut(o,void 0,void 0,(function(){return ct(this,(function(t){switch(t.label){case 0:return Il(this)?(po("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return ut(this,void 0,void 0,(function(){var e;return ct(this,(function(n){switch(n.label){case 0:return(e=wo(t)).$r.add(4),[4,dl(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.$r.delete(4),[4,pl(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new ll(n,r)};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function pl(t){return ut(this,void 0,void 0,(function(){var e,n;return ct(this,(function(r){switch(r.label){case 0:if(!Il(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function dl(t){return ut(this,void 0,void 0,(function(){var e,n;return ct(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function vl(t,e){var n=wo(t);n.Or.has(e.targetId)||(n.Or.set(e.targetId,e),wl(n)?bl(n):Ml(n).er()&&yl(n,e))}function ml(t,e){var n=wo(t),r=Ml(n);n.Or.delete(e),r.er()&&gl(n,e),0===n.Or.size&&(r.er()?r.ir():Il(n)&&n.Br.set("Unknown"))}function yl(t,e){t.qr.U(e.targetId),Ml(t).mr(e)}function gl(t,e){t.qr.U(e),Ml(t).yr(e)}function bl(t){t.qr=new Qa({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.Or.get(e)||null}}),Ml(t).start(),t.Br.Sr()}function wl(t){return Il(t)&&!Ml(t).tr()&&t.Or.size>0}function Il(t){return 0===wo(t).$r.size}function El(t){t.qr=void 0}function Tl(t){return ut(this,void 0,void 0,(function(){return ct(this,(function(e){return t.Or.forEach((function(e,n){yl(t,e)})),[2]}))}))}function _l(t,e){return ut(this,void 0,void 0,(function(){return ct(this,(function(n){return El(t),wl(t)?(t.Br.Nr(e),bl(t)):t.Br.set("Unknown"),[2]}))}))}function Sl(t,e,n){return ut(this,void 0,void 0,(function(){var r,i,o;return ct(this,(function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof $a&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return ut(this,void 0,void 0,(function(){var n,r,i,o;return ct(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?(o=i[r],t.Or.has(o)?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:s.sent(),t.Or.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),po("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Al(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof za?t.qr.X(e):e instanceof Wa?t.qr.rt(e):t.qr.et(e),n.isEqual(No.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Eh(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Or.get(r);i&&t.Or.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.Or.get(e);if(n){t.Or.set(e,n.withResumeToken(Mo.EMPTY_BYTE_STRING,n.snapshotVersion)),gl(t,e);var r=new vc(n.target,e,1,n.sequenceNumber);yl(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return po("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Al(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function Al(t,e,n){return ut(this,void 0,void 0,(function(){var r=this;return ct(this,(function(i){switch(i.label){case 0:if(!sc(e))throw e;return t.$r.add(1),[4,dl(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return Eh(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return ut(r,void 0,void 0,(function(){return ct(this,(function(e){switch(e.label){case 0:return po("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.$r.delete(1),[4,pl(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Nl(t,e){return e().catch((function(n){return Al(t,n,e)}))}function kl(t){return ut(this,void 0,void 0,(function(){var e,n,r,i,o;return ct(this,(function(s){switch(s.label){case 0:e=wo(t),n=Fl(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return Il(t)&&t.kr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,_h(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=Fl(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Al(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Dl(e)&&Ol(e),[2]}}))}))}function Dl(t){return Il(t)&&!Fl(t).tr()&&t.kr.length>0}function Ol(t){Fl(t).start()}function Cl(t){return ut(this,void 0,void 0,(function(){return ct(this,(function(e){return Fl(t).Ar(),[2]}))}))}function Rl(t){return ut(this,void 0,void 0,(function(){var e,n,r,i;return ct(this,(function(o){for(e=Fl(t),n=0,r=t.kr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]}))}))}function Pl(t,e,n){return ut(this,void 0,void 0,(function(){var r,i;return ct(this,(function(o){switch(o.label){case 0:return r=t.kr.shift(),i=dc.from(r,e,n),[4,Nl(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,kl(t)];case 2:return o.sent(),[2]}}))}))}function xl(t,e){return ut(this,void 0,void 0,(function(){return ct(this,(function(n){switch(n.label){case 0:return e&&Fl(t).pr?[4,function(t,e){return ut(this,void 0,void 0,(function(){var n,r;return ct(this,(function(i){switch(i.label){case 0:return ka(r=e.code)&&r!==co.ABORTED?(n=t.kr.shift(),Fl(t).sr(),[4,Nl(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,kl(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Dl(t)&&Ol(t),[2]}}))}))}function Ll(t,e){return ut(this,void 0,void 0,(function(){var n;return ct(this,(function(r){switch(r.label){case 0:return n=wo(t),e?(n.$r.delete(2),[4,pl(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.$r.add(2),[4,dl(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Ml(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=wo(t);return r.br(),new ul(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Tl.bind(null,t),Ri:_l.bind(null,t),_r:Sl.bind(null,t)}),t.Mr.push((function(n){return ut(e,void 0,void 0,(function(){return ct(this,(function(e){switch(e.label){case 0:return n?(t.Ur.sr(),wl(t)?bl(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),El(t),e.label=3;case 3:return[2]}}))}))}))),t.Ur}function Fl(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=wo(t);return r.br(),new cl(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Cl.bind(null,t),Ri:xl.bind(null,t),Ir:Rl.bind(null,t),Tr:Pl.bind(null,t)}),t.Mr.push((function(n){return ut(e,void 0,void 0,(function(){return ct(this,(function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,kl(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(po("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}}))}))}))),t.Qr
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var Vl=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new tc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ho(co.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Ul(t,e){if(vo("AsyncQueue",e+": "+t),sc(t))return new ho(co.UNAVAILABLE,e+": "+t);throw t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var jl=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||Wo.comparator(e.key,n.key)}:function(t,e){return Wo.comparator(t.key,e.key)},this.keyedMap=Va(),this.sortedSet=new Oa(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),ql=function(){function t(){this.Kr=new Oa(Wo.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):go():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),Bl=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,jl.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&qs(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Kl=function(){this.Wr=void 0,this.listeners=[]},Gl=function(){this.queries=new eh((function(t){return Bs(t)}),qs),this.onlineState="Unknown",this.Gr=new Set};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Hl(t,e){return ut(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return ct(this,(function(c){switch(c.label){case 0:if(n=wo(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new Kl),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=Ul(a,"Initialization of query '"+Ks(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&Xl(n),[2]}}))}))}function zl(t,e){return ut(this,void 0,void 0,(function(){var n,r,i,o,s;return ct(this,(function(a){return n=wo(t),r=e.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function Wl(t,e){for(var n=wo(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,u=n.queries.get(a);if(u){for(var c=0,h=u.listeners;c<h.length;c++)h[c].Hr(s)&&(r=!0);u.Wr=s}}r&&Xl(n)}function $l(t,e,n){var r=wo(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Xl(t){t.Gr.forEach((function(t){t.next()}))}var Ql=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Bl(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=Bl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),Yl=function(t){this.key=t},Jl=function(t){this.key=t},Zl=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=qa(),this.mutatedKeys=qa(),this.lo=Hs(t),this.fo=new jl(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new ql,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=Ps(this.query)&&i.size===this.query.limit?i.last():null,c=xs(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var h=i.get(t),l=Gs(n.query,e)?e:null,f=!!h&&n.mutatedKeys.has(h.key),p=!!l&&(l.hasLocalMutations||n.mutatedKeys.has(l.key)&&l.hasCommittedMutations),d=!1;h&&l?h.data.isEqual(l.data)?f!==p&&(r.track({type:3,doc:l}),d=!0):n.yo(h,l)||(r.track({type:2,doc:l}),d=!0,(u&&n.lo(l,u)>0||c&&n.lo(l,c)<0)&&(a=!0)):!h&&l?(r.track({type:0,doc:l}),d=!0):h&&!l&&(r.track({type:1,doc:h}),d=!0,(u||c)&&(a=!0)),d&&(l?(s=s.add(l),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),Ps(this.query)||xs(this.query))for(;s.size>this.query.limit;){var h=Ps(this.query)?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return go()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)})),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new Bl(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new ql,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=qa(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new Jl(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new Yl(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=qa();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return Bl.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),tf=function(t,e,n){this.query=t,this.targetId=e,this.view=n},ef=function(t){this.key=t,this.bo=!1},nf=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new eh((function(t){return Bs(t)}),qs),this.Vo=new Map,this.So=new Set,this.Do=new Oa(Wo.comparator),this.Co=new Map,this.No=new Rh,this.xo={},this.Fo=new Map,this.ko=Kc.Yt(),this.onlineState="Unknown",this.Oo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Oo},enumerable:!1,configurable:!0}),t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function rf(t,e){return ut(this,void 0,void 0,(function(){var n,r,i,o,s,a;return ct(this,(function(u){switch(u.label){case 0:return n=Pf(t),(o=n.Po.get(e))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,Sh(n.localStore,Us(e))];case 2:return s=u.sent(),a=n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.targetId,[4,of(n,e,r,"current"===a)];case 3:i=u.sent(),n.isPrimaryClient&&vl(n.remoteStore,s),u.label=4;case 4:return[2,i]}}))}))}function of(t,e,n,r){return ut(this,void 0,void 0,(function(){var i,o,s,a,u,c;return ct(this,(function(h){switch(h.label){case 0:return t.$o=function(e,n,r){return function(t,e,n,r){return ut(this,void 0,void 0,(function(){var i,o,s;return ct(this,(function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,Nh(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(gf(t,e.targetId,s.To),s.snapshot)]}}))}))}(t,e,n,r)},[4,Nh(t.localStore,e,!0)];case 1:return i=h.sent(),o=new Zl(e,i.Bn),s=o._o(i.documents),a=Ha.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),gf(t,n,u.To),c=new tf(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}}))}))}function sf(t,e){return ut(this,void 0,void 0,(function(){var n,r,i;return ct(this,(function(o){switch(o.label){case 0:return n=wo(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!qs(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Ah(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),ml(n.remoteStore,r.targetId),mf(n,r.targetId)})).catch($c)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return mf(n,r.targetId),[4,Ah(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function af(t,e,n){return ut(this,void 0,void 0,(function(){var r,i,o,s;return ct(this,(function(a){switch(a.label){case 0:r=xf(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=wo(t),i=Ao.now(),o=e.reduce((function(t,e){return t.add(e.key)}),qa());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Mn.pn(t,o).next((function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],h=va(c,n.get(c.key));null!=h&&s.push(new ba(c.key,h,us(h.toProto().mapValue),ha.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)}))})).then((function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}}))}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Oa(To)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,If(r,i.changes)];case 3:return a.sent(),[4,kl(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=Ul(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function uf(t,e){return ut(this,void 0,void 0,(function(){var n,r;return ct(this,(function(i){switch(i.label){case 0:n=wo(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Th(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(bo(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?bo(r.bo):t.removedDocuments.size>0&&(bo(r.bo),r.bo=!1))})),[4,If(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,$c(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function cf(t,e,n){var r=wo(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=wo(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&Xl(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function hf(t,e,n){return ut(this,void 0,void 0,(function(){var r,i,o,s,a,u;return ct(this,(function(c){switch(c.label){case 0:return(r=wo(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new Oa(Wo.comparator)).insert(o,cs.newNoDocument(o,No.min())),a=qa().add(o),u=new Ga(No.min(),new Map,new Pa(To),s,a),[4,uf(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),wf(r),[3,4];case 2:return[4,Ah(r.localStore,e,!1).then((function(){return mf(r,e,n)})).catch($c)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function lf(t,e){return ut(this,void 0,void 0,(function(){var n,r,i;return ct(this,(function(o){switch(o.label){case 0:n=wo(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Ih(n.localStore,e)];case 2:return i=o.sent(),vf(n,r,null),df(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,If(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,$c(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function ff(t,e,n){return ut(this,void 0,void 0,(function(){var r,i;return ct(this,(function(o){switch(o.label){case 0:r=wo(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=wo(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n._n.lookupMutationBatch(t,e).next((function(e){return bo(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}(r.localStore,e)];case 2:return i=o.sent(),vf(r,e,n),df(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,If(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,$c(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function pf(t,e){return ut(this,void 0,void 0,(function(){var n,r,i,o,s;return ct(this,(function(a){switch(a.label){case 0:Il((n=wo(t)).remoteStore)||po("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=wo(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e._n.getHighestUnacknowledgedBatchId(t)}))}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=Ul(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function df(t,e){(t.Fo.get(e)||[]).forEach((function(t){t.resolve()})),t.Fo.delete(e)}function vf(t,e,n){var r=wo(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function mf(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||yf(t,e)}))}function yf(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(ml(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),wf(t))}function gf(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Yl?(t.No.addReference(o.key,e),bf(t,o)):o instanceof Jl?(po("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||yf(t,o.key)):go()}}function bf(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(po("SyncEngine","New document in limbo: "+n),t.So.add(r),wf(t))}function wf(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new Wo(Ro.fromString(e)),r=t.ko.next();t.Co.set(r,new ef(n)),t.Do=t.Do.insert(n,r),vl(t.remoteStore,new vc(Us(Rs(n.path)),r,2,uo.o))}}function If(t,e,n){return ut(this,void 0,void 0,(function(){var r,i,o,s;return ct(this,(function(a){switch(a.label){case 0:return r=wo(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,a){s.push(r.$o(a,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=mh.Pn(a.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return ut(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,h;return ct(this,(function(l){switch(l.label){case 0:n=wo(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return ec.forEach(e,(function(e){return ec.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return ec.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return l.sent(),[3,4];case 3:if(!sc(r=l.sent()))throw r;return po("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=o[i],a=s.targetId,s.fromCache||(u=n.Fn.get(a),c=u.snapshotVersion,h=u.withLastLimboFreeSnapshotVersion(c),n.Fn=n.Fn.insert(a,h));return[2]}}))}))}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function Ef(t,e){return ut(this,void 0,void 0,(function(){var n,r;return ct(this,(function(i){switch(i.label){case 0:return(n=wo(t)).currentUser.isEqual(e)?[3,3]:(po("SyncEngine","User change. New user:",e.toKey()),[4,wh(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach((function(t){t.forEach((function(t){t.reject(new ho(co.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,If(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function Tf(t,e){var n=wo(t),r=n.Co.get(e);if(r&&r.bo)return qa().add(r.key);var i=qa(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=a[s],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function _f(t,e){return ut(this,void 0,void 0,(function(){var n,r,i;return ct(this,(function(o){switch(o.label){case 0:return[4,Nh((n=wo(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&gf(n,e.targetId,i.To),i)]}}))}))}function Sf(t){return ut(this,void 0,void 0,(function(){var e;return ct(this,(function(n){return[2,Dh((e=wo(t)).localStore).then((function(t){return If(e,t)}))]}))}))}function Af(t,e,n,r){return ut(this,void 0,void 0,(function(){var i,o;return ct(this,(function(s){switch(s.label){case 0:return[4,function(t,e){var n=wo(t),r=wo(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.jt(t,e).next((function(e){return e?n.Mn.pn(t,e):ec.resolve(null)}))}))}((i=wo(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,kl(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(vf(i,e,r||null),df(i,e),function(t,e){wo(wo(t)._n).Gt(e)}(i.localStore,e)):go(),s.label=4;case 4:return[4,If(i,o)];case 5:return s.sent(),[3,7];case 6:po("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}}))}))}function Nf(t,e){return ut(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return ct(this,(function(h){switch(h.label){case 0:return Pf(n=wo(t)),xf(n),!0!==e||!0===n.Oo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,kf(n,r.toArray())]);case 1:return i=h.sent(),n.Oo=!0,[4,Ll(n.remoteStore,!0)];case 2:for(h.sent(),o=0,s=i;o<s.length;o++)a=s[o],vl(n.remoteStore,a);return[3,7];case 3:return!1!==e||!1===n.Oo?[3,7]:(u=[],c=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?u.push(e):c=c.then((function(){return mf(n,e),Ah(n.localStore,e,!0)})),ml(n.remoteStore,e)})),[4,c]);case 4:return h.sent(),[4,kf(n,u)];case 5:return h.sent(),function(t){var e=wo(t);e.Co.forEach((function(t,n){ml(e.remoteStore,n)})),e.No.ts(),e.Co=new Map,e.Do=new Oa(Wo.comparator)}(n),n.Oo=!1,[4,Ll(n.remoteStore,!1)];case 6:h.sent(),h.label=7;case 7:return[2]}}))}))}function kf(t,e,n){return ut(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,h,l,f,p,d,v;return ct(this,(function(m){switch(m.label){case 0:n=wo(t),r=[],i=[],o=0,s=e,m.label=1;case 1:return o<s.length?(a=s[o],u=void 0,(c=n.Vo.get(a))&&0!==c.length?[4,Sh(n.localStore,Us(c[0]))]:[3,7]):[3,13];case 2:u=m.sent(),h=0,l=c,m.label=3;case 3:return h<l.length?(f=l[h],p=n.Po.get(f),[4,_f(n,p)]):[3,6];case 4:(d=m.sent()).snapshot&&i.push(d.snapshot),m.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,kh(n.localStore,a)];case 8:return v=m.sent(),[4,Sh(n.localStore,v)];case 9:return u=m.sent(),[4,of(n,Df(v),a,!1)];case 10:m.sent(),m.label=11;case 11:r.push(u),m.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function Df(t){return Cs(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Of(t){var e=wo(t);return wo(wo(e.localStore).persistence).fn()}function Cf(t,e,n,r){return ut(this,void 0,void 0,(function(){var i,o,s;return ct(this,(function(a){switch(a.label){case 0:return(i=wo(t)).Oo?(po("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Dh(i.localStore)];case 3:return o=a.sent(),s=Ga.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,If(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Ah(i.localStore,e,!0)];case 6:return a.sent(),mf(i,e,r),[3,8];case 7:go(),a.label=8;case 8:return[2]}}))}))}function Rf(t,e,n){return ut(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,h,l,f;return ct(this,(function(p){switch(p.label){case 0:if(!(r=Pf(t)).Oo)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(s=o[i],r.Vo.has(s)?(po("SyncEngine","Adding an already active target "+s),[3,5]):[4,kh(r.localStore,s)]):[3,6];case 2:return a=p.sent(),[4,Sh(r.localStore,a)];case 3:return u=p.sent(),[4,of(r,Df(a),u.targetId,!1)];case 4:p.sent(),vl(r.remoteStore,u),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return ct(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Ah(r.localStore,t,!1).then((function(){ml(r.remoteStore,t),mf(r,t)})).catch($c)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,l=n,p.label=7;case 7:return h<l.length?(f=l[h],[5,c(f)]):[3,10];case 8:p.sent(),p.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function Pf(t){var e=wo(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=uf.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Tf.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hf.bind(null,e),e.vo._r=Wl.bind(null,e.eventManager),e.vo.Mo=$l.bind(null,e.eventManager),e}function xf(t){var e=wo(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lf.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ff.bind(null,e),e}var Lf=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return ut(this,void 0,void 0,(function(){return ct(this,(function(e){switch(e.label){case 0:return this.R=ol(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return bh(this.persistence,new yh,t.initialUser,this.R)},t.prototype.qo=function(t){return new Vh(jh.bs,this.R)},t.prototype.Bo=function(t){return new Yh},t.prototype.terminate=function(){return ut(this,void 0,void 0,(function(){return ct(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),Mf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return st(e,t),e.prototype.initialize=function(e){return ut(this,void 0,void 0,(function(){return ct(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Oh(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,xf(this.Ko.syncEngine)];case 4:return n.sent(),[4,kl(this.Ko.remoteStore)];case 5:return n.sent(),[2]}}))}))},e.prototype.Qo=function(t){return bh(this.persistence,new yh,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new Yc(e,t.asyncQueue)},e.prototype.qo=function(t){var e=dh(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Lc.withCacheSize(this.cacheSizeBytes):Lc.DEFAULT;return new lh(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,rl(),il(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Yh},e}(Lf),Ff=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return st(e,t),e.prototype.initialize=function(e){return ut(this,void 0,void 0,(function(){var n,r=this;return ct(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof Qh?(this.sharedClientState.syncEngine={ui:Af.bind(null,n),ai:Cf.bind(null,n),hi:Rf.bind(null,n),fn:Of.bind(null,n),ci:Sf.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return ut(r,void 0,void 0,(function(){return ct(this,(function(e){switch(e.label){case 0:return[4,Nf(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=rl();if(!Qh.yt(e))throw new ho(co.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=dh(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Qh(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Mf),Vf=function(){function t(){}return t.prototype.initialize=function(t,e){return ut(this,void 0,void 0,(function(){var n=this;return ct(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return cf(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Ef.bind(null,this.syncEngine),[4,Ll(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new Gl},t.prototype.createDatastore=function(t){var e,n=ol(t.databaseInfo.databaseId),r=(e=t.databaseInfo,new nl(e));return function(t,e,n){return new hl(t,e,n)}(t.credentials,r,n)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return cf(s.syncEngine,t,0)},o=Zh.yt()?new Zh:new Jh,new fl(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new nf(t,e,n,r,i,o);return s&&(a.Oo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return ut(this,void 0,void 0,(function(){var e;return ct(this,(function(n){switch(n.label){case 0:return e=wo(t),po("RemoteStore","RemoteStore shutting down."),e.$r.add(5),[4,dl(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}(),Uf=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),jf=function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return ut(this,void 0,void 0,(function(){var e,n=this;return ct(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new ho(co.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return ut(this,void 0,void 0,(function(){var n,r,i,o,s,a;return ct(this,(function(u){switch(u.label){case 0:return n=wo(t),r=fu(n.R)+"/documents",i={documents:e.map((function(t){return uu(n.R,t)}))},[4,n.Oi("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){bo(!!e.found),e.found.name,e.found.updateTime;var n=cu(t,e.found.name),r=ou(e.found.updateTime),i=new as({mapValue:{fields:e.found.fields}});return cs.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){bo(!!e.missing),bo(!!e.readTime);var n=cu(t,e.missing),r=ou(e.readTime);return cs.newNoDocument(n,r)}(t,e):go()}(n.R,t);s.set(e.key.toString(),e)})),a=[],[2,(e.forEach((function(t){var e=s.get(t.toString());bo(!!e),a.push(e)})),a)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Sa(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return ut(this,void 0,void 0,(function(){var t,e=this;return ct(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=Wo.fromPath(n);e.mutations.push(new Aa(r,e.precondition(r)))})),[4,function(t,e){return ut(this,void 0,void 0,(function(){var n,r,i;return ct(this,(function(o){switch(o.label){case 0:return n=wo(t),r=fu(n.R)+"/documents",i={writes:e.map((function(t){return vu(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw go();e=No.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new ho(co.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?ha.updateTime(e):ha.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(No.min()))throw new ho(co.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ha.updateTime(e)}return ha.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}(),qf=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new sl(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return ut(t,void 0,void 0,(function(){var t,e,n=this;return ct(this,(function(r){return t=new jf(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!Go(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!ka(e)}return!1},t}(),Bf=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=qh.UNAUTHENTICATED,this.clientId=Eo.u(),this.credentialListener=function(){},this.receivedInitialUser=new tc,this.credentials.setChangeListener((function(t){po("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()}))}return t.prototype.getConfiguration=function(){return ut(this,void 0,void 0,(function(){return ct(this,(function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}}))}))},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then((function(){return e.credentialListener(e.user)}))},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new ho(co.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new tc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return ut(t,void 0,void 0,(function(){var t,n;return ct(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Ul(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function Kf(t,e){return ut(this,void 0,void 0,(function(){var n,r,i=this;return ct(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),po("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable((function(){return ut(i,void 0,void 0,(function(){return ct(this,(function(t){switch(t.label){case 0:return[4,wh(e.localStore,n)];case 1:return t.sent(),[2]}}))}))})))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function Gf(t,e){return ut(this,void 0,void 0,(function(){var n,r;return ct(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Hf(t)];case 1:return n=i.sent(),po("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(n){return t.asyncQueue.enqueueRetryable((function(){return function(t,e){return ut(this,void 0,void 0,(function(){var n,r;return ct(this,(function(i){switch(i.label){case 0:return(n=wo(t)).asyncQueue.verifyOperationInProgress(),po("RemoteStore","RemoteStore received new credentials"),r=Il(n),n.$r.add(3),[4,dl(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.$r.delete(3),[4,pl(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,n)}))})),t.onlineComponents=e,[2]}}))}))}function Hf(t){return ut(this,void 0,void 0,(function(){return ct(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(po("FirestoreClient","Using default OfflineComponentProvider"),[4,Kf(t,new Lf)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function zf(t){return ut(this,void 0,void 0,(function(){return ct(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(po("FirestoreClient","Using default OnlineComponentProvider"),[4,Gf(t,new Vf)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function Wf(t){return Hf(t).then((function(t){return t.persistence}))}function $f(t){return Hf(t).then((function(t){return t.localStore}))}function Xf(t){return zf(t).then((function(t){return t.remoteStore}))}function Qf(t){return zf(t).then((function(t){return t.syncEngine}))}function Yf(t){return ut(this,void 0,void 0,(function(){var e,n;return ct(this,(function(r){switch(r.label){case 0:return[4,zf(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=rf.bind(null,e.syncEngine),n.onUnlisten=sf.bind(null,e.syncEngine),n)]}}))}))}function Jf(t,e,n){var r=this;void 0===n&&(n={});var i=new tc;return t.asyncQueue.enqueueAndForget((function(){return ut(r,void 0,void 0,(function(){var r;return ct(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Uf({next:function(o){e.enqueueAndForget((function(){return zl(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new ho(co.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new ho(co.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Ql(Rs(n.path),o,{includeMetadataChanges:!0,so:!0});return Hl(t,s)},[4,Yf(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function Zf(t,e,n){var r=this;void 0===n&&(n={});var i=new tc;return t.asyncQueue.enqueueAndForget((function(){return ut(r,void 0,void 0,(function(){var r;return ct(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Uf({next:function(n){e.enqueueAndForget((function(){return zl(t,s)})),n.fromCache&&"server"===r.source?i.reject(new ho(co.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Ql(n,o,{includeMetadataChanges:!0,so:!0});return Hl(t,s)},[4,Yf(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var tp=function(t,e,n,r,i,o,s){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s},ep=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),np=new Map,rp=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},ip=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(qh.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),op=function(){function t(t){var e=this;this.oc=null,this.currentUser=qh.UNAUTHENTICATED,this.receivedInitialUser=!1,this.cc=0,this.changeListener=null,this.forceRefresh=!1,this.oc=function(){e.cc++,e.currentUser=e.uc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.cc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.oc):(this.oc(null),t.get().then((function(t){e.auth=t,e.oc&&e.auth.addAuthTokenListener(e.oc)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(po("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(bo("string"==typeof n.accessToken),new rp(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.oc),this.oc=null,this.changeListener=null},t.prototype.uc=function(){var t=this.auth&&this.auth.getUid();return bo(null===t||"string"==typeof t),new qh(t)},t}(),sp=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n,this.type="FirstParty",this.user=qh.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.hc},e=this.ac.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.lc&&(t["X-Goog-Iam-Authorization-Token"]=this.lc),t},enumerable:!1,configurable:!0}),t}(),ap=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n}return t.prototype.getToken=function(){return Promise.resolve(new sp(this.ac,this.hc,this.lc))},t.prototype.setChangeListener=function(t){t(qh.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function up(t,e,n){if(!n)throw new ho(co.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function cp(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ho(co.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function hp(t,e,n,r){if(!0===e&&!0===r)throw new ho(co.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function lp(t){if(!Wo.isDocumentKey(t))throw new ho(co.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function fp(t){if(Wo.isDocumentKey(t))throw new ho(co.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function pp(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":go()}function dp(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ho(co.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=pp(t);throw new ho(co.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function vp(t,e){if(e<=0)throw new ho(co.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var mp=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new ho(co.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new ho(co.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,hp("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),yp=function(){function t(t,e){this._persistenceKey="(lite)",this._settings=new mp({}),this._settingsFrozen=!1,t instanceof ep?(this._databaseId=t,this._credentials=new ip):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new ho(co.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ep(t.options.projectId)}(t),this._credentials=new op(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new ho(co.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new ho(co.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mp(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new ip;switch(t.type){case"gapi":var e=t.client;return bo(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new ap(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new ho(co.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return this,(t=np.get(this))&&(po("ComponentProvider","Removing Datastore"),np.delete(this),t.terminate()),Promise.resolve();var t},t}(),gp=function(){function t(t,e,n){this._converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new wp(this.firestore,this._converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),bp=function(){function t(t,e,n){this._converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),wp=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Rs(r))||this)._path=r,i.type="collection",i}return st(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new gp(this.firestore,null,new Wo(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(bp);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ip(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=St(t),up("collection","path",e),t instanceof yp)return fp(n=Ro.fromString.apply(Ro,ft([e],r))),new wp(t,null,n);if(!(t instanceof gp||t instanceof wp))throw new ho(co.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return fp(n=Ro.fromString.apply(Ro,ft([t.path],r)).child(Ro.fromString(e))),new wp(t.firestore,null,n)}function Ep(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=St(t),1===arguments.length&&(e=Eo.u()),up("doc","path",e),t instanceof yp)return lp(n=Ro.fromString.apply(Ro,ft([e],r))),new gp(t,null,new Wo(n));if(!(t instanceof gp||t instanceof wp))throw new ho(co.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return lp(n=t._path.child(Ro.fromString.apply(Ro,ft([e],r)))),new gp(t.firestore,t instanceof wp?t._converter:null,new Wo(n))}function Tp(t,e){return t=St(t),e=St(e),(t instanceof gp||t instanceof wp)&&(e instanceof gp||e instanceof wp)&&t.firestore===e.firestore&&t.path===e.path&&t._converter===e._converter}function _p(t,e){return t=St(t),e=St(e),t instanceof bp&&e instanceof bp&&t.firestore===e.firestore&&qs(t._query,e._query)&&t._converter===e._converter
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var Sp=function(){function t(){var t=this;this.fc=Promise.resolve(),this.dc=[],this.wc=!1,this._c=[],this.mc=null,this.yc=!1,this.gc=[],this.Zi=new sl(this,"async_queue_retry"),this.Ec=function(){var e=il();e&&po("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=il();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ec)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.wc},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Tc(),this.Ic(t)},t.prototype.enterRestrictedMode=function(){if(!this.wc){this.wc=!0;var t=il();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ec)}},t.prototype.enqueue=function(t){return this.Tc(),this.wc?new Promise((function(t){})):this.Ic(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.dc.push(t),e.Ac()}))},t.prototype.Ac=function(){return ut(this,void 0,void 0,(function(){var t,e=this;return ct(this,(function(n){switch(n.label){case 0:if(0===this.dc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.dc[0]()];case 2:return n.sent(),this.dc.shift(),this.Zi.reset(),[3,4];case 3:if(!sc(t=n.sent()))throw t;return po("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.dc.length>0&&this.Zi.ji((function(){return e.Ac()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Ic=function(t){var e=this,n=this.fc.then((function(){return e.yc=!0,t().catch((function(t){throw e.mc=t,e.yc=!1,vo("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.yc=!1,t}))}));return this.fc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Tc(),this.gc.indexOf(t)>-1&&(e=0);var i=Vl.createAndSchedule(this,t,e,n,(function(t){return r.Rc(t)}));return this._c.push(i),i},t.prototype.Tc=function(){this.mc&&go()},t.prototype.verifyOperationInProgress=function(){},t.prototype.bc=function(){return ut(this,void 0,void 0,(function(){var t;return ct(this,(function(e){switch(e.label){case 0:return[4,t=this.fc];case 1:e.sent(),e.label=2;case 2:if(t!==this.fc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.vc=function(t){for(var e=0,n=this._c;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Pc=function(t){var e=this;return this.bc().then((function(){e._c.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e._c;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.bc()}))},t.prototype.Vc=function(t){this.gc.push(t)},t.prototype.Rc=function(t){var e=this._c.indexOf(t);this._c.splice(e,1)},t}();function Ap(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Np=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._queue=new Sp,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return st(e,t),e.prototype._terminate=function(){return this._firestoreClient||Dp(this),this._firestoreClient.terminate()},e}(yp);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function kp(t){return t._firestoreClient||Dp(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Dp(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new tp(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new Bf(t._credentials,t._queue,r)}function Op(t,e,n){var r=this,i=new tc;return t.asyncQueue.enqueue((function(){return ut(r,void 0,void 0,(function(){var r;return ct(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Kf(t,n)];case 1:return o.sent(),[4,Gf(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===co.FAILED_PRECONDITION||t.code===co.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function Cp(t){if(t._initialized||t._terminated)throw new ho(co.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Rp=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new ho(co.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xo(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),Pp=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Mo.fromBase64String(e))}catch(e){throw new ho(co.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Mo.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),xp=function(t){this._methodName=t},Lp=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new ho(co.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ho(co.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return To(this._lat,t._lat)||To(this._long,t._long)},t}(),Mp=/^__.*__$/,Fp=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new ba(t,this.data,this.fieldMask,e,this.fieldTransforms):new ga(t,this.data,e,this.fieldTransforms)},t}(),Vp=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new ba(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Up(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw go()}}var jp=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Sc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dc",{get:function(){return this.settings.Dc},enumerable:!1,configurable:!0}),t.prototype.Cc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Nc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Fc(t),r},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Sc(),r},t.prototype.Oc=function(t){return this.Cc({path:void 0,xc:!0})},t.prototype.$c=function(t){return sd(t,this.settings.methodName,this.settings.Mc||!1,this.path,this.settings.Lc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Sc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Fc(this.path.get(t))},t.prototype.Fc=function(t){if(0===t.length)throw this.$c("Document fields must not be empty");if(Up(this.Dc)&&Mp.test(t))throw this.$c('Document fields cannot begin and end with "__"')},t}(),qp=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||ol(t)}return t.prototype.Bc=function(t,e,n,r){return void 0===r&&(r=!1),new jp({Dc:t,methodName:e,Lc:n,path:xo.emptyPath(),xc:!1,Mc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function Bp(t){var e=t._freezeSettings(),n=ol(t._databaseId);return new qp(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Kp(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Bc(o.merge||o.mergeFields?2:0,e,n,i);nd("Data must be an object, but it was:",s,r);var a,u,c=td(r,s);if(o.merge)a=new Lo(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var h=[],l=0,f=o.mergeFields;l<f.length;l++){var p=rd(e,f[l],n);if(!s.contains(p))throw new ho(co.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");ad(h,p)||h.push(p)}a=new Lo(h),u=s.fieldTransforms.filter((function(t){return a.covers(t.field)}))}else a=null,u=s.fieldTransforms;return new Fp(new as(c),a,u)}var Gp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return st(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Dc)throw 1===t.Dc?t.$c(this._methodName+"() can only appear at the top level of your update data"):t.$c(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(xp);function Hp(t,e,n){return new jp({Dc:3,Lc:e.settings.Lc,methodName:t._methodName,xc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var zp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return st(e,t),e.prototype._toFieldTransform=function(t){return new ua(t.path,new ta)},e.prototype.isEqual=function(t){return t instanceof e},e}(xp),Wp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return st(e,t),e.prototype._toFieldTransform=function(t){var e=Hp(this,t,!0),n=this.qc.map((function(t){return Zp(t,e)})),r=new ea(n);return new ua(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(xp),$p=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return st(e,t),e.prototype._toFieldTransform=function(t){var e=Hp(this,t,!0),n=this.qc.map((function(t){return Zp(t,e)})),r=new ra(n);return new ua(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(xp),Xp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return st(e,t),e.prototype._toFieldTransform=function(t){var e=new oa(t.R,Xs(t.R,this.Uc));return new ua(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(xp);function Qp(t,e,n,r){var i=t.Bc(1,e,n);nd("Data must be an object, but it was:",i,r);var o=[],s=as.empty();Do(r,(function(t,r){var a=od(e,t,n);r=St(r);var u=i.kc(a);if(r instanceof Gp)o.push(a);else{var c=Zp(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new Lo(o);return new Vp(s,a,i.fieldTransforms)}function Yp(t,e,n,r,i,o){var s=t.Bc(1,e,n),a=[rd(e,r,n)],u=[i];if(o.length%2!=0)throw new ho(co.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(rd(e,o[c])),u.push(o[c+1]);for(var h=[],l=as.empty(),f=a.length-1;f>=0;--f)if(!ad(h,a[f])){var p=a[f],d=u[f];d=St(d);var v=s.kc(p);if(d instanceof Gp)h.push(p);else{var m=Zp(d,v);null!=m&&(h.push(p),l.set(p,m))}}var y=new Lo(h);return new Vp(l,y,s.fieldTransforms)}function Jp(t,e,n,r){return void 0===r&&(r=!1),Zp(n,t.Bc(r?4:3,e))}function Zp(t,e){if(ed(t=St(t)))return nd("Unsupported field value:",e,t),td(t,e);if(t instanceof xp)return function(t,e){if(!Up(e.Dc))throw e.$c(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.$c(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xc&&4!==e.Dc)throw e.$c("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Zp(o[i],e.Oc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=St(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Xs(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Ao.fromDate(t);return{timestampValue:nu(e.R,n)}}if(t instanceof Ao)return n=new Ao(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:nu(e.R,n)};if(t instanceof Lp)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Pp)return{bytesValue:ru(e.R,t._byteString)};if(t instanceof gp){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.$c("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:su(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.$c("Unsupported field value: "+pp(t))}(t,e)}function td(t,e){var n={};return Oo(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Do(t,(function(t,r){var i=Zp(r,e.Nc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function ed(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Ao||t instanceof Lp||t instanceof Pp||t instanceof gp||t instanceof xp)}function nd(t,e,n){if(!ed(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=pp(n);throw"an object"===r?e.$c(t+" a custom object"):e.$c(t+" "+r)}}function rd(t,e,n){if((e=St(e))instanceof Rp)return e._internalPath;if("string"==typeof e)return od(t,e);throw sd("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var id=new RegExp("[~\\*/\\[\\]]");function od(t,e,n){if(e.search(id)>=0)throw sd("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Rp.bind.apply(Rp,ft([void 0],e.split(".")))))._internalPath}catch(r){throw sd("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function sd(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new ho(co.INVALID_ARGUMENT,(a+=". ")+t+u)}function ad(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ud=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new gp(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new cd(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(hd("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),cd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return st(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(ud);function hd(t,e){return"string"==typeof e?od(t,e):e instanceof Rp?e._internalPath:e._delegate._internalPath}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ld=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),fd=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return st(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new pd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(hd("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(ud),pd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return st(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(fd),dd=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new ld(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new pd(n._firestore,n._userDataWriter,r.key,r,new ld(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query._converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ho(co.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){var r=new pd(t._firestore,t._userDataWriter,e.doc.key,e.doc,new ld(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter);return e.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new pd(t._firestore,t._userDataWriter,e.doc.key,e.doc,new ld(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:vd(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function vd(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return go()}}function md(t,e){return t instanceof fd&&e instanceof fd?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof dd&&e instanceof dd&&t._firestore===e._firestore&&_p(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function yd(t){if(xs(t)&&0===t.explicitOrderBy.length)throw new ho(co.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var gd=function(){};function bd(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var wd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qc=e,i.Kc=n,i.jc=r,i.type="where",i}return st(e,t),e.prototype._apply=function(t){var e=Bp(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new ho(co.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Nd(s,o);for(var u=[],c=0,h=s;c<h.length;c++){var l=h[c];u.push(Ad(r,t,l))}a={arrayValue:{values:u}}}else a=Ad(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Nd(s,o),a=Jp(n,"where",s,"in"===o||"not-in"===o);var f=vs.create(i,o,a);return function(t,e){if(e.g()){var n=Ms(t);if(null!==n&&!n.isEqual(e.field))throw new ho(co.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Ls(t);null!==r&&kd(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new ho(co.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new ho(co.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t._query,0,e,t.firestore._databaseId,this.Qc,this.Kc,this.jc);return new bp(t.firestore,t._converter,function(t,e){var n=t.filters.concat([e]);return new Os(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(gd),Id=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qc=e,r.Wc=n,r.type="orderBy",r}return st(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new ho(co.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new ho(co.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new As(e,n);return function(t,e){if(null===Ls(t)){var n=Ms(t);null!==n&&kd(t,n,e.field)}}(t,r),r}(t._query,this.Qc,this.Wc);return new bp(t.firestore,t._converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Os(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(gd),Ed=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Gc=n,i.zc=r,i}return st(e,t),e.prototype._apply=function(t){return new bp(t.firestore,t._converter,js(t._query,this.Gc,this.zc))},e}(gd),Td=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return st(e,t),e.prototype._apply=function(t){var e=Sd(t,this.type,this.Hc,this.Jc);return new bp(t.firestore,t._converter,function(t,e){return new Os(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(gd),_d=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return st(e,t),e.prototype._apply=function(t){var e=Sd(t,this.type,this.Hc,this.Jc);return new bp(t.firestore,t._converter,function(t,e){return new Os(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(gd);function Sd(t,e,n,r){if(n[0]=St(n[0]),n[0]instanceof ud)return function(t,e,n,r,i){if(!r)throw new ho(co.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Vs(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(es(e,r.key));else{var c=r.data.field(u.field);if(qo(c))throw new ho(co.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=u.field.canonicalString();throw new ho(co.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new _s(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=Bp(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new ho(co.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new ho(co.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Fs(t)&&-1!==c.indexOf("/"))throw new ho(co.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(Ro.fromString(c));if(!Wo.isDocumentKey(h))throw new ho(co.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var l=new Wo(h);a.push(es(e,l))}else{var f=Jp(n,r,c);a.push(f)}}return new _s(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function Ad(t,e,n){if("string"==typeof(n=St(n))){if(""===n)throw new ho(co.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Fs(e)&&-1!==n.indexOf("/"))throw new ho(co.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Ro.fromString(n));if(!Wo.isDocumentKey(r))throw new ho(co.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return es(t,new Wo(r))}if(n instanceof gp)return es(t,n._key);throw new ho(co.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+pp(n)+".")}function Nd(t,e){if(!Array.isArray(t)||0===t.length)throw new ho(co.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new ho(co.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function kd(t,e,n){if(!n.isEqual(e))throw new ho(co.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Dd=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),$o(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Uo(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(jo(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw go()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Do(t.fields||{},(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new Lp(Uo(t.latitude),Uo(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Bo(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Ko(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=Vo(t);return new Ao(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Ro.fromString(t);bo(Ou(n));var r=new ep(n.get(1),n.get(3)),i=new Wo(n.popFirst(5));return r.isEqual(e)||vo("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Od(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Cd=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return st(e,t),e.prototype.convertBytes=function(t){return new Pp(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new gp(this.firestore,null,e)},e}(Dd),Rd=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Bp(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=Pd(t,this._firestore),i=Od(r._converter,e,n),o=Kp(this._dataReader,"WriteBatch.set",r._key,i,null!==r._converter,n);return this._mutations.push(o.toMutation(r._key,ha.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=Pd(t,this._firestore);return o="string"==typeof(e=St(e))||e instanceof Rp?Yp(this._dataReader,"WriteBatch.update",s._key,e,n,r):Qp(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,ha.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=Pd(t,this._firestore);return this._mutations=this._mutations.concat(new Sa(e._key,ha.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new ho(co.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Pd(t,e){if((t=St(t)).firestore!==e)throw new ho(co.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var xd=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return st(e,t),e.prototype.convertBytes=function(t){return new Pp(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new gp(this.firestore,null,e)},e}(Dd);function Ld(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=dp(t,gp);var o=dp(t.firestore,Np),s=Bp(o);return Fd(o,[("string"==typeof(e=St(e))||e instanceof Rp?Yp(s,"updateDoc",t._key,e,n,r):Qp(s,"updateDoc",t._key,e)).toMutation(t._key,ha.exists(!0))])}function Md(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=St(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||Ap(i[a])||(s=i[a],a++);var u,c,h,l={includeMetadataChanges:s.includeMetadataChanges};if(Ap(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof gp)c=dp(t.firestore,Np),h=Rs(t._key.path),u={next:function(e){i[a]&&i[a](Vd(c,t,e))},error:i[a+1],complete:i[a+2]};else{var p=dp(t,bp);c=dp(p.firestore,Np),h=p._query;var d=new xd(c);u={next:function(t){i[a]&&i[a](new dd(c,d,p,t))},error:i[a+1],complete:i[a+2]},yd(t._query)}return function(t,e,n,r){var i=this,o=new Uf(r),s=new Ql(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return ut(i,void 0,void 0,(function(){var e;return ct(this,(function(n){switch(n.label){case 0:return e=Hl,[4,Yf(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.Wo(),t.asyncQueue.enqueueAndForget((function(){return ut(i,void 0,void 0,(function(){var e;return ct(this,(function(n){switch(n.label){case 0:return e=zl,[4,Yf(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(kp(c),h,l,u)}function Fd(t,e){return function(t,e){var n=this,r=new tc;return t.asyncQueue.enqueueAndForget((function(){return ut(n,void 0,void 0,(function(){var n;return ct(this,(function(i){switch(i.label){case 0:return n=af,[4,Qf(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(kp(t),e)}function Vd(t,e,n){var r=n.docs.get(e._key),i=new xd(t);return new fd(t,i,e._key,r,new ld(n.hasPendingWrites,n.fromCache),e._converter)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ud=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return st(e,t),e.prototype.get=function(e){var n=this,r=Pd(e,this._firestore),i=new xd(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new fd(n._firestore,i,r._key,t._document,new ld(!1,!1),r._converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=Bp(t)}return t.prototype.get=function(t){var e=this,n=Pd(t,this._firestore),r=new Cd(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return go();var i=t[0];if(i.isFoundDocument())return new ud(e._firestore,r,i.key,i,n._converter);if(i.isNoDocument())return new ud(e._firestore,r,n._key,null,n._converter);throw go()}))},t.prototype.set=function(t,e,n){var r=Pd(t,this._firestore),i=Od(r._converter,e,n),o=Kp(this._dataReader,"Transaction.set",r._key,i,null!==r._converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=Pd(t,this._firestore);return o="string"==typeof(e=St(e))||e instanceof Rp?Yp(this._dataReader,"Transaction.update",s._key,e,n,r):Qp(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=Pd(t,this._firestore);return this._transaction.delete(e._key),this},t}());
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function jd(){if("undefined"==typeof Uint8Array)throw new ho(co.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function qd(){if("undefined"==typeof atob)throw new ho(co.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Bd=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return qd(),new t(Pp.fromBase64String(e))},t.fromUint8Array=function(e){return jd(),new t(Pp.fromUint8Array(e))},t.prototype.toBase64=function(){return qd(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return jd(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),Kd=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Cp(t=dp(t,Np));var n=kp(t),r=t._freezeSettings(),i=new Vf;return Op(n,i,new Mf(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Cp(t=dp(t,Np));var e=kp(t),n=t._freezeSettings(),r=new Vf;return Op(e,r,new Ff(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new ho(co.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new tc;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return ut(e,void 0,void 0,(function(){var e;return ct(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return ut(this,void 0,void 0,(function(){var e;return ct(this,(function(n){switch(n.label){case 0:return rc.yt()?(e=t+"main",[4,rc.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(dh(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),Gd=function(){function t(t,e,n){var r=this;this._delegate=e,this.Yc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof ep||(this.Xc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=dp(t,yp))._getSettings();"firestore.googleapis.com"!==r.host&&r.host!==e&&mo("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this._delegate,t,e)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return ut(e,void 0,void 0,(function(){var e,n;return ct(this,(function(r){switch(r.label){case 0:return[4,Wf(t)];case 1:return e=r.sent(),[4,Xf(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=wo(t);return e.$r.delete(0),pl(e)}(n))]}}))}))}))}(kp(dp(this._delegate,Np)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return ut(e,void 0,void 0,(function(){var e,n;return ct(this,(function(r){switch(r.label){case 0:return[4,Wf(t)];case 1:return e=r.sent(),[4,Xf(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return ut(this,void 0,void 0,(function(){var e;return ct(this,(function(n){switch(n.label){case 0:return(e=wo(t)).$r.add(0),[4,dl(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(kp(dp(this._delegate,Np)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&hp("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Yc.enableMultiTabIndexedDbPersistence(this):this.Yc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Yc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Xc&&(this.Xc._removeServiceInstance("firestore"),this.Xc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new tc;return t.asyncQueue.enqueueAndForget((function(){return ut(e,void 0,void 0,(function(){var e;return ct(this,(function(r){switch(r.label){case 0:return e=pf,[4,Qf(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(kp(dp(this._delegate,Np)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Uf(e);return t.asyncQueue.enqueueAndForget((function(){return ut(n,void 0,void 0,(function(){var e;return ct(this,(function(n){switch(n.label){case 0:return e=function(t,e){wo(t).Gr.add(e),e.next()},[4,Yf(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return ut(n,void 0,void 0,(function(){var e;return ct(this,(function(n){switch(n.label){case 0:return e=function(t,e){wo(t).Gr.delete(e)},[4,Yf(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(kp(t=dp(t,Np)),Ap(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Xc)throw new ho(co.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Xc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new iv(this,Ip(this._delegate,t))}catch(t){throw Qd(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new Xd(this,Ep(this._delegate,t))}catch(t){throw Qd(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new ev(this,function(t,e){if(t=dp(t,yp),up("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ho(co.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new bp(t,null,function(t){return new Os(Ro.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw Qd(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new tc;return t.asyncQueue.enqueueAndForget((function(){return ut(n,void 0,void 0,(function(){var n;return ct(this,(function(i){switch(i.label){case 0:return[4,function(t){return zf(t).then((function(t){return t.datastore}))}(t)];case 1:return n=i.sent(),new qf(t.asyncQueue,n,e,r).run(),[2]}}))}))})),r.promise}(kp(t),(function(n){return e(new Ud(t,n))}))}(this._delegate,(function(n){return t(new zd(e,n))}))},t.prototype.batch=function(){var t=this;return kp(this._delegate),new Wd(new Rd(this._delegate,(function(e){return Fd(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new ho(co.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new ho(co.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),Hd=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return st(e,t),e.prototype.convertBytes=function(t){return new Bd(new Pp(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return Xd.Zc(e,this.firestore,null)},e}(Dd);var zd=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Hd(t)}return t.prototype.get=function(t){var e=this,n=ov(t);return this._delegate.get(n).then((function(t){return new Zd(e._firestore,new fd(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n._converter))}))},t.prototype.set=function(t,e,n){var r=ov(t);return n?(cp("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=ov(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,ft([s,e,n],i)),this},t.prototype.delete=function(t){var e=ov(t);return this._delegate.delete(e),this},t}(),Wd=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=ov(t);return n?(cp("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=ov(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,ft([s,e,n],i)),this},t.prototype.delete=function(t){var e=ov(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),$d=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new pd(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new tv(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.tu=function(e,n){var r=t.eu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new Hd(e),n),i.set(n,o)),o},t}();$d.eu=new WeakMap;var Xd=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Hd(t)}return t.nu=function(e,n,r){if(e.length%2!=0)throw new ho(co.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new gp(n._delegate,r,new Wo(e)))},t.Zc=function(e,n,r){return new t(n,new gp(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new iv(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new iv(this.firestore,Ip(this._delegate,t))}catch(t){throw Qd(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=St(t))instanceof gp&&Tp(this._delegate,t)},t.prototype.set=function(t,e){e=cp("DocumentReference.set",e);try{return function(t,e,n){t=dp(t,gp);var r=dp(t.firestore,Np),i=Od(t._converter,e,n);return Fd(r,[Kp(Bp(r),"setDoc",t._key,i,null!==t._converter,n).toMutation(t._key,ha.none())])}(this._delegate,t,e)}catch(t){throw Qd(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Ld(this._delegate,t):Ld.apply(void 0,ft([this._delegate,t,e],n))}catch(t){throw Qd(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return Fd(dp((t=this._delegate).firestore,Np),[new Sa(t._key,ha.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Yd(e),i=Jd(e,(function(e){return new Zd(t.firestore,new fd(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate._converter))}));return Md(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=dp(t,gp);var e=dp(t.firestore,Np),n=kp(e),r=new xd(e);return function(t,e){var n=this,r=new tc;return t.asyncQueue.enqueueAndForget((function(){return ut(n,void 0,void 0,(function(){var n;return ct(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return ut(this,void 0,void 0,(function(){var r,i;return ct(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=wo(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Mn.mn(t,e)}))}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new ho(co.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Ul(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,$f(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new fd(e,r,t._key,n,new ld(null!==n&&n.hasLocalMutations,!0),t._converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=dp(t,gp);var e=dp(t.firestore,Np);return Jf(kp(e),t._key,{source:"server"}).then((function(n){return Vd(e,t,n)}))}(this._delegate):function(t){t=dp(t,gp);var e=dp(t.firestore,Np);return Jf(kp(e),t._key).then((function(n){return Vd(e,t,n)}))}(this._delegate)).then((function(t){return new Zd(e.firestore,new fd(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate._converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter($d.tu(this.firestore,e)):this._delegate.withConverter(null))},t}();function Qd(t,e,n){return t.message=t.message.replace(e,n),t}function Yd(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Ap(r))return r}return{}}function Jd(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Ap(t[0])?t[0]:Ap(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Zd=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new Xd(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return md(this._delegate,t._delegate)},t}(),tv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return st(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(Zd),ev=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Hd(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,bd(this._delegate,function(t,e,n){var r=e,i=hd("where",t);return new wd(i,r,n)}(e,n,r)))}catch(e){throw Qd(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,bd(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=hd("orderBy",t);return new Id(r,n)}(e,n)))}catch(e){throw Qd(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,bd(this._delegate,function(t){return vp("limit",t),new Ed("limit",t,"F")}(e)))}catch(e){throw Qd(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,bd(this._delegate,function(t){return vp("limitToLast",t),new Ed("limitToLast",t,"L")}(e)))}catch(e){throw Qd(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,bd(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Td("startAt",t,!0)}.apply(void 0,e)))}catch(e){throw Qd(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,bd(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Td("startAfter",t,!1)}.apply(void 0,e)))}catch(e){throw Qd(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,bd(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new _d("endBefore",t,!0)}.apply(void 0,e)))}catch(e){throw Qd(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,bd(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new _d("endAt",t,!1)}.apply(void 0,e)))}catch(e){throw Qd(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return _p(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=dp(t,bp);var e=dp(t.firestore,Np),n=kp(e),r=new xd(e);return function(t,e){var n=this,r=new tc;return t.asyncQueue.enqueueAndForget((function(){return ut(n,void 0,void 0,(function(){var n;return ct(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return ut(this,void 0,void 0,(function(){var r,i,o,s,a;return ct(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Nh(t,e,!0)];case 1:return a=u.sent(),r=new Zl(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=Ul(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}}))}))},[4,$f(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new dd(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=dp(t,bp);var e=dp(t.firestore,Np),n=kp(e),r=new xd(e);return Zf(n,t._query,{source:"server"}).then((function(n){return new dd(e,r,t,n)}))}(this._delegate):function(t){t=dp(t,bp);var e=dp(t.firestore,Np),n=kp(e),r=new xd(e);return yd(t._query),Zf(n,t._query).then((function(n){return new dd(e,r,t,n)}))}(this._delegate)).then((function(t){return new rv(e.firestore,new dd(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Yd(e),i=Jd(e,(function(e){return new rv(t.firestore,new dd(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return Md(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter($d.tu(this.firestore,e)):this._delegate.withConverter(null))},t}(),nv=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new tv(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),rv=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new ev(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new tv(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new nv(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new tv(n._firestore,r))}))},t.prototype.isEqual=function(t){return md(this._delegate,t._delegate)},t}(),iv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return st(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Xd(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Xd(this.firestore,void 0===t?Ep(this._delegate):Ep(this._delegate,t))}catch(t){throw Qd(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=dp(t.firestore,Np),r=Ep(t),i=Od(t._converter,e);return Fd(n,[Kp(Bp(t.firestore),"addDoc",r._key,i,null!==t._converter,{}).toMutation(r._key,ha.exists(!1))]).then((function(){return r}))}(this._delegate,t).then((function(t){return new Xd(e.firestore,t)}))},e.prototype.isEqual=function(t){return Tp(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter($d.tu(this.firestore,t)):this._delegate.withConverter(null))},e}(ev);function ov(t){return dp(t,gp)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var sv,av=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(Rp.bind.apply(Rp,ft([void 0],t)))}return t.documentId=function(){return new t(xo.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=St(t))instanceof Rp&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),uv=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new zp("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Gp("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Wp("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new $p("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new Xp("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),cv={Firestore:Gd,GeoPoint:Lp,Timestamp:Ao,Blob:Bd,Transaction:zd,WriteBatch:Wd,DocumentReference:Xd,DocumentSnapshot:Zd,Query:ev,QueryDocumentSnapshot:tv,QuerySnapshot:rv,CollectionReference:iv,FieldPath:av,FieldValue:uv,setLogLevel:function(t){var e;e=t,lo.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new At("firestore",(function(t){return function(t,e){return new Gd(t,new Np(t,e),new Kd)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},cv)))})(sv=te),sv.registerVersion("@firebase/firestore","2.2.5");try{var hv={apiKey:"AIzaSyBYnm32wXiwCg_zS8Aqa16zQ389xDsFkE4",authDomain:"pogworks-1a6d9.firebaseapp.com",projectId:"pogworks-1a6d9",storageBucket:"pogworks-1a6d9.appspot.com",messagingSenderId:"875754104884",appId:"1:875754104884:web:2d1eee831719b4b4e28261",measurementId:"G-HV4PWP9F5M"}}catch(t){console.log(t)}te.initializeApp(hv);const lv=te.auth(),fv=new te.auth.GoogleAuthProvider,pv=new te.auth.GithubAuthProvider;function dv(){lv.signInWithPopup(pv).catch((function(t){console.log(t),"auth/account-exists-with-different-credential"===t.code&&(lv.signInWithRedirect(fv),console.log("Your email address was already registered!"))}))}function vv(){lv.signInWithPopup(fv)}function mv(e){let n,r,o,s,a,l,p;return{c(){var t,e,i;n=h("h1"),n.textContent="PP",r=f(),o=h("button"),o.innerHTML='<img src="https://image.flaticon.com/icons/svg/25/25231.svg" alt="google-logo" width="30"/>Login with GitHub',s=f(),a=h("button"),a.innerHTML='<img src="https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg" alt="google-logo" width="30"/>Login with Google',t="font-style",e="italic",n.style.setProperty(t,e,i?"important":""),v(o,"class","loginButton svelte-86irot"),v(a,"class","loginButton svelte-86irot")},m(t,e){u(t,n,e),u(t,r,e),u(t,o,e),u(t,s,e),u(t,a,e),l||(p=[d(o,"click",dv),d(a,"click",vv)],l=!0)},p:t,i:t,o:t,d(t){t&&c(n),t&&c(r),t&&c(o),t&&c(s),t&&c(a),l=!1,i(p)}}}te.firestore();class yv extends W{constructor(t){super(),z(this,t,null,mv,s,{})}}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var gv=function(t,e){return(gv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function bv(t,e){function n(){this.constructor=t}gv(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function wv(t){return"function"==typeof t}var Iv=!1,Ev={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;Iv=t},get useDeprecatedSynchronousErrorHandling(){return Iv}};function Tv(t){setTimeout((function(){throw t}),0)}var _v={closed:!0,next:function(t){},error:function(t){if(Ev.useDeprecatedSynchronousErrorHandling)throw t;Tv(t)},complete:function(){}},Sv=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}();function Av(t){return null!==t&&"object"==typeof t}var Nv=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),kv=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var e;if(!this.closed){var n=this,r=n._parentOrParents,i=n._ctorUnsubscribe,o=n._unsubscribe,s=n._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof t)r.remove(this);else if(null!==r)for(var a=0;a<r.length;++a){r[a].remove(this)}if(wv(o)){i&&(this._unsubscribe=void 0);try{o.call(this)}catch(t){e=t instanceof Nv?Dv(t.errors):[t]}}if(Sv(s)){a=-1;for(var u=s.length;++a<u;){var c=s[a];if(Av(c))try{c.unsubscribe()}catch(t){e=e||[],t instanceof Nv?e=e.concat(Dv(t.errors)):e.push(t)}}}if(e)throw new Nv(e)}},t.prototype.add=function(e){var n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof t){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function Dv(t){return t.reduce((function(t,e){return t.concat(e instanceof Nv?e.errors:e)}),[])}var Ov=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),Cv=function(t){function e(n,r,i){var o=t.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=_v;break;case 1:if(!n){o.destination=_v;break}if("object"==typeof n){n instanceof e?(o.syncErrorThrowable=n.syncErrorThrowable,o.destination=n,n.add(o)):(o.syncErrorThrowable=!0,o.destination=new Rv(o,n));break}default:o.syncErrorThrowable=!0,o.destination=new Rv(o,n,r,i)}return o}return bv(e,t),e.prototype[Ov]=function(){return this},e.create=function(t,n,r){var i=new e(t,n,r);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(kv),Rv=function(t){function e(e,n,r,i){var o,s=t.call(this)||this;s._parentSubscriber=e;var a=s;return wv(n)?o=n:n&&(o=n.next,r=n.error,i=n.complete,n!==_v&&(wv((a=Object.create(n)).unsubscribe)&&s.add(a.unsubscribe.bind(a)),a.unsubscribe=s.unsubscribe.bind(s))),s._context=a,s._next=o,s._error=r,s._complete=i,s}return bv(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;Ev.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=Ev.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Tv(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Tv(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};Ev.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),Ev.useDeprecatedSynchronousErrorHandling)throw t;Tv(t)}},e.prototype.__tryOrSetError=function(t,e,n){if(!Ev.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return Ev.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(Tv(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(Cv);var Pv=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function xv(t){return t}function Lv(t){return 0===t.length?xv:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}var Mv=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r=this.operator,i=function(t,e,n){if(t){if(t instanceof Cv)return t;if(t[Ov])return t[Ov]()}return t||e||n?new Cv(t,e,n):new Cv(_v)}(t,e,n);if(r?i.add(r.call(i,this.source)):i.add(this.source||Ev.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),Ev.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){Ev.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),!function(t){for(;t;){var e=t,n=e.closed,r=e.destination,i=e.isStopped;if(n||i)return!1;t=r&&r instanceof Cv?r:null}return!0}(t)?console.warn(e):t.error(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=Fv(e))((function(e,r){var i;i=n.subscribe((function(e){try{t(e)}catch(t){r(t),i&&i.unsubscribe()}}),r,e)}))},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[Pv]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:Lv(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=Fv(t))((function(t,n){var r;e.subscribe((function(t){return r=t}),(function(t){return n(t)}),(function(){return t(r)}))}))},t.create=function(e){return new t(e)},t}();function Fv(t){if(t||(t=Promise),!t)throw new Error("no Promise impl found");return t}
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Vv(){lv.signOut()}function Uv(t){let e,n,r,i,o,s,l,p,m;return{c(){e=h("div"),n=h("div"),r=h("img"),o=f(),s=h("div"),l=h("button"),l.textContent="Log Out",v(r,"class","dropbtn svelte-h4vml8"),r.src!==(i=t[0].photoURL)&&v(r,"src",i),v(r,"width","50"),v(r,"alt","user avatar"),v(l,"class","profile svelte-h4vml8"),v(s,"class","dropdown-content svelte-h4vml8"),v(n,"class","dropdown svelte-h4vml8"),v(e,"class","logout svelte-h4vml8")},m(t,i){u(t,e,i),a(e,n),a(n,r),a(n,o),a(n,s),a(s,l),p||(m=d(l,"click",Vv),p=!0)},p(t,e){1&e&&r.src!==(i=t[0].photoURL)&&v(r,"src",i)},d(t){t&&c(e),p=!1,m()}}}function jv(e){let n,r;return n=new yv({}),{c(){K(n.$$.fragment)},m(t,e){G(n,t,e),r=!0},p:t,i(t){r||(U(n.$$.fragment,t),r=!0)},o(t){j(n.$$.fragment,t),r=!1},d(t){H(n,t)}}}function qv(e){let n,r,o,s,p,g,b,w,I,E,T,_,S=e[0].displayName+"";return{c(){n=h("h3"),r=l("Welcome"),o=h("br"),s=l(S),p=f(),g=h("input"),b=f(),w=h("textarea"),I=f(),E=h("button"),E.innerHTML="<span>Request</span>",v(g,"type","number"),v(g,"min","1"),v(g,"class","ammount"),v(g,"placeholder","amount in €"),v(w,"class","note"),v(w,"maxlength","100"),v(w,"placeholder","Note for rivsek"),v(E,"class","request svelte-h4vml8")},m(t,i){u(t,n,i),a(n,r),a(n,o),a(n,s),u(t,p,i),u(t,g,i),y(g,e[1]),u(t,b,i),u(t,w,i),y(w,e[2]),u(t,I,i),u(t,E,i),T||(_=[d(g,"input",e[4]),d(w,"input",e[5]),d(E,"click",e[3])],T=!0)},p(t,e){1&e&&S!==(S=t[0].displayName+"")&&function(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}(s,S),2&e&&m(g.value)!==t[1]&&y(g,t[1]),4&e&&y(w,t[2])},i:t,o:t,d(t){t&&c(n),t&&c(p),t&&c(g),t&&c(b),t&&c(w),t&&c(I),t&&c(E),T=!1,i(_)}}}function Bv(t){let e,n,r,i,o,s,l=t[0]&&Uv(t);const p=[qv,jv],d=[];function v(t,e){return t[0]?0:1}return i=v(t),o=d[i]=p[i](t),{c(){e=h("body"),l&&l.c(),n=f(),r=h("section"),o.c()},m(t,o){u(t,e,o),l&&l.m(e,null),a(e,n),a(e,r),d[i].m(r,null),s=!0},p(t,[s]){t[0]?l?l.p(t,s):(l=Uv(t),l.c(),l.m(e,n)):l&&(l.d(1),l=null);let a=i;i=v(t),i===a?d[i].p(t,s):(F(),j(d[a],1,1,(()=>{d[a]=null})),V(),o=d[i],o?o.p(t,s):(o=d[i]=p[i](t),o.c()),U(o,1),o.m(r,null))},i(t){s||(U(o),s=!0)},o(t){j(o),s=!1},d(t){t&&c(e),l&&l.d(),d[i].d()}}}function Kv(t,e,n){let r;(function(t){return new Mv((function(e){return{unsubscribe:t.onAuthStateChanged(e)}}))})(lv).subscribe((t=>n(0,r=t)));let i="",o="";return[r,i,o,function(){return""==i?alert("No amount specified!"):i<1||1==Number.isNaN(i)||i>100?alert("Amount not valid!"):void confirm("Your final request is:\n"+i+"\n"+o)},function(){i=m(this.value),n(1,i)},function(){o=this.value,n(2,o)}]}class Gv extends W{constructor(t){super(),z(this,t,Kv,Bv,s,{})}}function Hv(e){let n,r,i,o;return{c(){n=h("div"),r=h("button"),r.textContent="Log Out",v(r,"class","button"),v(n,"class","logout svelte-1wd6w0c")},m(t,s){u(t,n,s),a(n,r),i||(o=d(r,"click",e[4]),i=!0)},p:t,d(t){t&&c(n),i=!1,o()}}}function zv(t){let e,n,r,o,s,a,l,p,m;return{c(){e=h("h3"),e.textContent="Welcome",n=f(),r=h("input"),o=f(),s=h("input"),a=f(),l=h("button"),l.innerHTML="<span>Log In</span>",v(e,"class","svelte-1wd6w0c"),v(r,"type","text"),v(r,"class","ammount svelte-1wd6w0c"),v(r,"placeholder","username"),v(r,"maxlength","15"),v(s,"type","password"),v(s,"class","ammount svelte-1wd6w0c"),v(s,"placeholder","password"),v(s,"maxlength","15"),v(l,"class","button")},m(i,c){u(i,e,c),u(i,n,c),u(i,r,c),y(r,t[1]),u(i,o,c),u(i,s,c),y(s,t[2]),u(i,a,c),u(i,l,c),p||(m=[d(r,"input",t[5]),d(s,"input",t[6]),d(l,"click",t[3])],p=!0)},p(t,e){2&e&&r.value!==t[1]&&y(r,t[1]),4&e&&s.value!==t[2]&&y(s,t[2])},d(t){t&&c(e),t&&c(n),t&&c(r),t&&c(o),t&&c(s),t&&c(a),t&&c(l),p=!1,i(m)}}}function Wv(e){let n,r,i,o,s,a,l;return{c(){n=h("h3"),n.innerHTML="Welcome<br/>Privsek",r=f(),i=h("input"),o=f(),s=h("textarea"),a=f(),l=h("button"),l.innerHTML="<span>Request</span>",v(n,"class","svelte-1wd6w0c"),v(i,"type","text"),v(i,"class","ammount svelte-1wd6w0c"),v(i,"placeholder","amount"),v(i,"maxlength","15"),v(s,"class","note svelte-1wd6w0c"),v(s,"placeholder","note for rivsek"),v(s,"maxlength","100"),v(l,"class","button")},m(t,e){u(t,n,e),u(t,r,e),u(t,i,e),u(t,o,e),u(t,s,e),u(t,a,e),u(t,l,e)},p:t,d(t){t&&c(n),t&&c(r),t&&c(i),t&&c(o),t&&c(s),t&&c(a),t&&c(l)}}}function $v(e){let n,r,i,o=1==e[0]&&Hv(e);function s(t,e){return 1==t[0]?Wv:zv}let l=s(e),p=l(e);return{c(){n=h("body"),o&&o.c(),r=f(),i=h("section"),p.c(),v(i,"class","svelte-1wd6w0c")},m(t,e){u(t,n,e),o&&o.m(n,null),a(n,r),a(n,i),p.m(i,null)},p(t,[e]){1==t[0]?o?o.p(t,e):(o=Hv(t),o.c(),o.m(n,r)):o&&(o.d(1),o=null),l===(l=s(t))&&p?p.p(t,e):(p.d(1),p=l(t),p&&(p.c(),p.m(i,null)))},i:t,o:t,d(t){t&&c(n),o&&o.d(),p.d()}}}function Xv(t,e,n){let r,i,o=!1;return localStorage.getItem("validated")&&(o=!0),[o,r,i,function(){if("rivsek"!=r||"12345"!=i)return alert("Wrong login info!\nnot privsek maybe????");n(0,o=!0),localStorage.setItem("validated",o)},function(){localStorage.removeItem("validated"),n(0,o=!1)},function(){r=this.value,n(1,r)},function(){i=this.value,n(2,i)}]}class Qv extends W{constructor(t){super(),z(this,t,Xv,$v,s,{})}}function Yv(e){let n,r,i,o,s,a;return i=new it({props:{routes:{"/":Gv,"/privsek":Qv}}}),{c(){n=h("nav"),n.innerHTML='<a href="/#/" class="svelte-1wbuy0l">Home</a> \n\t<a href="/#/privsek" class="svelte-1wbuy0l">Privsek</a>',r=f(),K(i.$$.fragment),o=f(),s=h("footer"),s.innerHTML='<p><a href="https://github.com/dstuden/privsek-service" class="svelte-1wbuy0l">Privsek Pulse</a> | PogWorks Studios © 2021</p>',v(n,"class","svelte-1wbuy0l"),v(s,"class","svelte-1wbuy0l")},m(t,e){u(t,n,e),u(t,r,e),G(i,t,e),u(t,o,e),u(t,s,e),a=!0},p:t,i(t){a||(U(i.$$.fragment,t),a=!0)},o(t){j(i.$$.fragment,t),a=!1},d(t){t&&c(n),t&&c(r),H(i,t),t&&c(o),t&&c(s)}}}return new class extends W{constructor(t){super(),z(this,t,null,Yv,s,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
